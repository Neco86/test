<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tracker App</title>
    <script type="module" crossorigin>(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))N(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const b of v.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&N(b)}).observe(document,{childList:!0,subtree:!0});function g(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function N(f){if(f.ep)return;f.ep=!0;const v=g(f);fetch(f.href,v)}})();var Pt,we,Bn,lt,vn,En,An,wn,tn,Jt,Zt,On,Ct={},Pn=[],Yn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,It=Array.isArray;function ot(y,k){for(var g in k)y[g]=k[g];return y}function nn(y){y&&y.parentNode&&y.parentNode.removeChild(y)}function Xn(y,k,g){var N,f,v,b={};for(v in k)v=="key"?N=k[v]:v=="ref"?f=k[v]:b[v]=k[v];if(arguments.length>2&&(b.children=arguments.length>3?Pt.call(arguments,2):g),typeof y=="function"&&y.defaultProps!=null)for(v in y.defaultProps)b[v]===void 0&&(b[v]=y.defaultProps[v]);return Rt(y,b,N,f,null)}function Rt(y,k,g,N,f){var v={type:y,props:k,key:g,ref:N,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:f??++Bn,__i:-1,__u:0};return f==null&&we.vnode!=null&&we.vnode(v),v}function St(y){return y.children}function xt(y,k){this.props=y,this.context=k}function ht(y,k){if(k==null)return y.__?ht(y.__,y.__i+1):null;for(var g;k<y.__k.length;k++)if((g=y.__k[k])!=null&&g.__e!=null)return g.__e;return typeof y.type=="function"?ht(y):null}function In(y){var k,g;if((y=y.__)!=null&&y.__c!=null){for(y.__e=y.__c.base=null,k=0;k<y.__k.length;k++)if((g=y.__k[k])!=null&&g.__e!=null){y.__e=y.__c.base=g.__e;break}return In(y)}}function Yt(y){(!y.__d&&(y.__d=!0)&&lt.push(y)&&!Et.__r++||vn!=we.debounceRendering)&&((vn=we.debounceRendering)||En)(Et)}function Et(){for(var y,k,g,N,f,v,b,B=1;lt.length;)lt.length>B&&lt.sort(An),y=lt.shift(),B=lt.length,y.__d&&(g=void 0,N=void 0,f=(N=(k=y).__v).__e,v=[],b=[],k.__P&&((g=ot({},N)).__v=N.__v+1,we.vnode&&we.vnode(g),rn(k.__P,g,N,k.__n,k.__P.namespaceURI,32&N.__u?[f]:null,v,f??ht(N),!!(32&N.__u),b),g.__v=N.__v,g.__.__k[g.__i]=g,Mn(v,g,b),N.__e=N.__=null,g.__e!=f&&In(g)));Et.__r=0}function Nn(y,k,g,N,f,v,b,B,U,E,o){var c,l,_,h,x,A,P,L=N&&N.__k||Pn,K=k.length;for(U=er(g,k,L,U,K),c=0;c<K;c++)(_=g.__k[c])!=null&&(l=_.__i==-1?Ct:L[_.__i]||Ct,_.__i=c,A=rn(y,_,l,f,v,b,B,U,E,o),h=_.__e,_.ref&&l.ref!=_.ref&&(l.ref&&on(l.ref,null,_),o.push(_.ref,_.__c||h,_)),x==null&&h!=null&&(x=h),(P=!!(4&_.__u))||l.__k===_.__k?U=Un(_,U,y,P):typeof _.type=="function"&&A!==void 0?U=A:h&&(U=h.nextSibling),_.__u&=-7);return g.__e=x,U}function er(y,k,g,N,f){var v,b,B,U,E,o=g.length,c=o,l=0;for(y.__k=new Array(f),v=0;v<f;v++)(b=k[v])!=null&&typeof b!="boolean"&&typeof b!="function"?(typeof b=="string"||typeof b=="number"||typeof b=="bigint"||b.constructor==String?b=y.__k[v]=Rt(null,b,null,null,null):It(b)?b=y.__k[v]=Rt(St,{children:b},null,null,null):b.constructor===void 0&&b.__b>0?b=y.__k[v]=Rt(b.type,b.props,b.key,b.ref?b.ref:null,b.__v):y.__k[v]=b,U=v+l,b.__=y,b.__b=y.__b+1,B=null,(E=b.__i=tr(b,g,U,c))!=-1&&(c--,(B=g[E])&&(B.__u|=2)),B==null||B.__v==null?(E==-1&&(f>o?l--:f<o&&l++),typeof b.type!="function"&&(b.__u|=4)):E!=U&&(E==U-1?l--:E==U+1?l++:(E>U?l--:l++,b.__u|=4))):y.__k[v]=null;if(c)for(v=0;v<o;v++)(B=g[v])!=null&&!(2&B.__u)&&(B.__e==N&&(N=ht(B)),Ln(B,B));return N}function Un(y,k,g,N){var f,v;if(typeof y.type=="function"){for(f=y.__k,v=0;f&&v<f.length;v++)f[v]&&(f[v].__=y,k=Un(f[v],k,g,N));return k}y.__e!=k&&(N&&(k&&y.type&&!k.parentNode&&(k=ht(y)),g.insertBefore(y.__e,k||null)),k=y.__e);do k=k&&k.nextSibling;while(k!=null&&k.nodeType==8);return k}function tr(y,k,g,N){var f,v,b,B=y.key,U=y.type,E=k[g],o=E!=null&&(2&E.__u)==0;if(E===null&&B==null||o&&B==E.key&&U==E.type)return g;if(N>(o?1:0)){for(f=g-1,v=g+1;f>=0||v<k.length;)if((E=k[b=f>=0?f--:v++])!=null&&!(2&E.__u)&&B==E.key&&U==E.type)return b}return-1}function yn(y,k,g){k[0]=="-"?y.setProperty(k,g??""):y[k]=g==null?"":typeof g!="number"||Yn.test(k)?g:g+"px"}function Tt(y,k,g,N,f){var v,b;e:if(k=="style")if(typeof g=="string")y.style.cssText=g;else{if(typeof N=="string"&&(y.style.cssText=N=""),N)for(k in N)g&&k in g||yn(y.style,k,"");if(g)for(k in g)N&&g[k]==N[k]||yn(y.style,k,g[k])}else if(k[0]=="o"&&k[1]=="n")v=k!=(k=k.replace(wn,"$1")),b=k.toLowerCase(),k=b in y||k=="onFocusOut"||k=="onFocusIn"?b.slice(2):k.slice(2),y.l||(y.l={}),y.l[k+v]=g,g?N?g.u=N.u:(g.u=tn,y.addEventListener(k,v?Zt:Jt,v)):y.removeEventListener(k,v?Zt:Jt,v);else{if(f=="http://www.w3.org/2000/svg")k=k.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(k!="width"&&k!="height"&&k!="href"&&k!="list"&&k!="form"&&k!="tabIndex"&&k!="download"&&k!="rowSpan"&&k!="colSpan"&&k!="role"&&k!="popover"&&k in y)try{y[k]=g??"";break e}catch{}typeof g=="function"||(g==null||g===!1&&k[4]!="-"?y.removeAttribute(k):y.setAttribute(k,k=="popover"&&g==1?"":g))}}function Cn(y){return function(k){if(this.l){var g=this.l[k.type+y];if(k.t==null)k.t=tn++;else if(k.t<g.u)return;return g(we.event?we.event(k):k)}}}function rn(y,k,g,N,f,v,b,B,U,E){var o,c,l,_,h,x,A,P,L,K,$,q,C,p,O,s,n,t=k.type;if(k.constructor!==void 0)return null;128&g.__u&&(U=!!(32&g.__u),v=[B=k.__e=g.__e]),(o=we.__b)&&o(k);e:if(typeof t=="function")try{if(P=k.props,L="prototype"in t&&t.prototype.render,K=(o=t.contextType)&&N[o.__c],$=o?K?K.props.value:o.__:N,g.__c?A=(c=k.__c=g.__c).__=c.__E:(L?k.__c=c=new t(P,$):(k.__c=c=new xt(P,$),c.constructor=t,c.render=rr),K&&K.sub(c),c.state||(c.state={}),c.__n=N,l=c.__d=!0,c.__h=[],c._sb=[]),L&&c.__s==null&&(c.__s=c.state),L&&t.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ot({},c.__s)),ot(c.__s,t.getDerivedStateFromProps(P,c.__s))),_=c.props,h=c.state,c.__v=k,l)L&&t.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),L&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(L&&t.getDerivedStateFromProps==null&&P!==_&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(P,$),k.__v==g.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(P,c.__s,$)===!1){for(k.__v!=g.__v&&(c.props=P,c.state=c.__s,c.__d=!1),k.__e=g.__e,k.__k=g.__k,k.__k.some(function(i){i&&(i.__=k)}),q=0;q<c._sb.length;q++)c.__h.push(c._sb[q]);c._sb=[],c.__h.length&&b.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(P,c.__s,$),L&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(_,h,x)})}if(c.context=$,c.props=P,c.__P=y,c.__e=!1,C=we.__r,p=0,L){for(c.state=c.__s,c.__d=!1,C&&C(k),o=c.render(c.props,c.state,c.context),O=0;O<c._sb.length;O++)c.__h.push(c._sb[O]);c._sb=[]}else do c.__d=!1,C&&C(k),o=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++p<25);c.state=c.__s,c.getChildContext!=null&&(N=ot(ot({},N),c.getChildContext())),L&&!l&&c.getSnapshotBeforeUpdate!=null&&(x=c.getSnapshotBeforeUpdate(_,h)),s=o,o!=null&&o.type===St&&o.key==null&&(s=jn(o.props.children)),B=Nn(y,It(s)?s:[s],k,g,N,f,v,b,B,U,E),c.base=k.__e,k.__u&=-161,c.__h.length&&b.push(c),A&&(c.__E=c.__=null)}catch(i){if(k.__v=null,U||v!=null)if(i.then){for(k.__u|=U?160:128;B&&B.nodeType==8&&B.nextSibling;)B=B.nextSibling;v[v.indexOf(B)]=null,k.__e=B}else{for(n=v.length;n--;)nn(v[n]);Xt(k)}else k.__e=g.__e,k.__k=g.__k,i.then||Xt(k);we.__e(i,k,g)}else v==null&&k.__v==g.__v?(k.__k=g.__k,k.__e=g.__e):B=k.__e=nr(g.__e,k,g,N,f,v,b,U,E);return(o=we.diffed)&&o(k),128&k.__u?void 0:B}function Xt(y){y&&y.__c&&(y.__c.__e=!0),y&&y.__k&&y.__k.forEach(Xt)}function Mn(y,k,g){for(var N=0;N<g.length;N++)on(g[N],g[++N],g[++N]);we.__c&&we.__c(k,y),y.some(function(f){try{y=f.__h,f.__h=[],y.some(function(v){v.call(f)})}catch(v){we.__e(v,f.__v)}})}function jn(y){return typeof y!="object"||y==null||y.__b&&y.__b>0?y:It(y)?y.map(jn):ot({},y)}function nr(y,k,g,N,f,v,b,B,U){var E,o,c,l,_,h,x,A=g.props||Ct,P=k.props,L=k.type;if(L=="svg"?f="http://www.w3.org/2000/svg":L=="math"?f="http://www.w3.org/1998/Math/MathML":f||(f="http://www.w3.org/1999/xhtml"),v!=null){for(E=0;E<v.length;E++)if((_=v[E])&&"setAttribute"in _==!!L&&(L?_.localName==L:_.nodeType==3)){y=_,v[E]=null;break}}if(y==null){if(L==null)return document.createTextNode(P);y=document.createElementNS(f,L,P.is&&P),B&&(we.__m&&we.__m(k,v),B=!1),v=null}if(L==null)A===P||B&&y.data==P||(y.data=P);else{if(v=v&&Pt.call(y.childNodes),!B&&v!=null)for(A={},E=0;E<y.attributes.length;E++)A[(_=y.attributes[E]).name]=_.value;for(E in A)if(_=A[E],E!="children"){if(E=="dangerouslySetInnerHTML")c=_;else if(!(E in P)){if(E=="value"&&"defaultValue"in P||E=="checked"&&"defaultChecked"in P)continue;Tt(y,E,null,_,f)}}for(E in P)_=P[E],E=="children"?l=_:E=="dangerouslySetInnerHTML"?o=_:E=="value"?h=_:E=="checked"?x=_:B&&typeof _!="function"||A[E]===_||Tt(y,E,_,A[E],f);if(o)B||c&&(o.__html==c.__html||o.__html==y.innerHTML)||(y.innerHTML=o.__html),k.__k=[];else if(c&&(y.innerHTML=""),Nn(k.type=="template"?y.content:y,It(l)?l:[l],k,g,N,L=="foreignObject"?"http://www.w3.org/1999/xhtml":f,v,b,v?v[0]:g.__k&&ht(g,0),B,U),v!=null)for(E=v.length;E--;)nn(v[E]);B||(E="value",L=="progress"&&h==null?y.removeAttribute("value"):h!=null&&(h!==y[E]||L=="progress"&&!h||L=="option"&&h!=A[E])&&Tt(y,E,h,A[E],f),E="checked",x!=null&&x!=y[E]&&Tt(y,E,x,A[E],f))}return y}function on(y,k,g){try{if(typeof y=="function"){var N=typeof y.__u=="function";N&&y.__u(),N&&k==null||(y.__u=y(k))}else y.current=k}catch(f){we.__e(f,g)}}function Ln(y,k,g){var N,f;if(we.unmount&&we.unmount(y),(N=y.ref)&&(N.current&&N.current!=y.__e||on(N,null,k)),(N=y.__c)!=null){if(N.componentWillUnmount)try{N.componentWillUnmount()}catch(v){we.__e(v,k)}N.base=N.__P=null}if(N=y.__k)for(f=0;f<N.length;f++)N[f]&&Ln(N[f],k,g||typeof y.type!="function");g||nn(y.__e),y.__c=y.__=y.__e=void 0}function rr(y,k,g){return this.constructor(y,g)}function or(y,k,g){var N,f,v,b;k==document&&(k=document.documentElement),we.__&&we.__(y,k),f=(N=!1)?null:k.__k,v=[],b=[],rn(k,y=k.__k=Xn(St,null,[y]),f||Ct,Ct,k.namespaceURI,f?null:k.firstChild?Pt.call(k.childNodes):null,v,f?f.__e:k.firstChild,N,b),Mn(v,y,b)}function ir(y){function k(g){var N,f;return this.getChildContext||(N=new Set,(f={})[k.__c]=this,this.getChildContext=function(){return f},this.componentWillUnmount=function(){N=null},this.shouldComponentUpdate=function(v){this.props.value!=v.value&&N.forEach(function(b){b.__e=!0,Yt(b)})},this.sub=function(v){N.add(v);var b=v.componentWillUnmount;v.componentWillUnmount=function(){N&&N.delete(v),b&&b.call(v)}}),g.children}return k.__c="__cC"+On++,k.__=y,k.Provider=k.__l=(k.Consumer=function(g,N){return g.children(N)}).contextType=k,k}Pt=Pn.slice,we={__e:function(y,k,g,N){for(var f,v,b;k=k.__;)if((f=k.__c)&&!f.__)try{if((v=f.constructor)&&v.getDerivedStateFromError!=null&&(f.setState(v.getDerivedStateFromError(y)),b=f.__d),f.componentDidCatch!=null&&(f.componentDidCatch(y,N||{}),b=f.__d),b)return f.__E=f}catch(B){y=B}throw y}},Bn=0,xt.prototype.setState=function(y,k){var g;g=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ot({},this.state),typeof y=="function"&&(y=y(ot({},g),this.props)),y&&ot(g,y),y!=null&&this.__v&&(k&&this._sb.push(k),Yt(this))},xt.prototype.forceUpdate=function(y){this.__v&&(this.__e=!0,y&&this.__h.push(y),Yt(this))},xt.prototype.render=St,lt=[],En=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,An=function(y,k){return y.__v.__b-k.__v.__b},Et.__r=0,wn=/(PointerCapture)$|Capture$/i,tn=0,Jt=Cn(!1),Zt=Cn(!0),On=0;var sr=0;function _e(y,k,g,N,f,v){k||(k={});var b,B,U=k;if("ref"in U)for(B in U={},k)B=="ref"?b=k[B]:U[B]=k[B];var E={type:y,props:U,key:g,ref:b,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--sr,__i:-1,__u:0,__source:f,__self:v};if(typeof y=="function"&&(b=y.defaultProps))for(B in b)U[B]===void 0&&(U[B]=b[B]);return we.vnode&&we.vnode(E),E}var gt,Ie,qt,Sn,At=0,Fn=[],je=we,kn=je.__b,_n=je.__r,mn=je.diffed,bn=je.__c,Tn=je.unmount,Rn=je.__;function Nt(y,k){je.__h&&je.__h(Ie,y,At||k),At=0;var g=Ie.__H||(Ie.__H={__:[],__h:[]});return y>=g.__.length&&g.__.push({}),g.__[y]}function wt(y){return At=1,cr(Kn,y)}function cr(y,k,g){var N=Nt(gt++,2);if(N.t=y,!N.__c&&(N.__=[Kn(void 0,k),function(B){var U=N.__N?N.__N[0]:N.__[0],E=N.t(U,B);U!==E&&(N.__N=[E,N.__[1]],N.__c.setState({}))}],N.__c=Ie,!Ie.__f)){var f=function(B,U,E){if(!N.__c.__H)return!0;var o=N.__c.__H.__.filter(function(l){return!!l.__c});if(o.every(function(l){return!l.__N}))return!v||v.call(this,B,U,E);var c=N.__c.props!==B;return o.forEach(function(l){if(l.__N){var _=l.__[0];l.__=l.__N,l.__N=void 0,_!==l.__[0]&&(c=!0)}}),v&&v.call(this,B,U,E)||c};Ie.__f=!0;var v=Ie.shouldComponentUpdate,b=Ie.componentWillUpdate;Ie.componentWillUpdate=function(B,U,E){if(this.__e){var o=v;v=void 0,f(B,U,E),v=o}b&&b.call(this,B,U,E)},Ie.shouldComponentUpdate=f}return N.__N||N.__}function Ot(y,k){var g=Nt(gt++,3);!je.__s&&Hn(g.__H,k)&&(g.__=y,g.u=k,Ie.__H.__h.push(g))}function ur(y){return At=5,ar(function(){return{current:y}},[])}function ar(y,k){var g=Nt(gt++,7);return Hn(g.__H,k)&&(g.__=y(),g.__H=k,g.__h=y),g.__}function lr(y){var k=Ie.context[y.__c],g=Nt(gt++,9);return g.c=y,k?(g.__==null&&(g.__=!0,k.sub(Ie)),k.props.value):y.__}function dr(){for(var y;y=Fn.shift();)if(y.__P&&y.__H)try{y.__H.__h.forEach(Bt),y.__H.__h.forEach(en),y.__H.__h=[]}catch(k){y.__H.__h=[],je.__e(k,y.__v)}}je.__b=function(y){Ie=null,kn&&kn(y)},je.__=function(y,k){y&&k.__k&&k.__k.__m&&(y.__m=k.__k.__m),Rn&&Rn(y,k)},je.__r=function(y){_n&&_n(y),gt=0;var k=(Ie=y.__c).__H;k&&(qt===Ie?(k.__h=[],Ie.__h=[],k.__.forEach(function(g){g.__N&&(g.__=g.__N),g.u=g.__N=void 0})):(k.__h.forEach(Bt),k.__h.forEach(en),k.__h=[],gt=0)),qt=Ie},je.diffed=function(y){mn&&mn(y);var k=y.__c;k&&k.__H&&(k.__H.__h.length&&(Fn.push(k)!==1&&Sn===je.requestAnimationFrame||((Sn=je.requestAnimationFrame)||fr)(dr)),k.__H.__.forEach(function(g){g.u&&(g.__H=g.u),g.u=void 0})),qt=Ie=null},je.__c=function(y,k){k.some(function(g){try{g.__h.forEach(Bt),g.__h=g.__h.filter(function(N){return!N.__||en(N)})}catch(N){k.some(function(f){f.__h&&(f.__h=[])}),k=[],je.__e(N,g.__v)}}),bn&&bn(y,k)},je.unmount=function(y){Tn&&Tn(y);var k,g=y.__c;g&&g.__H&&(g.__H.__.forEach(function(N){try{Bt(N)}catch(f){k=f}}),g.__H=void 0,k&&je.__e(k,g.__v))};var xn=typeof requestAnimationFrame=="function";function fr(y){var k,g=function(){clearTimeout(N),xn&&cancelAnimationFrame(k),setTimeout(y)},N=setTimeout(g,35);xn&&(k=requestAnimationFrame(g))}function Bt(y){var k=Ie,g=y.__c;typeof g=="function"&&(y.__c=void 0,g()),Ie=k}function en(y){var k=Ie;y.__c=y.__(),Ie=k}function Hn(y,k){return!y||y.length!==k.length||k.some(function(g,N){return g!==y[N]})}function Kn(y,k){return typeof k=="function"?k(y):k}const rt={},Vn=async()=>{rt.db||(rt.db=await new Promise(g=>{const N=indexedDB.open("crypto-db",1);N.onupgradeneeded=()=>N.result.createObjectStore("keys"),N.onsuccess=()=>g(N.result)}));const y=await new Promise(g=>{const N=rt.db.transaction("keys");N.objectStore("keys").get("rsa-public").onsuccess=f=>g(f.target.result)}),k=await new Promise(g=>{const N=rt.db.transaction("keys");N.objectStore("keys").get("rsa-private").onsuccess=f=>g(f.target.result)});return y&&(rt.pub=y),k&&(rt.pri=k),rt},sn=async()=>Object.keys(rt).length?rt:await Vn(),Qt=y=>{let k="";const g=new Uint8Array(y),N=32768;for(let f=0;f<g.length;f+=N)k+=String.fromCharCode(...g.subarray(f,f+N));return btoa(k)},yt=y=>{const k=atob(y),g=new Uint8Array(k.length);for(let N=0;N<k.length;N++)g[N]=k.charCodeAt(N);return g.buffer},hr=y=>btoa(unescape(encodeURIComponent(JSON.stringify(y)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),gr=y=>(y=y.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(atob(y))))),pr=()=>_e("div",{children:_e("input",{type:"file",accept:".json",onChange:async k=>{const g=k.target.files[0];if(!g)return;const N=JSON.parse(await g.text()),f=await crypto.subtle.importKey("spki",yt(N.pub),{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),v=await crypto.subtle.importKey("pkcs8",yt(N.pri),{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]),{db:b}=await sn(),B=b.transaction("keys","readwrite");B.objectStore("keys").put(f,"rsa-public"),B.objectStore("keys").put(v,"rsa-private"),location.reload()}})}),zn=()=>{const{globalState:y,setGlobalState:k}=lr(qn);return[y,k]};var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dn(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var Gn={exports:{}};(function(y,k){(function(g,N){y.exports=N()})($n,function(){var g=1e3,N=6e4,f=36e5,v="millisecond",b="second",B="minute",U="hour",E="day",o="week",c="month",l="quarter",_="year",h="date",x="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var w=["th","st","nd","rd"],m=S%100;return"["+S+(w[(m-20)%10]||w[m]||w[0])+"]"}},K=function(S,w,m){var F=String(S);return!F||F.length>=w?S:""+Array(w+1-F.length).join(m)+S},$={s:K,z:function(S){var w=-S.utcOffset(),m=Math.abs(w),F=Math.floor(m/60),j=m%60;return(w<=0?"+":"-")+K(F,2,"0")+":"+K(j,2,"0")},m:function S(w,m){if(w.date()<m.date())return-S(m,w);var F=12*(m.year()-w.year())+(m.month()-w.month()),j=w.clone().add(F,c),G=m-j<0,D=w.clone().add(F+(G?-1:1),c);return+(-(F+(m-j)/(G?j-D:D-j))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:c,y:_,w:o,d:E,D:h,h:U,m:B,s:b,ms:v,Q:l}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},q="en",C={};C[q]=L;var p="$isDayjsObject",O=function(S){return S instanceof i||!(!S||!S[p])},s=function S(w,m,F){var j;if(!w)return q;if(typeof w=="string"){var G=w.toLowerCase();C[G]&&(j=G),m&&(C[G]=m,j=G);var D=w.split("-");if(!j&&D.length>1)return S(D[0])}else{var Z=w.name;C[Z]=w,j=Z}return!F&&j&&(q=j),j||!F&&q},n=function(S,w){if(O(S))return S.clone();var m=typeof w=="object"?w:{};return m.date=S,m.args=arguments,new i(m)},t=$;t.l=s,t.i=O,t.w=function(S,w){return n(S,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var i=function(){function S(m){this.$L=s(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[p]=!0}var w=S.prototype;return w.parse=function(m){this.$d=function(F){var j=F.date,G=F.utc;if(j===null)return new Date(NaN);if(t.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var D=j.match(A);if(D){var Z=D[2]-1||0,ee=(D[7]||"0").substring(0,3);return G?new Date(Date.UTC(D[1],Z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,ee)):new Date(D[1],Z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,ee)}}return new Date(j)}(m),this.init()},w.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},w.$utils=function(){return t},w.isValid=function(){return this.$d.toString()!==x},w.isSame=function(m,F){var j=n(m);return this.startOf(F)<=j&&j<=this.endOf(F)},w.isAfter=function(m,F){return n(m)<this.startOf(F)},w.isBefore=function(m,F){return this.endOf(F)<n(m)},w.$g=function(m,F,j){return t.u(m)?this[F]:this.set(j,m)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(m,F){var j=this,G=!!t.u(F)||F,D=t.p(m),Z=function(le,ue){var ce=t.w(j.$u?Date.UTC(j.$y,ue,le):new Date(j.$y,ue,le),j);return G?ce:ce.endOf(E)},ee=function(le,ue){return t.w(j.toDate()[le].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(ue)),j)},he=this.$W,ie=this.$M,re=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case _:return G?Z(1,0):Z(31,11);case c:return G?Z(1,ie):Z(0,ie+1);case o:var J=this.$locale().weekStart||0,oe=(he<J?he+7:he)-J;return Z(G?re-oe:re+(6-oe),ie);case E:case h:return ee(ne+"Hours",0);case U:return ee(ne+"Minutes",1);case B:return ee(ne+"Seconds",2);case b:return ee(ne+"Milliseconds",3);default:return this.clone()}},w.endOf=function(m){return this.startOf(m,!1)},w.$set=function(m,F){var j,G=t.p(m),D="set"+(this.$u?"UTC":""),Z=(j={},j[E]=D+"Date",j[h]=D+"Date",j[c]=D+"Month",j[_]=D+"FullYear",j[U]=D+"Hours",j[B]=D+"Minutes",j[b]=D+"Seconds",j[v]=D+"Milliseconds",j)[G],ee=G===E?this.$D+(F-this.$W):F;if(G===c||G===_){var he=this.clone().set(h,1);he.$d[Z](ee),he.init(),this.$d=he.set(h,Math.min(this.$D,he.daysInMonth())).$d}else Z&&this.$d[Z](ee);return this.init(),this},w.set=function(m,F){return this.clone().$set(m,F)},w.get=function(m){return this[t.p(m)]()},w.add=function(m,F){var j,G=this;m=Number(m);var D=t.p(F),Z=function(ie){var re=n(G);return t.w(re.date(re.date()+Math.round(ie*m)),G)};if(D===c)return this.set(c,this.$M+m);if(D===_)return this.set(_,this.$y+m);if(D===E)return Z(1);if(D===o)return Z(7);var ee=(j={},j[B]=N,j[U]=f,j[b]=g,j)[D]||1,he=this.$d.getTime()+m*ee;return t.w(he,this)},w.subtract=function(m,F){return this.add(-1*m,F)},w.format=function(m){var F=this,j=this.$locale();if(!this.isValid())return j.invalidDate||x;var G=m||"YYYY-MM-DDTHH:mm:ssZ",D=t.z(this),Z=this.$H,ee=this.$m,he=this.$M,ie=j.weekdays,re=j.months,ne=j.meridiem,J=function(ue,ce,ae,pe){return ue&&(ue[ce]||ue(F,G))||ae[ce].slice(0,pe)},oe=function(ue){return t.s(Z%12||12,ue,"0")},le=ne||function(ue,ce,ae){var pe=ue<12?"AM":"PM";return ae?pe.toLowerCase():pe};return G.replace(P,function(ue,ce){return ce||function(ae){switch(ae){case"YY":return String(F.$y).slice(-2);case"YYYY":return t.s(F.$y,4,"0");case"M":return he+1;case"MM":return t.s(he+1,2,"0");case"MMM":return J(j.monthsShort,he,re,3);case"MMMM":return J(re,he);case"D":return F.$D;case"DD":return t.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return J(j.weekdaysMin,F.$W,ie,2);case"ddd":return J(j.weekdaysShort,F.$W,ie,3);case"dddd":return ie[F.$W];case"H":return String(Z);case"HH":return t.s(Z,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return le(Z,ee,!0);case"A":return le(Z,ee,!1);case"m":return String(ee);case"mm":return t.s(ee,2,"0");case"s":return String(F.$s);case"ss":return t.s(F.$s,2,"0");case"SSS":return t.s(F.$ms,3,"0");case"Z":return D}return null}(ue)||D.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(m,F,j){var G,D=this,Z=t.p(F),ee=n(m),he=(ee.utcOffset()-this.utcOffset())*N,ie=this-ee,re=function(){return t.m(D,ee)};switch(Z){case _:G=re()/12;break;case c:G=re();break;case l:G=re()/3;break;case o:G=(ie-he)/6048e5;break;case E:G=(ie-he)/864e5;break;case U:G=ie/f;break;case B:G=ie/N;break;case b:G=ie/g;break;default:G=ie}return j?G:t.a(G)},w.daysInMonth=function(){return this.endOf(c).$D},w.$locale=function(){return C[this.$L]},w.locale=function(m,F){if(!m)return this.$L;var j=this.clone(),G=s(m,F,!0);return G&&(j.$L=G),j},w.clone=function(){return t.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},S}(),a=i.prototype;return n.prototype=a,[["$ms",v],["$s",b],["$m",B],["$H",U],["$W",E],["$M",c],["$y",_],["$D",h]].forEach(function(S){a[S[1]]=function(w){return this.$g(w,S[0],S[1])}}),n.extend=function(S,w){return S.$i||(S(w,i,n),S.$i=!0),n},n.locale=s,n.isDayjs=O,n.unix=function(S){return n(1e3*S)},n.en=C[q],n.Ls=C,n.p={},n})})(Gn);var vr=Gn.exports;const vt=Dn(vr),yr=()=>{const[y,k]=wt([]),[{checkData:g},N]=zn(),f=ur(null),v=vt();Ot(()=>{const B=Object.keys(g);let U=v;if(B.length>0){const h=B.sort((x,A)=>vt(x).valueOf()-vt(A).valueOf());U=vt(h[0])}const E=U.startOf("month"),l=v.startOf("month").add(2,"month").diff(E,"month")+1,_=[];for(let h=0;h<l;h++){const x=E.add(h,"month"),A=x.daysInMonth(),P=x.startOf("month").day(),L=[];for(let $=1;$<=A;$++){const q=x.date($),C=q.format("YYYY-MM-DD"),p=q.day()===0||q.day()===6,O=q.isSame(v,"day");L.push({day:$,isCurrentMonth:!0,date:C,isWeekend:p,isToday:O})}const K=[];for(let $=0;$<P;$++)K.push({isBlank:!0});_.push({month:x.format("YYYY年MM月"),yearMonth:x.format("YYYY-MM"),days:[...K,...L],isCurrentMonth:x.isSame(v,"month")})}k(_)},[g]),Ot(()=>{f.current&&f.current.scrollIntoView({block:"start"})},[y]);const b=B=>{N({page:it.CHECK,checkDay:B})};return _e("div",{className:"h-screen overflow-auto",children:_e("div",{className:"max-w-4xl mx-auto",children:y.map((B,U)=>_e("div",{ref:B.isCurrentMonth?f:null,className:"mb-4 p-4",children:[_e("h2",{className:"text-xl font-bold mb-4 px-2 py-1 rounded text-gray-800",children:B.month}),_e("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["日","一","二","三","四","五","六"].map(E=>_e("div",{className:"text-center font-semibold text-sm text-gray-600",children:E},E))}),_e("div",{className:"grid grid-cols-7 gap-1",children:B.days.map((E,o)=>{var c,l,_;return E.isBlank?_e("div",{className:"h-10"},`blank-${o}`):_e("div",{onClick:()=>b(E.date),className:`relative h-10 flex items-center justify-center rounded cursor-pointer transition-colors ${E.isToday?"bg-blue-500 font-bold":E.isWeekend?"bg-red-50 text-red-600":"bg-gray-50 hover:bg-gray-100"} ${(c=g[E.date])!=null&&c.length?"bg-green-100 text-green-800 border-2 border-green-400":""}`,children:_e("div",{className:"flex items-center gap-1",children:[E.day,!!((l=g[E.date])!=null&&l.length)&&_e("span",{className:"absolute right-0 top-0 text-green-800 text-xs rounded-full w-4 h-4 flex items-center justify-center",children:["(",(_=g[E.date])==null?void 0:_.length,")"]})]})},E.date)})})]},B.yearMonth))})})},Cr=y=>typeof y=="string"?new TextEncoder().encode(y).buffer:y.arrayBuffer?y.arrayBuffer():y,Sr=async y=>{const{pub:k}=await sn(),g=await Cr(y),N=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),f=crypto.getRandomValues(new Uint8Array(12)),v=await crypto.subtle.encrypt({name:"AES-GCM",iv:f},N,g),b=await crypto.subtle.exportKey("raw",N),B=await crypto.subtle.encrypt({name:"RSA-OAEP"},k,b);return hr({c:Qt(v),iv:Qt(f),k:Qt(B),t:y.type})},Ye=async y=>{const{pri:k}=await sn(),{c:g,iv:N,k:f,t:v}=gr(y),b=await crypto.subtle.decrypt({name:"RSA-OAEP"},k,yt(f)),B=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]),U=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(yt(N))},B,yt(g));return new Blob([U],{type:v})};var Wn={exports:{}};(function(y,k){(function(N,f){y.exports=f()})($n,function(){return function(g){var N={};function f(v){if(N[v])return N[v].exports;var b=N[v]={i:v,l:!1,exports:{}};return g[v].call(b.exports,b,b.exports,f),b.l=!0,b.exports}return f.m=g,f.c=N,f.d=function(v,b,B){f.o(v,b)||Object.defineProperty(v,b,{enumerable:!0,get:B})},f.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},f.t=function(v,b){if(b&1&&(v=f(v)),b&8||b&4&&typeof v=="object"&&v&&v.__esModule)return v;var B=Object.create(null);if(f.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:v}),b&2&&typeof v!="string")for(var U in v)f.d(B,U,(function(E){return v[E]}).bind(null,U));return B},f.n=function(v){var b=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(b,"a",b),b},f.o=function(v,b){return Object.prototype.hasOwnProperty.call(v,b)},f.p="/dist/",f(f.s="./index.js")}({"./index.js":function(g,N,f){var v=f("./src/cos.js");g.exports=v},"./lib/base64.js":function(g,N){var f=function(v){v=v||{};var b=v.Base64,B="2.1.9",U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=function(i){for(var a={},S=0,w=i.length;S<w;S++)a[i.charAt(S)]=S;return a}(U),o=String.fromCharCode,c=function(a){if(a.length<2){var S=a.charCodeAt(0);return S<128?a:S<2048?o(192|S>>>6)+o(128|S&63):o(224|S>>>12&15)+o(128|S>>>6&63)+o(128|S&63)}else{var S=65536+(a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320);return o(240|S>>>18&7)+o(128|S>>>12&63)+o(128|S>>>6&63)+o(128|S&63)}},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=function(a){return a.replace(l,c)},h=function(a){var S=[0,2,1][a.length%3],w=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),m=[U.charAt(w>>>18),U.charAt(w>>>12&63),S>=2?"=":U.charAt(w>>>6&63),S>=1?"=":U.charAt(w&63)];return m.join("")},x=v.btoa?function(i){return v.btoa(i)}:function(i){return i.replace(/[\s\S]{1,3}/g,h)},A=function(i){return x(_(i))},P=function(a,S){return S?A(String(a)).replace(/[+\/]/g,function(w){return w=="+"?"-":"_"}).replace(/=/g,""):A(String(a))},L=function(a){return P(a,!0)},K=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),$=function(a){switch(a.length){case 4:var S=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),w=S-65536;return o((w>>>10)+55296)+o((w&1023)+56320);case 3:return o((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return o((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},q=function(a){return a.replace(K,$)},C=function(a){var S=a.length,w=S%4,m=(S>0?E[a.charAt(0)]<<18:0)|(S>1?E[a.charAt(1)]<<12:0)|(S>2?E[a.charAt(2)]<<6:0)|(S>3?E[a.charAt(3)]:0),F=[o(m>>>16),o(m>>>8&255),o(m&255)];return F.length-=[0,0,2,1][w],F.join("")},p=v.atob?function(i){return v.atob(i)}:function(i){return i.replace(/[\s\S]{1,4}/g,C)},O=function(i){return q(p(i))},s=function(a){return O(String(a).replace(/[-_]/g,function(S){return S=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},n=function(){var a=v.Base64;return v.Base64=b,a},t={VERSION:B,atob:p,btoa:x,fromBase64:s,toBase64:P,utob:_,encode:P,encodeURI:L,btou:q,decode:s,noConflict:n};return t}();g.exports=f},"./lib/crypto.js":function(g,N,f){(function(v){var b=f("./node_modules/@babel/runtime/helpers/typeof.js"),B=B||function(U,E){var o={},c=o.lib={},l=function(){},_=c.Base={extend:function(C){l.prototype=this;var p=new l;return C&&p.mixIn(C),p.hasOwnProperty("init")||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var C=this.extend();return C.init.apply(C,arguments),C},init:function(){},mixIn:function(C){for(var p in C)C.hasOwnProperty(p)&&(this[p]=C[p]);C.hasOwnProperty("toString")&&(this.toString=C.toString)},clone:function(){return this.init.prototype.extend(this)}},h=c.WordArray=_.extend({init:function(C,p){C=this.words=C||[],this.sigBytes=p!=E?p:4*C.length},toString:function(C){return(C||A).stringify(this)},concat:function(C){var p=this.words,O=C.words,s=this.sigBytes;if(C=C.sigBytes,this.clamp(),s%4)for(var n=0;n<C;n++)p[s+n>>>2]|=(O[n>>>2]>>>24-8*(n%4)&255)<<24-8*((s+n)%4);else if(65535<O.length)for(n=0;n<C;n+=4)p[s+n>>>2]=O[n>>>2];else p.push.apply(p,O);return this.sigBytes+=C,this},clamp:function(){var C=this.words,p=this.sigBytes;C[p>>>2]&=4294967295<<32-8*(p%4),C.length=U.ceil(p/4)},clone:function(){var C=_.clone.call(this);return C.words=this.words.slice(0),C},random:function(C){for(var p=[],O=0;O<C;O+=4)p.push(4294967296*U.random()|0);return new h.init(p,C)}}),x=o.enc={},A=x.Hex={stringify:function(C){var p=C.words;C=C.sigBytes;for(var O=[],s=0;s<C;s++){var n=p[s>>>2]>>>24-8*(s%4)&255;O.push((n>>>4).toString(16)),O.push((n&15).toString(16))}return O.join("")},parse:function(C){for(var p=C.length,O=[],s=0;s<p;s+=2)O[s>>>3]|=parseInt(C.substr(s,2),16)<<24-4*(s%8);return new h.init(O,p/2)}},P=x.Latin1={stringify:function(C){var p=C.words;C=C.sigBytes;for(var O=[],s=0;s<C;s++)O.push(String.fromCharCode(p[s>>>2]>>>24-8*(s%4)&255));return O.join("")},parse:function(C){for(var p=C.length,O=[],s=0;s<p;s++)O[s>>>2]|=(C.charCodeAt(s)&255)<<24-8*(s%4);return new h.init(O,p)}},L=x.Utf8={stringify:function(C){try{return decodeURIComponent(escape(P.stringify(C)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(C){return P.parse(unescape(encodeURIComponent(C)))}},K=c.BufferedBlockAlgorithm=_.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(C){typeof C=="string"&&(C=L.parse(C)),this._data.concat(C),this._nDataBytes+=C.sigBytes},_process:function(C){var p=this._data,O=p.words,s=p.sigBytes,n=this.blockSize,t=s/(4*n),t=C?U.ceil(t):U.max((t|0)-this._minBufferSize,0);if(C=t*n,s=U.min(4*C,s),C){for(var i=0;i<C;i+=n)this._doProcessBlock(O,i);i=O.splice(0,C),p.sigBytes-=s}return new h.init(i,s)},clone:function(){var C=_.clone.call(this);return C._data=this._data.clone(),C},_minBufferSize:0});c.Hasher=K.extend({cfg:_.extend(),init:function(C){this.cfg=this.cfg.extend(C),this.reset()},reset:function(){K.reset.call(this),this._doReset()},update:function(C){return this._append(C),this._process(),this},finalize:function(C){return C&&this._append(C),this._doFinalize()},blockSize:16,_createHelper:function(C){return function(p,O){return new C.init(O).finalize(p)}},_createHmacHelper:function(C){return function(p,O){return new $.HMAC.init(C,O).finalize(p)}}});var $=o.algo={};return o}(Math);(function(){var U=B,l=U.lib,E=l.WordArray,o=l.Hasher,c=[],l=U.algo.SHA1=o.extend({_doReset:function(){this._hash=new E.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,x){for(var A=this._hash.words,P=A[0],L=A[1],K=A[2],$=A[3],q=A[4],C=0;80>C;C++){if(16>C)c[C]=h[x+C]|0;else{var p=c[C-3]^c[C-8]^c[C-14]^c[C-16];c[C]=p<<1|p>>>31}p=(P<<5|P>>>27)+q+c[C],p=20>C?p+((L&K|~L&$)+1518500249):40>C?p+((L^K^$)+1859775393):60>C?p+((L&K|L&$|K&$)-1894007588):p+((L^K^$)-899497514),q=$,$=K,K=L<<30|L>>>2,L=P,P=p}A[0]=A[0]+P|0,A[1]=A[1]+L|0,A[2]=A[2]+K|0,A[3]=A[3]+$|0,A[4]=A[4]+q|0},_doFinalize:function(){var h=this._data,x=h.words,A=8*this._nDataBytes,P=8*h.sigBytes;return x[P>>>5]|=128<<24-P%32,x[(P+64>>>9<<4)+14]=Math.floor(A/4294967296),x[(P+64>>>9<<4)+15]=A,h.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h}});U.SHA1=o._createHelper(l),U.HmacSHA1=o._createHmacHelper(l)})(),function(){var U=B,E=U.enc.Utf8;U.algo.HMAC=U.lib.Base.extend({init:function(c,l){c=this._hasher=new c.init,typeof l=="string"&&(l=E.parse(l));var _=c.blockSize,h=4*_;l.sigBytes>h&&(l=c.finalize(l)),l.clamp();for(var x=this._oKey=l.clone(),A=this._iKey=l.clone(),P=x.words,L=A.words,K=0;K<_;K++)P[K]^=1549556828,L[K]^=909522486;x.sigBytes=A.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var l=this._hasher;return c=l.finalize(c),l.reset(),l.finalize(this._oKey.clone().concat(c))}})}(),function(){var U=B,E=U.lib,o=E.WordArray,c=U.enc;c.Base64={stringify:function(_){var h=_.words,x=_.sigBytes,A=this._map;_.clamp();for(var P=[],L=0;L<x;L+=3)for(var K=h[L>>>2]>>>24-L%4*8&255,$=h[L+1>>>2]>>>24-(L+1)%4*8&255,q=h[L+2>>>2]>>>24-(L+2)%4*8&255,C=K<<16|$<<8|q,p=0;p<4&&L+p*.75<x;p++)P.push(A.charAt(C>>>6*(3-p)&63));var O=A.charAt(64);if(O)for(;P.length%4;)P.push(O);return P.join("")},parse:function(_){var h=_.length,x=this._map,A=x.charAt(64);if(A){var P=_.indexOf(A);P!=-1&&(h=P)}for(var L=[],K=0,$=0;$<h;$++)if($%4){var q=x.indexOf(_.charAt($-1))<<$%4*2,C=x.indexOf(_.charAt($))>>>6-$%4*2;L[K>>>2]|=(q|C)<<24-K%4*8,K++}return o.create(L,K)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),b(v)==="object"?v.exports=B:window.CryptoJS=B}).call(this,f("./node_modules/webpack/buildin/module.js")(g))},"./lib/md5.js":function(g,N,f){(function(v){var b,B=f("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var U=(typeof window>"u"?"undefined":B(window))==="object",E=U?window:{};E.JS_MD5_NO_WINDOW&&(U=!1);var o=!U&&(typeof self>"u"?"undefined":B(self))==="object";o&&(E=self);var c=!E.JS_MD5_NO_COMMON_JS&&B(v)==="object"&&v.exports,l=f("./node_modules/webpack/buildin/amd-options.js"),_=!E.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",h="0123456789abcdef".split(""),x=[128,32768,8388608,-2147483648],A=[0,8,16,24],P=["hex","array","digest","buffer","arrayBuffer","base64"],L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),K=[],$;if(_){var q=new ArrayBuffer(68);$=new Uint8Array(q),K=new Uint32Array(q)}(E.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),_&&(E.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return B(n)==="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var C=function(t){return function(i,a){return new O(!0).update(i,a)[t]()}},p=function(){var t=C("hex");t.getCtx=t.create=function(){return new O},t.update=function(S){return t.create().update(S)};for(var i=0;i<P.length;++i){var a=P[i];t[a]=C(a)}return t};function O(n){if(n)K[0]=K[16]=K[1]=K[2]=K[3]=K[4]=K[5]=K[6]=K[7]=K[8]=K[9]=K[10]=K[11]=K[12]=K[13]=K[14]=K[15]=0,this.blocks=K,this.buffer8=$;else if(_){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}O.prototype.update=function(n,t){if(!this.finalized){for(var i,a=0,S,w=n.length,m=this.blocks,F=this.buffer8;a<w;){if(this.hashed&&(this.hashed=!1,m[0]=m[16],m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),_)for(S=this.start;a<w&&S<64;++a)i=n.charCodeAt(a),t||i<128?F[S++]=i:i<2048?(F[S++]=192|i>>6,F[S++]=128|i&63):i<55296||i>=57344?(F[S++]=224|i>>12,F[S++]=128|i>>6&63,F[S++]=128|i&63):(i=65536+((i&1023)<<10|n.charCodeAt(++a)&1023),F[S++]=240|i>>18,F[S++]=128|i>>12&63,F[S++]=128|i>>6&63,F[S++]=128|i&63);else for(S=this.start;a<w&&S<64;++a)i=n.charCodeAt(a),t||i<128?m[S>>2]|=i<<A[S++&3]:i<2048?(m[S>>2]|=(192|i>>6)<<A[S++&3],m[S>>2]|=(128|i&63)<<A[S++&3]):i<55296||i>=57344?(m[S>>2]|=(224|i>>12)<<A[S++&3],m[S>>2]|=(128|i>>6&63)<<A[S++&3],m[S>>2]|=(128|i&63)<<A[S++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++a)&1023),m[S>>2]|=(240|i>>18)<<A[S++&3],m[S>>2]|=(128|i>>12&63)<<A[S++&3],m[S>>2]|=(128|i>>6&63)<<A[S++&3],m[S>>2]|=(128|i&63)<<A[S++&3]);this.lastByteIndex=S,this.bytes+=S-this.start,S>=64?(this.start=S-64,this.hash(),this.hashed=!0):this.start=S}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[t>>2]|=x[t&3],t>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},O.prototype.hash=function(){var n,t,i,a,S,w,m=this.blocks;this.first?(n=m[0]-680876937,n=(n<<7|n>>>25)-271733879<<0,a=(-1732584194^n&2004318071)+m[1]-117830708,a=(a<<12|a>>>20)+n<<0,i=(-271733879^a&(n^-271733879))+m[2]-1126478375,i=(i<<17|i>>>15)+a<<0,t=(n^i&(a^n))+m[3]-1316259209,t=(t<<22|t>>>10)+i<<0):(n=this.h0,t=this.h1,i=this.h2,a=this.h3,n+=(a^t&(i^a))+m[0]-680876936,n=(n<<7|n>>>25)+t<<0,a+=(i^n&(t^i))+m[1]-389564586,a=(a<<12|a>>>20)+n<<0,i+=(t^a&(n^t))+m[2]+606105819,i=(i<<17|i>>>15)+a<<0,t+=(n^i&(a^n))+m[3]-1044525330,t=(t<<22|t>>>10)+i<<0),n+=(a^t&(i^a))+m[4]-176418897,n=(n<<7|n>>>25)+t<<0,a+=(i^n&(t^i))+m[5]+1200080426,a=(a<<12|a>>>20)+n<<0,i+=(t^a&(n^t))+m[6]-1473231341,i=(i<<17|i>>>15)+a<<0,t+=(n^i&(a^n))+m[7]-45705983,t=(t<<22|t>>>10)+i<<0,n+=(a^t&(i^a))+m[8]+1770035416,n=(n<<7|n>>>25)+t<<0,a+=(i^n&(t^i))+m[9]-1958414417,a=(a<<12|a>>>20)+n<<0,i+=(t^a&(n^t))+m[10]-42063,i=(i<<17|i>>>15)+a<<0,t+=(n^i&(a^n))+m[11]-1990404162,t=(t<<22|t>>>10)+i<<0,n+=(a^t&(i^a))+m[12]+1804603682,n=(n<<7|n>>>25)+t<<0,a+=(i^n&(t^i))+m[13]-40341101,a=(a<<12|a>>>20)+n<<0,i+=(t^a&(n^t))+m[14]-1502002290,i=(i<<17|i>>>15)+a<<0,t+=(n^i&(a^n))+m[15]+1236535329,t=(t<<22|t>>>10)+i<<0,n+=(i^a&(t^i))+m[1]-165796510,n=(n<<5|n>>>27)+t<<0,a+=(t^i&(n^t))+m[6]-1069501632,a=(a<<9|a>>>23)+n<<0,i+=(n^t&(a^n))+m[11]+643717713,i=(i<<14|i>>>18)+a<<0,t+=(a^n&(i^a))+m[0]-373897302,t=(t<<20|t>>>12)+i<<0,n+=(i^a&(t^i))+m[5]-701558691,n=(n<<5|n>>>27)+t<<0,a+=(t^i&(n^t))+m[10]+38016083,a=(a<<9|a>>>23)+n<<0,i+=(n^t&(a^n))+m[15]-660478335,i=(i<<14|i>>>18)+a<<0,t+=(a^n&(i^a))+m[4]-405537848,t=(t<<20|t>>>12)+i<<0,n+=(i^a&(t^i))+m[9]+568446438,n=(n<<5|n>>>27)+t<<0,a+=(t^i&(n^t))+m[14]-1019803690,a=(a<<9|a>>>23)+n<<0,i+=(n^t&(a^n))+m[3]-187363961,i=(i<<14|i>>>18)+a<<0,t+=(a^n&(i^a))+m[8]+1163531501,t=(t<<20|t>>>12)+i<<0,n+=(i^a&(t^i))+m[13]-1444681467,n=(n<<5|n>>>27)+t<<0,a+=(t^i&(n^t))+m[2]-51403784,a=(a<<9|a>>>23)+n<<0,i+=(n^t&(a^n))+m[7]+1735328473,i=(i<<14|i>>>18)+a<<0,t+=(a^n&(i^a))+m[12]-1926607734,t=(t<<20|t>>>12)+i<<0,S=t^i,n+=(S^a)+m[5]-378558,n=(n<<4|n>>>28)+t<<0,a+=(S^n)+m[8]-2022574463,a=(a<<11|a>>>21)+n<<0,w=a^n,i+=(w^t)+m[11]+1839030562,i=(i<<16|i>>>16)+a<<0,t+=(w^i)+m[14]-35309556,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^a)+m[1]-1530992060,n=(n<<4|n>>>28)+t<<0,a+=(S^n)+m[4]+1272893353,a=(a<<11|a>>>21)+n<<0,w=a^n,i+=(w^t)+m[7]-155497632,i=(i<<16|i>>>16)+a<<0,t+=(w^i)+m[10]-1094730640,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^a)+m[13]+681279174,n=(n<<4|n>>>28)+t<<0,a+=(S^n)+m[0]-358537222,a=(a<<11|a>>>21)+n<<0,w=a^n,i+=(w^t)+m[3]-722521979,i=(i<<16|i>>>16)+a<<0,t+=(w^i)+m[6]+76029189,t=(t<<23|t>>>9)+i<<0,S=t^i,n+=(S^a)+m[9]-640364487,n=(n<<4|n>>>28)+t<<0,a+=(S^n)+m[12]-421815835,a=(a<<11|a>>>21)+n<<0,w=a^n,i+=(w^t)+m[15]+530742520,i=(i<<16|i>>>16)+a<<0,t+=(w^i)+m[2]-995338651,t=(t<<23|t>>>9)+i<<0,n+=(i^(t|~a))+m[0]-198630844,n=(n<<6|n>>>26)+t<<0,a+=(t^(n|~i))+m[7]+1126891415,a=(a<<10|a>>>22)+n<<0,i+=(n^(a|~t))+m[14]-1416354905,i=(i<<15|i>>>17)+a<<0,t+=(a^(i|~n))+m[5]-57434055,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~a))+m[12]+1700485571,n=(n<<6|n>>>26)+t<<0,a+=(t^(n|~i))+m[3]-1894986606,a=(a<<10|a>>>22)+n<<0,i+=(n^(a|~t))+m[10]-1051523,i=(i<<15|i>>>17)+a<<0,t+=(a^(i|~n))+m[1]-2054922799,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~a))+m[8]+1873313359,n=(n<<6|n>>>26)+t<<0,a+=(t^(n|~i))+m[15]-30611744,a=(a<<10|a>>>22)+n<<0,i+=(n^(a|~t))+m[6]-1560198380,i=(i<<15|i>>>17)+a<<0,t+=(a^(i|~n))+m[13]+1309151649,t=(t<<21|t>>>11)+i<<0,n+=(i^(t|~a))+m[4]-145523070,n=(n<<6|n>>>26)+t<<0,a+=(t^(n|~i))+m[11]-1120210379,a=(a<<10|a>>>22)+n<<0,i+=(n^(a|~t))+m[2]+718787259,i=(i<<15|i>>>17)+a<<0,t+=(a^(i|~n))+m[9]-343485551,t=(t<<21|t>>>11)+i<<0,this.first?(this.h0=n+1732584193<<0,this.h1=t-271733879<<0,this.h2=i-1732584194<<0,this.h3=a+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+t<<0,this.h2=this.h2+i<<0,this.h3=this.h3+a<<0)},O.prototype.hex=function(){this.finalize();var n=this.h0,t=this.h1,i=this.h2,a=this.h3;return h[n>>4&15]+h[n&15]+h[n>>12&15]+h[n>>8&15]+h[n>>20&15]+h[n>>16&15]+h[n>>28&15]+h[n>>24&15]+h[t>>4&15]+h[t&15]+h[t>>12&15]+h[t>>8&15]+h[t>>20&15]+h[t>>16&15]+h[t>>28&15]+h[t>>24&15]+h[i>>4&15]+h[i&15]+h[i>>12&15]+h[i>>8&15]+h[i>>20&15]+h[i>>16&15]+h[i>>28&15]+h[i>>24&15]+h[a>>4&15]+h[a&15]+h[a>>12&15]+h[a>>8&15]+h[a>>20&15]+h[a>>16&15]+h[a>>28&15]+h[a>>24&15]},O.prototype.toString=O.prototype.hex,O.prototype.digest=function(n){if(n==="hex")return this.hex();this.finalize();var t=this.h0,i=this.h1,a=this.h2,S=this.h3,w=[t&255,t>>8&255,t>>16&255,t>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255,S&255,S>>8&255,S>>16&255,S>>24&255];return w},O.prototype.array=O.prototype.digest,O.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),t=new Uint32Array(n);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,n},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.base64=function(){for(var n,t,i,a="",S=this.array(),w=0;w<15;)n=S[w++],t=S[w++],i=S[w++],a+=L[n>>>2]+L[(n<<4|t>>>4)&63]+L[(t<<2|i>>>6)&63]+L[i&63];return n=S[w],a+=L[n>>>2]+L[n<<4&63]+"==",a};var s=p();c?v.exports=s:(E.md5=s,l&&(b=(function(){return s}).call(s,f,s,v),b!==void 0&&(v.exports=b)))})()}).call(this,f("./node_modules/webpack/buildin/module.js")(g))},"./lib/request.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/typeof.js"),b=function(l){switch(v(l)){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},B=function(l,_,h,x){return _=_||"&",h=h||"=",l===null&&(l=void 0),v(l)==="object"?Object.keys(l).map(function(A){var P=encodeURIComponent(b(A))+h;return Array.isArray(l[A])?l[A].map(function(L){return P+encodeURIComponent(b(L))}).join(_):P+encodeURIComponent(b(l[A]))}).filter(Boolean).join(_):""},U=function(l,_,h){var x={},A=_.getAllResponseHeaders();return A&&A.length>0&&A.trim().split(`
`).forEach(function(P){if(P){var L=P.indexOf(":"),K=P.substr(0,L).trim().toLowerCase(),$=P.substr(L+1).trim();x[K]=$}}),{error:l,statusCode:_.status,statusMessage:_.statusText,headers:x,body:h}},E=function(l,_){return!_&&_==="text"?l.responseText:l.response},o=function(l,_){var h=(l.method||"GET").toUpperCase(),x=l.url;if(l.qs){var A=B(l.qs);A&&(x+=(x.indexOf("?")===-1?"?":"&")+A)}var P=new XMLHttpRequest;if(P.open(h,x,!0),P.responseType=l.dataType||"text",l.xhrFields)for(var L in l.xhrFields)P[L]=l.xhrFields[L];var K=l.headers;if(K)for(var $ in K)K.hasOwnProperty($)&&$.toLowerCase()!=="content-length"&&$.toLowerCase()!=="user-agent"&&$.toLowerCase()!=="origin"&&$.toLowerCase()!=="host"&&P.setRequestHeader($,K[$]);return l.onProgress&&P.upload&&(P.upload.onprogress=l.onProgress),l.onDownloadProgress&&(P.onprogress=l.onDownloadProgress),l.timeout&&(P.timeout=l.timeout),P.ontimeout=function(q){var C=new Error("timeout");_(U(C,P))},P.onload=function(){_(U(null,P,E(P,l.dataType)))},P.onerror=function(q){var C=E(P,l.dataType);if(C)_(U(null,P,C));else{var p=P.statusText;!p&&P.status===0&&(p=new Error("CORS blocked or network error")),_(U(p,P,C))}},P.send(l.body||""),P};g.exports=o},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(g,N){function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}g.exports=f,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function b(U,E){for(var o=0;o<E.length;o++){var c=E[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(U,v(c.key),c)}}function B(U,E,o){return E&&b(U.prototype,E),o&&b(U,o),Object.defineProperty(U,"prototype",{writable:!1}),U}g.exports=B,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function b(B,U,E){return(U=v(U))in B?Object.defineProperty(B,U,{value:E,enumerable:!0,configurable:!0,writable:!0}):B[U]=E,B}g.exports=b,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/typeof.js").default;function b(B,U){if(v(B)!="object"||!B)return B;var E=B[Symbol.toPrimitive];if(E!==void 0){var o=E.call(B,U||"default");if(v(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(B)}g.exports=b,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/typeof.js").default,b=f("./node_modules/@babel/runtime/helpers/toPrimitive.js");function B(U){var E=b(U,"string");return v(E)=="symbol"?E:E+""}g.exports=B,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(g,N){function f(v){"@babel/helpers - typeof";return g.exports=f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},g.exports.__esModule=!0,g.exports.default=g.exports,f(v)}g.exports=f,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(g,N,f){const v=f("./node_modules/fast-xml-parser/src/validator.js"),b=f("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),B=f("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");g.exports={XMLParser:b,XMLValidator:v,XMLBuilder:B}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(g,N){function f(v){return typeof v=="function"?v:Array.isArray(v)?b=>{for(const B of v)if(typeof B=="string"&&b===B||B instanceof RegExp&&B.test(b))return!0}:()=>!1}g.exports=f},"./node_modules/fast-xml-parser/src/util.js":function(g,N,f){const v=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",b=v+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",B="["+v+"]["+b+"]*",U=new RegExp("^"+B+"$"),E=function(c,l){const _=[];let h=l.exec(c);for(;h;){const x=[];x.startIndex=l.lastIndex-h[0].length;const A=h.length;for(let P=0;P<A;P++)x.push(h[P]);_.push(x),h=l.exec(c)}return _},o=function(c){const l=U.exec(c);return!(l===null||typeof l>"u")};N.isExist=function(c){return typeof c<"u"},N.isEmptyObject=function(c){return Object.keys(c).length===0},N.merge=function(c,l,_){if(l){const h=Object.keys(l),x=h.length;for(let A=0;A<x;A++)_==="strict"?c[h[A]]=[l[h[A]]]:c[h[A]]=l[h[A]]}},N.getValue=function(c){return N.isExist(c)?c:""},N.isName=o,N.getAllMatches=E,N.nameRegexp=B},"./node_modules/fast-xml-parser/src/validator.js":function(g,N,f){const v=f("./node_modules/fast-xml-parser/src/util.js"),b={allowBooleanAttributes:!1,unpairedTags:[]};N.validate=function(C,p){p=Object.assign({},b,p);const O=[];let s=!1,n=!1;C[0]==="\uFEFF"&&(C=C.substr(1));for(let t=0;t<C.length;t++)if(C[t]==="<"&&C[t+1]==="?"){if(t+=2,t=U(C,t),t.err)return t}else if(C[t]==="<"){let i=t;if(t++,C[t]==="!"){t=E(C,t);continue}else{let a=!1;C[t]==="/"&&(a=!0,t++);let S="";for(;t<C.length&&C[t]!==">"&&C[t]!==" "&&C[t]!=="	"&&C[t]!==`
`&&C[t]!=="\r";t++)S+=C[t];if(S=S.trim(),S[S.length-1]==="/"&&(S=S.substring(0,S.length-1),t--),!K(S)){let F;return S.trim().length===0?F="Invalid space after '<'.":F="Tag '"+S+"' is an invalid name.",P("InvalidTag",F,$(C,t))}const w=l(C,t);if(w===!1)return P("InvalidAttr","Attributes for '"+S+"' have open quote.",$(C,t));let m=w.value;if(t=w.index,m[m.length-1]==="/"){const F=t-m.length;m=m.substring(0,m.length-1);const j=h(m,p);if(j===!0)s=!0;else return P(j.err.code,j.err.msg,$(C,F+j.err.line))}else if(a)if(w.tagClosed){if(m.trim().length>0)return P("InvalidTag","Closing tag '"+S+"' can't have attributes or invalid starting.",$(C,i));if(O.length===0)return P("InvalidTag","Closing tag '"+S+"' has not been opened.",$(C,i));{const F=O.pop();if(S!==F.tagName){let j=$(C,F.tagStartPos);return P("InvalidTag","Expected closing tag '"+F.tagName+"' (opened in line "+j.line+", col "+j.col+") instead of closing tag '"+S+"'.",$(C,i))}O.length==0&&(n=!0)}}else return P("InvalidTag","Closing tag '"+S+"' doesn't have proper closing.",$(C,t));else{const F=h(m,p);if(F!==!0)return P(F.err.code,F.err.msg,$(C,t-m.length+F.err.line));if(n===!0)return P("InvalidXml","Multiple possible root nodes found.",$(C,t));p.unpairedTags.indexOf(S)!==-1||O.push({tagName:S,tagStartPos:i}),s=!0}for(t++;t<C.length;t++)if(C[t]==="<")if(C[t+1]==="!"){t++,t=E(C,t);continue}else if(C[t+1]==="?"){if(t=U(C,++t),t.err)return t}else break;else if(C[t]==="&"){const F=A(C,t);if(F==-1)return P("InvalidChar","char '&' is not expected.",$(C,t));t=F}else if(n===!0&&!B(C[t]))return P("InvalidXml","Extra text at the end",$(C,t));C[t]==="<"&&t--}}else{if(B(C[t]))continue;return P("InvalidChar","char '"+C[t]+"' is not expected.",$(C,t))}if(s){if(O.length==1)return P("InvalidTag","Unclosed tag '"+O[0].tagName+"'.",$(C,O[0].tagStartPos));if(O.length>0)return P("InvalidXml","Invalid '"+JSON.stringify(O.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return P("InvalidXml","Start tag expected.",1);return!0};function B(C){return C===" "||C==="	"||C===`
`||C==="\r"}function U(C,p){const O=p;for(;p<C.length;p++)if(C[p]=="?"||C[p]==" "){const s=C.substr(O,p-O);if(p>5&&s==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",$(C,p));if(C[p]=="?"&&C[p+1]==">"){p++;break}else continue}return p}function E(C,p){if(C.length>p+5&&C[p+1]==="-"&&C[p+2]==="-"){for(p+=3;p<C.length;p++)if(C[p]==="-"&&C[p+1]==="-"&&C[p+2]===">"){p+=2;break}}else if(C.length>p+8&&C[p+1]==="D"&&C[p+2]==="O"&&C[p+3]==="C"&&C[p+4]==="T"&&C[p+5]==="Y"&&C[p+6]==="P"&&C[p+7]==="E"){let O=1;for(p+=8;p<C.length;p++)if(C[p]==="<")O++;else if(C[p]===">"&&(O--,O===0))break}else if(C.length>p+9&&C[p+1]==="["&&C[p+2]==="C"&&C[p+3]==="D"&&C[p+4]==="A"&&C[p+5]==="T"&&C[p+6]==="A"&&C[p+7]==="["){for(p+=8;p<C.length;p++)if(C[p]==="]"&&C[p+1]==="]"&&C[p+2]===">"){p+=2;break}}return p}const o='"',c="'";function l(C,p){let O="",s="",n=!1;for(;p<C.length;p++){if(C[p]===o||C[p]===c)s===""?s=C[p]:s!==C[p]||(s="");else if(C[p]===">"&&s===""){n=!0;break}O+=C[p]}return s!==""?!1:{value:O,index:p,tagClosed:n}}const _=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function h(C,p){const O=v.getAllMatches(C,_),s={};for(let n=0;n<O.length;n++){if(O[n][1].length===0)return P("InvalidAttr","Attribute '"+O[n][2]+"' has no space in starting.",q(O[n]));if(O[n][3]!==void 0&&O[n][4]===void 0)return P("InvalidAttr","Attribute '"+O[n][2]+"' is without value.",q(O[n]));if(O[n][3]===void 0&&!p.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+O[n][2]+"' is not allowed.",q(O[n]));const t=O[n][2];if(!L(t))return P("InvalidAttr","Attribute '"+t+"' is an invalid name.",q(O[n]));if(!s.hasOwnProperty(t))s[t]=1;else return P("InvalidAttr","Attribute '"+t+"' is repeated.",q(O[n]))}return!0}function x(C,p){let O=/\d/;for(C[p]==="x"&&(p++,O=/[\da-fA-F]/);p<C.length;p++){if(C[p]===";")return p;if(!C[p].match(O))break}return-1}function A(C,p){if(p++,C[p]===";")return-1;if(C[p]==="#")return p++,x(C,p);let O=0;for(;p<C.length;p++,O++)if(!(C[p].match(/\w/)&&O<20)){if(C[p]===";")break;return-1}return p}function P(C,p,O){return{err:{code:C,msg:p,line:O.line||O,col:O.col}}}function L(C){return v.isName(C)}function K(C){return v.isName(C)}function $(C,p){const O=C.substring(0,p).split(/\r?\n/);return{line:O.length,col:O[O.length-1].length+1}}function q(C){return C.startIndex+C[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(g,N,f){const v=f("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),b=f("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),B={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(l,_){return _},attributeValueProcessor:function(l,_){return _},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function U(l){this.options=Object.assign({},B,l),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=b(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=E,this.options.format?(this.indentate=o,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}U.prototype.build=function(l){return this.options.preserveOrder?v(l,this.options):(Array.isArray(l)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(l={[this.options.arrayNodeName]:l}),this.j2x(l,0,[]).val)},U.prototype.j2x=function(l,_,h){let x="",A="";const P=h.join(".");for(let L in l)if(Object.prototype.hasOwnProperty.call(l,L))if(typeof l[L]>"u")this.isAttribute(L)&&(A+="");else if(l[L]===null)this.isAttribute(L)?A+="":L[0]==="?"?A+=this.indentate(_)+"<"+L+"?"+this.tagEndChar:A+=this.indentate(_)+"<"+L+"/"+this.tagEndChar;else if(l[L]instanceof Date)A+=this.buildTextValNode(l[L],L,"",_);else if(typeof l[L]!="object"){const K=this.isAttribute(L);if(K&&!this.ignoreAttributesFn(K,P))x+=this.buildAttrPairStr(K,""+l[L]);else if(!K)if(L===this.options.textNodeName){let $=this.options.tagValueProcessor(L,""+l[L]);A+=this.replaceEntitiesValue($)}else A+=this.buildTextValNode(l[L],L,"",_)}else if(Array.isArray(l[L])){const K=l[L].length;let $="",q="";for(let C=0;C<K;C++){const p=l[L][C];if(!(typeof p>"u"))if(p===null)L[0]==="?"?A+=this.indentate(_)+"<"+L+"?"+this.tagEndChar:A+=this.indentate(_)+"<"+L+"/"+this.tagEndChar;else if(typeof p=="object")if(this.options.oneListGroup){const O=this.j2x(p,_+1,h.concat(L));$+=O.val,this.options.attributesGroupName&&p.hasOwnProperty(this.options.attributesGroupName)&&(q+=O.attrStr)}else $+=this.processTextOrObjNode(p,L,_,h);else if(this.options.oneListGroup){let O=this.options.tagValueProcessor(L,p);O=this.replaceEntitiesValue(O),$+=O}else $+=this.buildTextValNode(p,L,"",_)}this.options.oneListGroup&&($=this.buildObjectNode($,L,q,_)),A+=$}else if(this.options.attributesGroupName&&L===this.options.attributesGroupName){const K=Object.keys(l[L]),$=K.length;for(let q=0;q<$;q++)x+=this.buildAttrPairStr(K[q],""+l[L][K[q]])}else A+=this.processTextOrObjNode(l[L],L,_,h);return{attrStr:x,val:A}},U.prototype.buildAttrPairStr=function(l,_){return _=this.options.attributeValueProcessor(l,""+_),_=this.replaceEntitiesValue(_),this.options.suppressBooleanAttributes&&_==="true"?" "+l:" "+l+'="'+_+'"'};function E(l,_,h,x){const A=this.j2x(l,h+1,x.concat(_));return l[this.options.textNodeName]!==void 0&&Object.keys(l).length===1?this.buildTextValNode(l[this.options.textNodeName],_,A.attrStr,h):this.buildObjectNode(A.val,_,A.attrStr,h)}U.prototype.buildObjectNode=function(l,_,h,x){if(l==="")return _[0]==="?"?this.indentate(x)+"<"+_+h+"?"+this.tagEndChar:this.indentate(x)+"<"+_+h+this.closeTag(_)+this.tagEndChar;{let A="</"+_+this.tagEndChar,P="";return _[0]==="?"&&(P="?",A=""),(h||h==="")&&l.indexOf("<")===-1?this.indentate(x)+"<"+_+h+P+">"+l+A:this.options.commentPropName!==!1&&_===this.options.commentPropName&&P.length===0?this.indentate(x)+`\x3C!--${l}-->`+this.newLine:this.indentate(x)+"<"+_+h+P+this.tagEndChar+l+this.indentate(x)+A}},U.prototype.closeTag=function(l){let _="";return this.options.unpairedTags.indexOf(l)!==-1?this.options.suppressUnpairedNode||(_="/"):this.options.suppressEmptyNode?_="/":_=`></${l}`,_},U.prototype.buildTextValNode=function(l,_,h,x){if(this.options.cdataPropName!==!1&&_===this.options.cdataPropName)return this.indentate(x)+`<![CDATA[${l}]]>`+this.newLine;if(this.options.commentPropName!==!1&&_===this.options.commentPropName)return this.indentate(x)+`\x3C!--${l}-->`+this.newLine;if(_[0]==="?")return this.indentate(x)+"<"+_+h+"?"+this.tagEndChar;{let A=this.options.tagValueProcessor(_,l);return A=this.replaceEntitiesValue(A),A===""?this.indentate(x)+"<"+_+h+this.closeTag(_)+this.tagEndChar:this.indentate(x)+"<"+_+h+">"+A+"</"+_+this.tagEndChar}},U.prototype.replaceEntitiesValue=function(l){if(l&&l.length>0&&this.options.processEntities)for(let _=0;_<this.options.entities.length;_++){const h=this.options.entities[_];l=l.replace(h.regex,h.val)}return l};function o(l){return this.options.indentBy.repeat(l)}function c(l){return l.startsWith(this.options.attributeNamePrefix)&&l!==this.options.textNodeName?l.substr(this.attrPrefixLen):!1}g.exports=U},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(g,N){const f=`
`;function v(c,l){let _="";return l.format&&l.indentBy.length>0&&(_=f),b(c,l,"",_)}function b(c,l,_,h){let x="",A=!1;for(let P=0;P<c.length;P++){const L=c[P],K=B(L);if(K===void 0)continue;let $="";if(_.length===0?$=K:$=`${_}.${K}`,K===l.textNodeName){let s=L[K];E($,l)||(s=l.tagValueProcessor(K,s),s=o(s,l)),A&&(x+=h),x+=s,A=!1;continue}else if(K===l.cdataPropName){A&&(x+=h),x+=`<![CDATA[${L[K][0][l.textNodeName]}]]>`,A=!1;continue}else if(K===l.commentPropName){x+=h+`\x3C!--${L[K][0][l.textNodeName]}-->`,A=!0;continue}else if(K[0]==="?"){const s=U(L[":@"],l),n=K==="?xml"?"":h;let t=L[K][0][l.textNodeName];t=t.length!==0?" "+t:"",x+=n+`<${K}${t}${s}?>`,A=!0;continue}let q=h;q!==""&&(q+=l.indentBy);const C=U(L[":@"],l),p=h+`<${K}${C}`,O=b(L[K],l,$,q);l.unpairedTags.indexOf(K)!==-1?l.suppressUnpairedNode?x+=p+">":x+=p+"/>":(!O||O.length===0)&&l.suppressEmptyNode?x+=p+"/>":O&&O.endsWith(">")?x+=p+`>${O}${h}</${K}>`:(x+=p+">",O&&h!==""&&(O.includes("/>")||O.includes("</"))?x+=h+l.indentBy+O+h:x+=O,x+=`</${K}>`),A=!0}return x}function B(c){const l=Object.keys(c);for(let _=0;_<l.length;_++){const h=l[_];if(c.hasOwnProperty(h)&&h!==":@")return h}}function U(c,l){let _="";if(c&&!l.ignoreAttributes)for(let h in c){if(!c.hasOwnProperty(h))continue;let x=l.attributeValueProcessor(h,c[h]);x=o(x,l),x===!0&&l.suppressBooleanAttributes?_+=` ${h.substr(l.attributeNamePrefix.length)}`:_+=` ${h.substr(l.attributeNamePrefix.length)}="${x}"`}return _}function E(c,l){c=c.substr(0,c.length-l.textNodeName.length-1);let _=c.substr(c.lastIndexOf(".")+1);for(let h in l.stopNodes)if(l.stopNodes[h]===c||l.stopNodes[h]==="*."+_)return!0;return!1}function o(c,l){if(c&&c.length>0&&l.processEntities)for(let _=0;_<l.entities.length;_++){const h=l.entities[_];c=c.replace(h.regex,h.val)}return c}g.exports=v},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(g,N,f){const v=f("./node_modules/fast-xml-parser/src/util.js");function b(h,x){const A={};if(h[x+3]==="O"&&h[x+4]==="C"&&h[x+5]==="T"&&h[x+6]==="Y"&&h[x+7]==="P"&&h[x+8]==="E"){x=x+9;let P=1,L=!1,K=!1,$="";for(;x<h.length;x++)if(h[x]==="<"&&!K){if(L&&E(h,x))x+=7,[entityName,val,x]=B(h,x+1),val.indexOf("&")===-1&&(A[_(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(L&&o(h,x))x+=8;else if(L&&c(h,x))x+=8;else if(L&&l(h,x))x+=9;else if(U)K=!0;else throw new Error("Invalid DOCTYPE");P++,$=""}else if(h[x]===">"){if(K?h[x-1]==="-"&&h[x-2]==="-"&&(K=!1,P--):P--,P===0)break}else h[x]==="["?L=!0:$+=h[x];if(P!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:A,i:x}}function B(h,x){let A="";for(;x<h.length&&h[x]!=="'"&&h[x]!=='"';x++)A+=h[x];if(A=A.trim(),A.indexOf(" ")!==-1)throw new Error("External entites are not supported");const P=h[x++];let L="";for(;x<h.length&&h[x]!==P;x++)L+=h[x];return[A,L,x]}function U(h,x){return h[x+1]==="!"&&h[x+2]==="-"&&h[x+3]==="-"}function E(h,x){return h[x+1]==="!"&&h[x+2]==="E"&&h[x+3]==="N"&&h[x+4]==="T"&&h[x+5]==="I"&&h[x+6]==="T"&&h[x+7]==="Y"}function o(h,x){return h[x+1]==="!"&&h[x+2]==="E"&&h[x+3]==="L"&&h[x+4]==="E"&&h[x+5]==="M"&&h[x+6]==="E"&&h[x+7]==="N"&&h[x+8]==="T"}function c(h,x){return h[x+1]==="!"&&h[x+2]==="A"&&h[x+3]==="T"&&h[x+4]==="T"&&h[x+5]==="L"&&h[x+6]==="I"&&h[x+7]==="S"&&h[x+8]==="T"}function l(h,x){return h[x+1]==="!"&&h[x+2]==="N"&&h[x+3]==="O"&&h[x+4]==="T"&&h[x+5]==="A"&&h[x+6]==="T"&&h[x+7]==="I"&&h[x+8]==="O"&&h[x+9]==="N"}function _(h){if(v.isName(h))return h;throw new Error(`Invalid entity name ${h}`)}g.exports=b},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(g,N){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(b,B){return B},attributeValueProcessor:function(b,B){return B},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(b,B,U){return b}},v=function(b){return Object.assign({},f,b)};N.buildOptions=v,N.defaultOptions=f},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(g,N,f){const v=f("./node_modules/fast-xml-parser/src/util.js"),b=f("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),B=f("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),U=f("./node_modules/strnum/strnum.js"),E=f("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class o{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(i,a)=>String.fromCharCode(Number.parseInt(a,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(i,a)=>String.fromCharCode(Number.parseInt(a,16))}},this.addExternalEntities=c,this.parseXml=A,this.parseTextData=l,this.resolveNameSpace=_,this.buildAttributesMap=x,this.isItStopNode=$,this.replaceEntitiesValue=L,this.readStopNodeData=O,this.saveTextToParentTag=K,this.addChild=P,this.ignoreAttributesFn=E(this.options.ignoreAttributes)}}function c(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const a=t[i];this.lastEntities[a]={regex:new RegExp("&"+a+";","g"),val:n[a]}}}function l(n,t,i,a,S,w,m){if(n!==void 0&&(this.options.trimValues&&!a&&(n=n.trim()),n.length>0)){m||(n=this.replaceEntitiesValue(n));const F=this.options.tagValueProcessor(t,n,i,S,w);return F==null?n:typeof F!=typeof n||F!==n?F:this.options.trimValues?s(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?s(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function _(n){if(this.options.removeNSPrefix){const t=n.split(":"),i=n.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(n=i+t[1])}return n}const h=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function x(n,t,i){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const a=v.getAllMatches(n,h),S=a.length,w={};for(let m=0;m<S;m++){const F=this.resolveNameSpace(a[m][1]);if(this.ignoreAttributesFn(F,t))continue;let j=a[m][4],G=this.options.attributeNamePrefix+F;if(F.length)if(this.options.transformAttributeName&&(G=this.options.transformAttributeName(G)),G==="__proto__"&&(G="#__proto__"),j!==void 0){this.options.trimValues&&(j=j.trim()),j=this.replaceEntitiesValue(j);const D=this.options.attributeValueProcessor(F,j,t);D==null?w[G]=j:typeof D!=typeof j||D!==j?w[G]=D:w[G]=s(j,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(w[G]=!0)}if(!Object.keys(w).length)return;if(this.options.attributesGroupName){const m={};return m[this.options.attributesGroupName]=w,m}return w}}const A=function(n){const t=new b("!xml");let i=t,a="",S="";for(let w=0;w<n.length;w++)if(n[w]==="<")if(n[w+1]==="/"){const F=C(n,">",w,"Closing Tag is not closed.");let j=n.substring(w+2,F).trim();if(this.options.removeNSPrefix){const Z=j.indexOf(":");Z!==-1&&(j=j.substr(Z+1))}this.options.transformTagName&&(j=this.options.transformTagName(j)),i&&(a=this.saveTextToParentTag(a,i,S));const G=S.substring(S.lastIndexOf(".")+1);if(j&&this.options.unpairedTags.indexOf(j)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${j}>`);let D=0;G&&this.options.unpairedTags.indexOf(G)!==-1?(D=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):D=S.lastIndexOf("."),S=S.substring(0,D),i=this.tagsNodeStack.pop(),a="",w=F}else if(n[w+1]==="?"){let F=p(n,w,!1,"?>");if(!F)throw new Error("Pi Tag is not closed.");if(a=this.saveTextToParentTag(a,i,S),!(this.options.ignoreDeclaration&&F.tagName==="?xml"||this.options.ignorePiTags)){const j=new b(F.tagName);j.add(this.options.textNodeName,""),F.tagName!==F.tagExp&&F.attrExpPresent&&(j[":@"]=this.buildAttributesMap(F.tagExp,S,F.tagName)),this.addChild(i,j,S)}w=F.closeIndex+1}else if(n.substr(w+1,3)==="!--"){const F=C(n,"-->",w+4,"Comment is not closed.");if(this.options.commentPropName){const j=n.substring(w+4,F-2);a=this.saveTextToParentTag(a,i,S),i.add(this.options.commentPropName,[{[this.options.textNodeName]:j}])}w=F}else if(n.substr(w+1,2)==="!D"){const F=B(n,w);this.docTypeEntities=F.entities,w=F.i}else if(n.substr(w+1,2)==="!["){const F=C(n,"]]>",w,"CDATA is not closed.")-2,j=n.substring(w+9,F);a=this.saveTextToParentTag(a,i,S);let G=this.parseTextData(j,i.tagname,S,!0,!1,!0,!0);G==null&&(G=""),this.options.cdataPropName?i.add(this.options.cdataPropName,[{[this.options.textNodeName]:j}]):i.add(this.options.textNodeName,G),w=F+2}else{let F=p(n,w,this.options.removeNSPrefix),j=F.tagName;const G=F.rawTagName;let D=F.tagExp,Z=F.attrExpPresent,ee=F.closeIndex;this.options.transformTagName&&(j=this.options.transformTagName(j)),i&&a&&i.tagname!=="!xml"&&(a=this.saveTextToParentTag(a,i,S,!1));const he=i;if(he&&this.options.unpairedTags.indexOf(he.tagname)!==-1&&(i=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),j!==t.tagname&&(S+=S?"."+j:j),this.isItStopNode(this.options.stopNodes,S,j)){let ie="";if(D.length>0&&D.lastIndexOf("/")===D.length-1)j[j.length-1]==="/"?(j=j.substr(0,j.length-1),S=S.substr(0,S.length-1),D=j):D=D.substr(0,D.length-1),w=F.closeIndex;else if(this.options.unpairedTags.indexOf(j)!==-1)w=F.closeIndex;else{const ne=this.readStopNodeData(n,G,ee+1);if(!ne)throw new Error(`Unexpected end of ${G}`);w=ne.i,ie=ne.tagContent}const re=new b(j);j!==D&&Z&&(re[":@"]=this.buildAttributesMap(D,S,j)),ie&&(ie=this.parseTextData(ie,j,S,!0,Z,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),re.add(this.options.textNodeName,ie),this.addChild(i,re,S)}else{if(D.length>0&&D.lastIndexOf("/")===D.length-1){j[j.length-1]==="/"?(j=j.substr(0,j.length-1),S=S.substr(0,S.length-1),D=j):D=D.substr(0,D.length-1),this.options.transformTagName&&(j=this.options.transformTagName(j));const ie=new b(j);j!==D&&Z&&(ie[":@"]=this.buildAttributesMap(D,S,j)),this.addChild(i,ie,S),S=S.substr(0,S.lastIndexOf("."))}else{const ie=new b(j);this.tagsNodeStack.push(i),j!==D&&Z&&(ie[":@"]=this.buildAttributesMap(D,S,j)),this.addChild(i,ie,S),i=ie}a="",w=ee}}else a+=n[w];return t.child};function P(n,t,i){const a=this.options.updateTag(t.tagname,i,t[":@"]);a===!1||(typeof a=="string"&&(t.tagname=a),n.addChild(t))}const L=function(n){if(this.options.processEntities){for(let t in this.docTypeEntities){const i=this.docTypeEntities[t];n=n.replace(i.regx,i.val)}for(let t in this.lastEntities){const i=this.lastEntities[t];n=n.replace(i.regex,i.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const i=this.htmlEntities[t];n=n.replace(i.regex,i.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function K(n,t,i,a){return n&&(a===void 0&&(a=Object.keys(t.child).length===0),n=this.parseTextData(n,t.tagname,i,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,a),n!==void 0&&n!==""&&t.add(this.options.textNodeName,n),n=""),n}function $(n,t,i){const a="*."+i;for(const S in n){const w=n[S];if(a===w||t===w)return!0}return!1}function q(n,t,i=">"){let a,S="";for(let w=t;w<n.length;w++){let m=n[w];if(a)m===a&&(a="");else if(m==='"'||m==="'")a=m;else if(m===i[0])if(i[1]){if(n[w+1]===i[1])return{data:S,index:w}}else return{data:S,index:w};else m==="	"&&(m=" ");S+=m}}function C(n,t,i,a){const S=n.indexOf(t,i);if(S===-1)throw new Error(a);return S+t.length-1}function p(n,t,i,a=">"){const S=q(n,t+1,a);if(!S)return;let w=S.data;const m=S.index,F=w.search(/\s/);let j=w,G=!0;F!==-1&&(j=w.substring(0,F),w=w.substring(F+1).trimStart());const D=j;if(i){const Z=j.indexOf(":");Z!==-1&&(j=j.substr(Z+1),G=j!==S.data.substr(Z+1))}return{tagName:j,tagExp:w,closeIndex:m,attrExpPresent:G,rawTagName:D}}function O(n,t,i){const a=i;let S=1;for(;i<n.length;i++)if(n[i]==="<")if(n[i+1]==="/"){const w=C(n,">",i,`${t} is not closed`);if(n.substring(i+2,w).trim()===t&&(S--,S===0))return{tagContent:n.substring(a,i),i:w};i=w}else if(n[i+1]==="?")i=C(n,"?>",i+1,"StopNode is not closed.");else if(n.substr(i+1,3)==="!--")i=C(n,"-->",i+3,"StopNode is not closed.");else if(n.substr(i+1,2)==="![")i=C(n,"]]>",i,"StopNode is not closed.")-2;else{const w=p(n,i,">");w&&((w&&w.tagName)===t&&w.tagExp[w.tagExp.length-1]!=="/"&&S++,i=w.closeIndex)}}function s(n,t,i){if(t&&typeof n=="string"){const a=n.trim();return a==="true"?!0:a==="false"?!1:U(n,i)}else return v.isExist(n)?n:""}g.exports=o},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(g,N,f){const{buildOptions:v}=f("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),b=f("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:B}=f("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),U=f("./node_modules/fast-xml-parser/src/validator.js");class E{constructor(c){this.externalEntities={},this.options=v(c)}parse(c,l){if(typeof c!="string")if(c.toString)c=c.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(l){l===!0&&(l={});const x=U.validate(c,l);if(x!==!0)throw Error(`${x.err.msg}:${x.err.line}:${x.err.col}`)}const _=new b(this.options);_.addExternalEntities(this.externalEntities);const h=_.parseXml(c);return this.options.preserveOrder||h===void 0?h:B(h,this.options)}addEntity(c,l){if(l.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(c.indexOf("&")!==-1||c.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(l==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[c]=l}}g.exports=E},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(g,N,f){function v(o,c){return b(o,c)}function b(o,c,l){let _;const h={};for(let x=0;x<o.length;x++){const A=o[x],P=B(A);let L="";if(l===void 0?L=P:L=l+"."+P,P===c.textNodeName)_===void 0?_=A[P]:_+=""+A[P];else{if(P===void 0)continue;if(A[P]){let K=b(A[P],c,L);const $=E(K,c);A[":@"]?U(K,A[":@"],L,c):Object.keys(K).length===1&&K[c.textNodeName]!==void 0&&!c.alwaysCreateTextNode?K=K[c.textNodeName]:Object.keys(K).length===0&&(c.alwaysCreateTextNode?K[c.textNodeName]="":K=""),h[P]!==void 0&&h.hasOwnProperty(P)?(Array.isArray(h[P])||(h[P]=[h[P]]),h[P].push(K)):c.isArray(P,L,$)?h[P]=[K]:h[P]=K}}}return typeof _=="string"?_.length>0&&(h[c.textNodeName]=_):_!==void 0&&(h[c.textNodeName]=_),h}function B(o){const c=Object.keys(o);for(let l=0;l<c.length;l++){const _=c[l];if(_!==":@")return _}}function U(o,c,l,_){if(c){const h=Object.keys(c),x=h.length;for(let A=0;A<x;A++){const P=h[A];_.isArray(P,l+"."+P,!0,!0)?o[P]=[c[P]]:o[P]=c[P]}}}function E(o,c){const{textNodeName:l}=c,_=Object.keys(o).length;return!!(_===0||_===1&&(o[l]||typeof o[l]=="boolean"||o[l]===0))}N.prettify=v},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(g,N,f){class v{constructor(B){this.tagname=B,this.child=[],this[":@"]={}}add(B,U){B==="__proto__"&&(B="#__proto__"),this.child.push({[B]:U})}addChild(B){B.tagname==="__proto__"&&(B.tagname="#__proto__"),B[":@"]&&Object.keys(B[":@"]).length>0?this.child.push({[B.tagname]:B.child,":@":B[":@"]}):this.child.push({[B.tagname]:B.child})}}g.exports=v},"./node_modules/process/browser.js":function(g,N){var f=g.exports={},v,b;function B(){throw new Error("setTimeout has not been defined")}function U(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?v=setTimeout:v=B}catch{v=B}try{typeof clearTimeout=="function"?b=clearTimeout:b=U}catch{b=U}})();function E(K){if(v===setTimeout)return setTimeout(K,0);if((v===B||!v)&&setTimeout)return v=setTimeout,setTimeout(K,0);try{return v(K,0)}catch{try{return v.call(null,K,0)}catch{return v.call(this,K,0)}}}function o(K){if(b===clearTimeout)return clearTimeout(K);if((b===U||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(K);try{return b(K)}catch{try{return b.call(null,K)}catch{return b.call(this,K)}}}var c=[],l=!1,_,h=-1;function x(){!l||!_||(l=!1,_.length?c=_.concat(c):h=-1,c.length&&A())}function A(){if(!l){var K=E(x);l=!0;for(var $=c.length;$;){for(_=c,c=[];++h<$;)_&&_[h].run();h=-1,$=c.length}_=null,l=!1,o(K)}}f.nextTick=function(K){var $=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)$[q-1]=arguments[q];c.push(new P(K,$)),c.length===1&&!l&&E(A)};function P(K,$){this.fun=K,this.array=$}P.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function L(){}f.on=L,f.addListener=L,f.once=L,f.off=L,f.removeListener=L,f.removeAllListeners=L,f.emit=L,f.prependListener=L,f.prependOnceListener=L,f.listeners=function(K){return[]},f.binding=function(K){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(K){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(g,N){const f=/^[-+]?0x[a-fA-F0-9]+$/,v=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,b={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function B(o,c={}){if(c=Object.assign({},b,c),!o||typeof o!="string")return o;let l=o.trim();if(c.skipLike!==void 0&&c.skipLike.test(l))return o;if(o==="0")return 0;if(c.hex&&f.test(l))return E(l,16);if(l.search(/[eE]/)!==-1){const _=l.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(_){if(c.leadingZeros)l=(_[1]||"")+_[3];else if(!(_[2]==="0"&&_[3][0]==="."))return o;return c.eNotation?Number(l):o}else return o}else{const _=v.exec(l);if(_){const h=_[1],x=_[2];let A=U(_[3]);if(!c.leadingZeros&&x.length>0&&h&&l[2]!==".")return o;if(!c.leadingZeros&&x.length>0&&!h&&l[1]!==".")return o;if(c.leadingZeros&&x===o)return 0;{const P=Number(l),L=""+P;return L.search(/[eE]/)!==-1?c.eNotation?P:o:l.indexOf(".")!==-1?L==="0"&&A===""||L===A||h&&L==="-"+A?P:o:x?A===L||h+A===L?P:o:l===L||l===h+L?P:o}}else return o}}function U(o){return o&&o.indexOf(".")!==-1&&(o=o.replace(/0+$/,""),o==="."?o="0":o[0]==="."?o="0"+o:o[o.length-1]==="."&&(o=o.substr(0,o.length-1))),o}function E(o,c){if(parseInt)return parseInt(o,c);if(Number.parseInt)return Number.parseInt(o,c);if(window&&window.parseInt)return window.parseInt(o,c);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}g.exports=B},"./node_modules/webpack/buildin/amd-options.js":function(g,N){(function(f){g.exports=f}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(g,N){g.exports=function(f){return f.webpackPolyfill||(f.deprecate=function(){},f.paths=[],f.children||(f.children=[]),Object.defineProperty(f,"loaded",{enumerable:!0,get:function(){return f.l}}),Object.defineProperty(f,"id",{enumerable:!0,get:function(){return f.i}}),f.webpackPolyfill=1),f}},"./package.json":function(g){g.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.10.1","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage","postinstall":"node scripts/patch-check.js"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"29.7.0","jest-environment-jsdom":"29.7.0","patch-package":"^8.0.0","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/typeof.js"),b=f("./src/session.js"),B=f("./src/async.js"),U=f("./src/event.js").EventProxy,E=f("./src/util.js"),o=f("./src/tracker.js");function c(s,n){var t=this,i=new U,a=s.TaskId,S=s.Bucket,w=s.Region,m=s.Key,F=s.Body,j=s.ChunkSize||s.SliceSize||t.options.ChunkSize,G=s.AsyncLimit,D=s.StorageClass,Z=s.ServerSideEncryption,ee,he,ie=s.onHashProgress,re=s.tracker;re&&re.setParams({chunkSize:j}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传开始")}),i.on("error",function(ne){if(t._isRunningTask(a))return s.UploadData.UploadId&&b.removeUsing(s.UploadData.UploadId),ne.UploadId=s.UploadData.UploadId||"",t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传失败: ").concat(JSON.stringify(ne))}),n(ne)}),i.on("upload_complete",function(ne){var J=E.extend({UploadId:s.UploadData.UploadId||""},ne);n(null,J)}),i.on("upload_slice_complete",function(ne){var J={};E.each(s.Headers,function(oe,le){var ue=le.toLowerCase();(ue.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(ue))&&(J[le]=oe)}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始完成分块请求")}),P.call(t,{Bucket:S,Region:w,Key:m,UploadId:ne.UploadId,SliceList:ne.SliceList,Headers:J,tracker:re},function(oe,le){if(t._isRunningTask(a)){if(b.removeUsing(ne.UploadId),oe)return he(null,!0),t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 完成分块请求失败")}),i.emit("error",oe);b.removeUploadId.call(t,ne.UploadId),he({loaded:ee,total:ee},!0),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 完成分块请求成功")}),i.emit("upload_complete",le)}})}),i.on("get_upload_data_finish",function(ne){var J=b.getFileId(F,s.ChunkSize,S,m);J&&b.saveUploadId.call(t,J,ne.UploadId,t.options.UploadIdCacheLimit),b.setUsing(ne.UploadId),he(null,!0),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始上传各个分块")}),x.call(t,{TaskId:a,Bucket:S,Region:w,Key:m,Body:F,FileSize:ee,SliceSize:j,AsyncLimit:G,ServerSideEncryption:Z,UploadData:ne,Headers:s.Headers,onProgress:he,tracker:re},function(oe,le){if(t._isRunningTask(a)){if(oe)return he(null,!0),t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块上传失败")}),i.emit("error",oe);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 所有分块上传完成")}),i.emit("upload_slice_complete",le)}})}),i.on("get_file_size_finish",function(){if(he=E.throttleOnProgress.call(t,ee,s.onProgress),s.UploadData.UploadId)t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 已经获取到 uploadId, ").concat(s.UploadData.UploadId)}),i.emit("get_upload_data_finish",s.UploadData);else{var ne=E.extend({TaskId:a,Bucket:S,Region:w,Key:m,Headers:s.Headers,StorageClass:D,Body:F,FileSize:ee,SliceSize:j,onHashProgress:ie,tracker:re},s);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 去获取 uploadId")}),l.call(t,ne,function(J,oe){if(t._isRunningTask(a)){if(J)return i.emit("error",J);s.UploadData.UploadId=oe.UploadId,s.UploadData.PartList=oe.PartList,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 获取到 uploadId, ").concat(s.UploadData.UploadId)}),i.emit("get_upload_data_finish",s.UploadData)}})}}),ee=s.ContentLength,delete s.ContentLength,!s.Headers&&(s.Headers={}),E.each(s.Headers,function(ne,J){J.toLowerCase()==="content-length"&&delete s.Headers[J]}),function(){for(var ne=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],J=1024*1024,oe=0;oe<ne.length&&(J=ne[oe]*1024*1024,!(ee/J<=t.options.MaxPartNumber));oe++);s.ChunkSize=s.SliceSize=j=Math.max(j,J)}(),ee===0?(s.Body="",s.ContentLength=0,s.SkipTask=!0,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 文件大小为 0，执行简单上传")}),t.putObject(s,n)):i.emit("get_file_size_finish")}function l(s,n){var t=s.TaskId,i=s.Bucket,a=s.Region,S=s.Key,w=s.StorageClass,m=this,F={},j=s.FileSize,G=s.SliceSize,D=Math.ceil(j/G),Z=0,ee=E.throttleOnProgress.call(m,j,s.onHashProgress),he=function(J,oe){var le=G*(J-1),ue=Math.min(le+G,j),ce=ue-le;F[J]?oe(null,{PartNumber:J,ETag:F[J],Size:ce}):E.fileSlice(s.Body,le,ue,!1,function(ae){E.getFileMd5(ae,function(pe,ye){if(pe)return oe(E.error(pe));var Se='"'+ye+'"';F[J]=Se,Z+=ce,ee({loaded:Z,total:j}),oe(null,{PartNumber:J,ETag:Se,Size:ce})})})},ie=function(J,oe){var le=J.length;if(le===0)return oe(null,!0);if(le>D)return oe(null,!1);if(le>1){var ue=Math.max(J[0].Size,J[1].Size);if(ue!==G)return oe(null,!1)}var ce=function(pe){if(pe<le){var ye=J[pe];he(ye.PartNumber,function(Se,Ae){Ae&&Ae.ETag===ye.ETag&&Ae.Size===ye.Size?ce(pe+1):oe(null,!1)})}else oe(null,!0)};ce(0)},re=new U;re.on("error",function(ne){if(m._isRunningTask(t))return n(ne)}),re.on("upload_id_available",function(ne){var J={},oe=[];E.each(ne.PartList,function(ce){J[ce.PartNumber]=ce});for(var le=1;le<=D;le++){var ue=J[le];ue?(ue.PartNumber=le,ue.Uploaded=!0):ue={PartNumber:le,ETag:null,Uploaded:!1},oe.push(ue)}ne.PartList=oe,n(null,ne)}),re.on("no_available_upload_id",function(){if(m._isRunningTask(t)){var ne=E.extend({Bucket:i,Region:a,Key:S,Query:E.clone(s.Query),StorageClass:w,Body:s.Body,calledBySdk:"sliceUploadFile",tracker:s.tracker},s),J=E.clone(s.Headers);delete J["x-cos-mime-limit"],ne.Headers=J,m.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 准备初始化分块上传")}),m.multipartInit(ne,function(oe,le){if(m._isRunningTask(t)){if(oe)return m.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 初始化分块上传失败, ").concat(JSON.stringify(oe))}),re.emit("error",oe);var ue=le.UploadId;if(!ue)return n(E.error(new Error("no such upload id")));m.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 初始化分块上传成功")}),re.emit("upload_id_available",{UploadId:ue,PartList:[]})}})}}),re.on("has_and_check_upload_id",function(ne){ne=ne.reverse(),B.eachLimit(ne,1,function(J,oe){if(m._isRunningTask(t)){if(b.using[J]){oe();return}h.call(m,{Bucket:i,Region:a,Key:S,UploadId:J,tracker:s.tracker},function(le,ue){if(m._isRunningTask(t)){if(le)return b.removeUsing(J),re.emit("error",le);var ce=ue.PartList;ce.forEach(function(ae){ae.PartNumber*=1,ae.Size*=1,ae.ETag=ae.ETag||""}),ie(ce,function(ae,pe){if(m._isRunningTask(t)){if(ae)return re.emit("error",ae);pe?oe({UploadId:J,PartList:ce}):oe()}})}})}},function(J){m._isRunningTask(t)&&(ee(null,!0),J&&J.UploadId?re.emit("upload_id_available",J):re.emit("no_available_upload_id"))})}),re.on("seek_local_avail_upload_id",function(ne){var J=b.getFileId(s.Body,s.ChunkSize,i,S),oe=b.getUploadIdList.call(m,J);if(!J||!oe){re.emit("has_and_check_upload_id",ne);return}var le=function(ce){if(ce>=oe.length){re.emit("has_and_check_upload_id",ne);return}var ae=oe[ce];if(!E.isInArray(ne,ae)){b.removeUploadId.call(m,ae),le(ce+1);return}if(b.using[ae]){le(ce+1);return}h.call(m,{Bucket:i,Region:a,Key:S,UploadId:ae,tracker:s.tracker},function(pe,ye){m._isRunningTask(t)&&(pe?(b.removeUploadId.call(m,ae),le(ce+1)):re.emit("upload_id_available",{UploadId:ae,PartList:ye.PartList}))})};le(0)}),re.on("get_remote_upload_id_list",function(){_.call(m,{Bucket:i,Region:a,Key:S,tracker:s.tracker},function(ne,J){if(m._isRunningTask(t)){if(ne)return re.emit("error",ne);var oe=E.filter(J.UploadList,function(ce){return ce.Key===S&&(!w||ce.StorageClass.toUpperCase()===w.toUpperCase())}).reverse().map(function(ce){return ce.UploadId||ce.UploadID});if(oe.length)re.emit("seek_local_avail_upload_id",oe);else{var le=b.getFileId(s.Body,s.ChunkSize,i,S),ue;le&&(ue=b.getUploadIdList.call(m,le))&&E.each(ue,function(ce){b.removeUploadId.call(m,ce)}),re.emit("no_available_upload_id")}}})}),re.emit("get_remote_upload_id_list")}function _(s,n){var t=this,i=[],a={Bucket:s.Bucket,Region:s.Region,Prefix:s.Key,calledBySdk:s.calledBySdk||"sliceUploadFile",tracker:s.tracker},S=function(){t.multipartList(a,function(m,F){if(m)return n(m);i.push.apply(i,F.Upload||[]),F.IsTruncated==="true"?(a.KeyMarker=F.NextKeyMarker,a.UploadIdMarker=F.NextUploadIdMarker,S()):n(null,{UploadList:i})})};S()}function h(s,n){var t=this,i=[],a={Bucket:s.Bucket,Region:s.Region,Key:s.Key,UploadId:s.UploadId,calledBySdk:"sliceUploadFile",tracker:s.tracker},S=function(){t.multipartListPart(a,function(m,F){if(m)return n(m);i.push.apply(i,F.Part||[]),F.IsTruncated==="true"?(a.PartNumberMarker=F.NextPartNumberMarker,S()):n(null,{PartList:i})})};S()}function x(s,n){var t=this,i=s.TaskId,a=s.Bucket,S=s.Region,w=s.Key,m=s.UploadData,F=s.FileSize,j=s.SliceSize,G=Math.min(s.AsyncLimit||t.options.ChunkParallelLimit||1,256),D=s.Body,Z=Math.ceil(F/j),ee=0,he=s.ServerSideEncryption,ie=s.Headers,re=E.filter(m.PartList,function(J){return J.Uploaded&&(ee+=J.PartNumber>=Z&&F%j||j),!J.Uploaded}),ne=s.onProgress;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 开始并发上传各个分块")}),B.eachLimit(re,G,function(J,oe){if(t._isRunningTask(i)){var le=J.PartNumber,ue=Math.min(F,J.PartNumber*j)-(J.PartNumber-1)*j,ce=0;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"开始上传")}),A.call(t,{TaskId:i,Bucket:a,Region:S,Key:w,SliceSize:j,FileSize:F,PartNumber:le,ServerSideEncryption:he,Body:D,UploadData:m,Headers:ie,onProgress:function(pe){ee+=pe.loaded-ce,ce=pe.loaded,ne({loaded:ee,total:F})},tracker:s.tracker},function(ae,pe){t._isRunningTask(i)&&(!ae&&!pe.ETag&&(ae='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )',t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传请求成功，但是未获取到 eTag")})),ae?(ee-=ce,t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传失败")})):(ee+=ue-ce,J.ETag=pe.ETag),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(s.Key,"] 分块").concat(le,"上传成功")}),ne({loaded:ee,total:F}),oe(ae||null,pe))})}},function(J){if(t._isRunningTask(i)){if(J)return n(J);n(null,{UploadId:m.UploadId,SliceList:m.PartList})}})}function A(s,n){var t=this,i=s.TaskId,a=s.Bucket,S=s.Region,w=s.Key,m=s.FileSize,F=s.Body,j=s.PartNumber*1,G=s.SliceSize,D=s.ServerSideEncryption,Z=s.UploadData,ee=s.Headers||{},he=t.options.ChunkRetryTimes+1,ie=G*(j-1),re=G,ne=ie+G;ne>m&&(ne=m,re=ne-ie);var J=["x-cos-traffic-limit","x-cos-mime-limit"],oe={};E.each(ee,function(ue,ce){J.indexOf(ce)>-1&&(oe[ce]=ue)});var le=Z.PartList[j-1];B.retry(he,function(ue){t._isRunningTask(i)&&E.fileSlice(F,ie,ne,!0,function(ce){t.multipartUpload({TaskId:i,Bucket:a,Region:S,Key:w,ContentLength:re,PartNumber:j,UploadId:Z.UploadId,ServerSideEncryption:D,Body:ce,Headers:oe,onProgress:s.onProgress,calledBySdk:"sliceUploadFile",tracker:s.tracker},function(ae,pe){if(t._isRunningTask(i))return ae?ue(ae):(le.Uploaded=!0,ue(null,pe))})})},function(ue,ce){if(t._isRunningTask(i))return n(ue,ce)})}function P(s,n){var t=s.Bucket,i=s.Region,a=s.Key,S=s.UploadId,w=s.SliceList,m=this,F=this.options.ChunkRetryTimes+1,j=s.Headers,G=w.map(function(D){return{PartNumber:D.PartNumber,ETag:D.ETag}});B.retry(F,function(D){m.multipartComplete({Bucket:t,Region:i,Key:a,UploadId:S,Parts:G,Headers:j,calledBySdk:"sliceUploadFile",tracker:s.tracker},D)},function(D,Z){n(D,Z)})}function L(s,n){var t=s.Bucket,i=s.Region,a=s.Key,S=s.UploadId,w=s.Level||"task",m=s.AsyncLimit,F=this,j=new U;if(j.on("error",function(G){return n(G)}),j.on("get_abort_array",function(G){K.call(F,{Bucket:t,Region:i,Key:a,Headers:s.Headers,AsyncLimit:m,AbortArray:G},n)}),w==="bucket")_.call(F,{Bucket:t,Region:i,calledBySdk:"abortUploadTask"},function(G,D){if(G)return n(G);j.emit("get_abort_array",D.UploadList||[])});else if(w==="file"){if(!a)return n(E.error(new Error("abort_upload_task_no_key")));_.call(F,{Bucket:t,Region:i,Key:a,calledBySdk:"abortUploadTask"},function(G,D){if(G)return n(G);j.emit("get_abort_array",D.UploadList||[])})}else if(w==="task"){if(!S)return n(E.error(new Error("abort_upload_task_no_id")));if(!a)return n(E.error(new Error("abort_upload_task_no_key")));j.emit("get_abort_array",[{Key:a,UploadId:S}])}else return n(E.error(new Error("abort_unknown_level")))}function K(s,n){var t=s.Bucket,i=s.Region,a=s.Key,S=s.AbortArray,w=s.AsyncLimit||1,m=this,F=0,j=new Array(S.length);B.eachLimit(S,w,function(G,D){var Z=F;if(a&&a!==G.Key){j[Z]={error:{KeyNotMatch:!0}},D(null);return}var ee=G.UploadId||G.UploadID;m.multipartAbort({Bucket:t,Region:i,Key:G.Key,Headers:s.Headers,UploadId:ee},function(he){var ie={Bucket:t,Region:i,Key:G.Key,UploadId:ee};j[Z]={error:he,task:ie},D(null)}),F++},function(G){if(G)return n(G);for(var D=[],Z=[],ee=0,he=j.length;ee<he;ee++){var ie=j[ee];ie.task&&(ie.error?Z.push(ie.task):D.push(ie.task))}return n(null,{successList:D,errorList:Z})})}function $(s,n){var t=this,i=s.SliceSize===void 0?t.options.SliceSize:s.SliceSize,a=[],S=s.Body,w=S.size||S.length||0,m={TaskId:""};if(t.options.EnableReporter){var F=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),j=w>i?"sliceUploadFile":"putObject";s.tracker=new o({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:s.Bucket,region:s.Region,apiName:"uploadFile",realApi:j,fileKey:s.Key,fileSize:w,accelerate:F,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}E.each(s,function(ie,re){v(ie)!=="object"&&typeof ie!="function"&&(m[re]=ie)});var G=s.onTaskReady,D=function(re){m.TaskId=re,G&&G(re)};s.onTaskReady=D;var Z=w>i?"sliceUploadFile":"putObject",ee=s.onFileFinish,he=function(re,ne){s.tracker&&s.tracker.report(re,ne),ee&&ee(re,ne,m),n&&n(re,ne)};a.push({api:Z,params:s,callback:he}),t._addTasks(a)}function q(s,n){var t=this,i=s.SliceSize===void 0?t.options.SliceSize:s.SliceSize,a=0,S=0,w=E.throttleOnProgress.call(t,S,s.onProgress),m=s.files.length,F=s.onFileFinish,j=Array(m),G=function(ee,he,ie){w(null,!0),F&&F(ee,he,ie),j[ie.Index]={options:ie,error:ee,data:he},--m<=0&&n&&n(null,{files:j})},D=[];E.each(s.files,function(Z,ee){(function(){var he=Z.Body,ie=he.size||he.length||0,re={Index:ee,TaskId:""};if(!t.options.UseRawKey&&Z.Key&&Z.Key.substr(0,1)==="/"&&(Z.Key=Z.Key.substr(1)),a+=ie,t.options.EnableReporter){var ne=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),J=ie>i?"sliceUploadFile":"putObject";Z.tracker=new o({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:Z.Bucket,region:Z.Region,apiName:"uploadFiles",realApi:J,fileKey:Z.Key,fileSize:ie,accelerate:ne,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}E.each(Z,function(Ae,be){v(Ae)!=="object"&&typeof Ae!="function"&&(re[be]=Ae)});var oe=Z.onTaskReady,le=function(be){re.TaskId=be,oe&&oe(be)};Z.onTaskReady=le;var ue=0,ce=Z.onProgress,ae=function(be){S=S-ue+be.loaded,ue=be.loaded,ce&&ce(be),w({loaded:S,total:a})};Z.onProgress=ae;var pe=ie>i?"sliceUploadFile":"putObject",ye=Z.onFileFinish,Se=function(be,Ue){Z.tracker&&Z.tracker.report(be,Ue),ye&&ye(be,Ue),G&&G(be,Ue,re)};D.push({api:pe,params:Z,callback:Se})})()}),t._addTasks(D)}function C(s,n){var t=new U,i=this,a=s.Bucket,S=s.Region,w=s.Key,m=s.CopySource,F=E.getSourceParams.call(this,m);if(!F){n(E.error(new Error("CopySource format error")));return}var j=F.Bucket,G=F.Region,D=decodeURIComponent(F.Key),Z=s.CopySliceSize===void 0?i.options.CopySliceSize:s.CopySliceSize;Z=Math.max(0,Z);var ee=s.CopyChunkSize||this.options.CopyChunkSize,he=this.options.CopyChunkParallelLimit,ie=this.options.ChunkRetryTimes+1,re=0,ne=0,J,oe,le={},ue={},ce={};t.on("copy_slice_complete",function(ae){E.each(s.Headers,function(ye,Se){Se.toLowerCase().indexOf("x-cos-meta-")});var pe=E.map(ae.PartList,function(ye){return{PartNumber:ye.PartNumber,ETag:ye.ETag}});B.retry(ie,function(ye){i.multipartComplete({Bucket:a,Region:S,Key:w,UploadId:ae.UploadId,Parts:pe,tracker:s.tracker,calledBySdk:"sliceCopyFile"},ye)},function(ye,Se){if(b.removeUsing(ae.UploadId),ye)return oe(null,!0),n(ye);b.removeUploadId(ae.UploadId),oe({loaded:J,total:J},!0),n(null,Se)})}),t.on("get_copy_data_finish",function(ae){var pe=b.getCopyFileId(m,le,ee,a,w);pe&&b.saveUploadId(pe,ae.UploadId,i.options.UploadIdCacheLimit),b.setUsing(ae.UploadId);var ye=E.filter(ae.PartList,function(Se){return Se.Uploaded&&(ne+=Se.PartNumber>=re&&J%ee||ee),!Se.Uploaded});B.eachLimit(ye,he,function(Se,Ae){var be=Se.PartNumber,Ue=Se.CopySourceRange,Je=Se.end-Se.start;B.retry(ie,function($e){p.call(i,{Bucket:a,Region:S,Key:w,CopySource:m,UploadId:ae.UploadId,PartNumber:be,CopySourceRange:Ue,tracker:s.tracker,calledBySdk:"sliceCopyFile"},$e)},function($e,Xe){if($e)return Ae($e);ne+=Je,oe({loaded:ne,total:J}),Se.ETag=Xe.ETag,Ae($e||null,Xe)})},function(Se){if(Se)return b.removeUsing(ae.UploadId),oe(null,!0),n(Se);t.emit("copy_slice_complete",ae)})}),t.on("get_chunk_size_finish",function(){var ae=function(){i.multipartInit({Bucket:a,Region:S,Key:w,Headers:ce,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(be,Ue){if(be)return n(be);s.UploadId=Ue.UploadId,t.emit("get_copy_data_finish",{UploadId:s.UploadId,PartList:s.PartList})})},pe=b.getCopyFileId(m,le,ee,a,w),ye=b.getUploadIdList(pe);if(!pe||!ye)return ae();var Se=function(be){if(be>=ye.length)return ae();var Ue=ye[be];if(b.using[Ue])return Se(be+1);h.call(i,{Bucket:a,Region:S,Key:w,UploadId:Ue,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(Je,$e){if(Je)b.removeUploadId(Ue),Se(be+1);else{if(b.using[Ue])return Se(be+1);var Xe={},st=0;E.each($e.PartList,function(De){var et=parseInt(De.Size),pt=st+et-1;Xe[De.PartNumber+"|"+st+"|"+pt]=De.ETag,st+=et}),E.each(s.PartList,function(De){var et=Xe[De.PartNumber+"|"+De.start+"|"+De.end];et&&(De.ETag=et,De.Uploaded=!0)}),t.emit("get_copy_data_finish",{UploadId:Ue,PartList:s.PartList})}})};Se(0)}),t.on("get_file_size_finish",function(){if(function(){for(var pe=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ye=1024*1024,Se=0;Se<pe.length&&(ye=pe[Se]*1024*1024,!(J/ye<=i.options.MaxPartNumber));Se++);s.ChunkSize=ee=Math.max(ee,ye),re=Math.ceil(J/ee);for(var Ae=[],be=1;be<=re;be++){var Ue=(be-1)*ee,Je=be*ee<J?be*ee-1:J-1,$e={PartNumber:be,start:Ue,end:Je,CopySourceRange:"bytes="+Ue+"-"+Je};Ae.push($e)}s.PartList=Ae}(),s.Headers["x-cos-metadata-directive"]==="Replaced"?ce=s.Headers:ce=ue,ce["x-cos-storage-class"]=s.Headers["x-cos-storage-class"]||ue["x-cos-storage-class"],ce=E.clearKey(ce),ue["x-cos-storage-class"]==="ARCHIVE"||ue["x-cos-storage-class"]==="DEEP_ARCHIVE"){var ae=ue["x-cos-restore"];if(!ae||ae==='ongoing-request="true"'){n(E.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete ce["x-cos-copy-source"],delete ce["x-cos-metadata-directive"],delete ce["x-cos-copy-source-If-Modified-Since"],delete ce["x-cos-copy-source-If-Unmodified-Since"],delete ce["x-cos-copy-source-If-Match"],delete ce["x-cos-copy-source-If-None-Match"],t.emit("get_chunk_size_finish")}),i.headObject({Bucket:j,Region:G,Key:D,tracker:s.tracker,calledBySdk:"sliceCopyFile"},function(ae,pe){if(ae){ae.statusCode&&ae.statusCode===404?n(E.error(ae,{ErrorStatus:D+" Not Exist"})):n(ae);return}if(J=s.FileSize=pe.headers["content-length"],J===void 0||!J){n(E.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(s.tracker&&s.tracker.setParams({httpSize:J}),oe=E.throttleOnProgress.call(i,J,s.onProgress),J<=Z)s.Headers["x-cos-metadata-directive"]||(s.Headers["x-cos-metadata-directive"]="Copy"),i.putObjectCopy(Object.assign(s,{calledBySdk:"sliceCopyFile"}),function(Se,Ae){if(Se)return oe(null,!0),n(Se);oe({loaded:J,total:J},!0),n(Se,Ae)});else{var ye=pe.headers;le=ye,ue={"Cache-Control":ye["cache-control"],"Content-Disposition":ye["content-disposition"],"Content-Encoding":ye["content-encoding"],"Content-Type":ye["content-type"],Expires:ye.expires,"x-cos-storage-class":ye["x-cos-storage-class"]},E.each(ye,function(Se,Ae){var be="x-cos-meta-";Ae.indexOf(be)===0&&Ae.length>be.length&&(ue[Ae]=Se)}),t.emit("get_file_size_finish")}})}function p(s,n){var t=s.TaskId,i=s.Bucket,a=s.Region,S=s.Key,w=s.CopySource,m=s.UploadId,F=s.PartNumber*1,j=s.CopySourceRange,G=this.options.ChunkRetryTimes+1,D=this;B.retry(G,function(Z){D.uploadPartCopy({TaskId:t,Bucket:i,Region:a,Key:S,CopySource:w,UploadId:m,PartNumber:F,CopySourceRange:j,tracker:s.tracker,calledBySdk:s.calledBySdk},function(ee,he){Z(ee||null,he)})},function(Z,ee){return n(Z,ee)})}var O={sliceUploadFile:c,abortUploadTask:L,uploadFile:$,uploadFiles:q,sliceCopyFile:C};g.exports.init=function(s,n){n.transferToTaskMethod(O,"sliceUploadFile"),E.each(O,function(t,i){s.prototype[i]=E.apiWrapper(i,t)})}},"./src/async.js":function(g,N){var f=function(U,E,o,c){if(c=c||function(){},!U.length||E<=0)return c();var l=0,_=0,h=0;(function x(){if(l>=U.length)return c();for(;h<E&&_<U.length;)_+=1,h+=1,o(U[_-1],function(A){A?(c(A),c=function(){}):(l+=1,h-=1,l>=U.length?c():x())})})()},v=function(U,E,o){var c=function(_){E(function(h,x){h&&_<U?c(_+1):o(h,x)})};U<1?o():c(1)},b={eachLimit:f,retry:v};g.exports=b},"./src/base.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/defineProperty.js"),b=f("./node_modules/@babel/runtime/helpers/typeof.js");function B(e,d){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);d&&(u=u.filter(function(R){return Object.getOwnPropertyDescriptor(e,R).enumerable})),r.push.apply(r,u)}return r}function U(e){for(var d=1;d<arguments.length;d++){var r=arguments[d]!=null?arguments[d]:{};d%2?B(Object(r),!0).forEach(function(u){v(e,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(r,u))})}return e}var E=f("./lib/request.js"),o=f("./src/util.js");function c(e,d){var r=this.options.Protocol||(o.isBrowser&&(typeof location>"u"?"undefined":b(location))==="object"&&location.protocol==="http:"?"http:":"https:"),u=this.options.ServiceDomain,R=e.AppId||this.options.appId,T=e.Region;u?(u=u.replace(/\{\{AppId\}\}/gi,R||"").replace(/\{\{Region\}\}/gi,T||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(u)||(u=r+"//"+u),u.slice(-1)==="/"&&(u=u.slice(0,-1))):T?u=r+"//cos."+T+".myqcloud.com":u=r+"//service.cos.myqcloud.com";var I="",H=T?"cos."+T+".myqcloud.com":"service.cos.myqcloud.com",W=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");H===W&&(I=H),se.call(this,{Action:"name/cos:GetService",url:u,method:"GET",headers:e.Headers,SignHost:I,tracker:e.tracker},function(ge,fe){if(ge)return d(ge);var me=fe&&fe.ListAllMyBucketsResult&&fe.ListAllMyBucketsResult.Buckets&&fe.ListAllMyBucketsResult.Buckets.Bucket||[];me=o.isArray(me)?me:[me];var X=fe&&fe.ListAllMyBucketsResult&&fe.ListAllMyBucketsResult.Owner||{};d(null,{Buckets:me,Owner:X,statusCode:fe.statusCode,headers:fe.headers})})}function l(e,d){var r=this,u="";if(e.BucketAZConfig){var R={BucketAZConfig:e.BucketAZConfig};u=o.json2xml({CreateBucketConfiguration:R})}se.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:u,tracker:e.tracker},function(T,I){if(T)return d(T);var H=We({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});d(null,{Location:H,statusCode:I.statusCode,headers:I.headers})})}function _(e,d){se.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},d)}function h(e,d){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r.marker=e.Marker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucket",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,tracker:e.tracker},function(u,R){if(u)return d(u);var T=R.ListBucketResult||{},I=T.Contents||[],H=T.CommonPrefixes||[];I=o.isArray(I)?I:[I],H=o.isArray(H)?H:[H];var W=o.clone(T);o.extend(W,{Contents:I,CommonPrefixes:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function x(e,d){se.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function A(e,d){var r=e.Headers,u="";if(e.AccessControlPolicy){var R=o.clone(e.AccessControlPolicy||{}),T=R.Grants||R.Grant;T=o.isArray(T)?T:[T],delete R.Grant,delete R.Grants,R.AccessControlList={Grant:T},u=o.json2xml({AccessControlPolicy:R}),r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(u))}o.each(r,function(I,H){H.indexOf("x-cos-grant-")===0&&(r[H]=Ze(r[H]))}),se.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:u,tracker:e.tracker},function(I,H){if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function P(e,d){se.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(r,u){if(r)return d(r);var R=u.AccessControlPolicy||{},T=R.Owner||{},I=R.AccessControlList.Grant||[];I=o.isArray(I)?I:[I];var H=xe(R);u.headers&&u.headers["x-cos-acl"]&&(H.ACL=u.headers["x-cos-acl"]),H=o.extend(H,{Owner:T,Grants:I,statusCode:u.statusCode,headers:u.headers}),d(null,H)})}function L(e,d){var r=e.CORSConfiguration||{},u=r.CORSRules||e.CORSRules||[];u=o.clone(o.isArray(u)?u:[u]),o.each(u,function(H){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(W){var ge=W+"s",fe=H[ge]||H[W]||[];delete H[ge],H[W]=o.isArray(fe)?fe:[fe]})});var R={CORSRule:u};e.ResponseVary&&(R.ResponseVary=e.ResponseVary);var T=o.json2xml({CORSConfiguration:R}),I=e.Headers;I["Content-Type"]="application/xml",I["Content-MD5"]=o.b64(o.md5(T)),se.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:T,action:"cors",headers:I,tracker:e.tracker},function(H,W){if(H)return d(H);d(null,{statusCode:W.statusCode,headers:W.headers})})}function K(e,d){se.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchCORSConfiguration"){var R={CORSRules:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=u.CORSConfiguration||{},I=T.CORSRules||T.CORSRule||[];I=o.clone(o.isArray(I)?I:[I]);var H=T.ResponseVary;o.each(I,function(W){o.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(ge){var fe=ge+"s",me=W[fe]||W[ge]||[];delete W[ge],W[fe]=o.isArray(me)?me:[me]})}),d(null,{CORSRules:I,ResponseVary:H,statusCode:u.statusCode,headers:u.headers})})}function $(e,d){se.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function q(e,d){se.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},d)}function C(e,d){var r=e.Policy;try{typeof r=="string"&&(r=JSON.parse(r))}catch{}if(!r||typeof r=="string")return d(o.error(new Error("Policy format error")));var u=JSON.stringify(r);r.version||(r.version="2.0");var R=e.Headers;R["Content-Type"]="application/json",R["Content-MD5"]=o.b64(o.md5(u)),se.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:u,headers:R,tracker:e.tracker},function(T,I){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:I.statusCode,headers:I.headers})})}function p(e,d){se.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(r,u){if(r)return r.statusCode&&r.statusCode===403?d(o.error(r,{ErrorStatus:"Access Denied"})):r.statusCode&&r.statusCode===405?d(o.error(r,{ErrorStatus:"Method Not Allowed"})):r.statusCode&&r.statusCode===404?d(o.error(r,{ErrorStatus:"Policy Not Found"})):d(r);var R={};try{R=JSON.parse(u.body)}catch{}d(null,{Policy:R,statusCode:u.statusCode,headers:u.headers})})}function O(e,d){se.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode||r.statusCode,headers:u.headers})})}function s(e,d){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=o.clone(o.isArray(u)?u:[u]);var R=o.json2xml({Tagging:{TagSet:{Tag:u}}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"tagging",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function n(e,d){se.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var R={Tags:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=u.Tagging.TagSet.Tag||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Tags:T,statusCode:u.statusCode,headers:u.headers})})}function t(e,d){se.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function i(e,d){var r=e.LifecycleConfiguration||{},u=r.Rules||e.Rules||[];u=o.clone(u);var R=o.json2xml({LifecycleConfiguration:{Rule:u}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"lifecycle",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function a(e,d){se.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&r.error.Code==="NoSuchLifecycleConfiguration"){var R={Rules:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=u.LifecycleConfiguration.Rule||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Rules:T,statusCode:u.statusCode,headers:u.headers})})}function S(e,d){se.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function w(e,d){if(!e.VersioningConfiguration){d(o.error(new Error("missing param VersioningConfiguration")));return}var r=e.VersioningConfiguration||{},u=o.json2xml({VersioningConfiguration:r}),R=e.Headers;R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(u)),se.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"versioning",headers:R,tracker:e.tracker},function(T,I){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:I.statusCode,headers:I.headers})})}function m(e,d){se.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(r,u){r||!u.VersioningConfiguration&&(u.VersioningConfiguration={}),d(r,u)})}function F(e,d){var r=o.clone(e.ReplicationConfiguration),u=o.json2xml({ReplicationConfiguration:r});u=u.replace(/<(\/?)Rules>/gi,"<$1Rule>"),u=u.replace(/<(\/?)Tags>/gi,"<$1Tag>");var R=e.Headers;R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(u)),se.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"replication",headers:R,tracker:e.tracker},function(T,I){if(T&&T.statusCode===204)return d(null,{statusCode:T.statusCode});if(T)return d(T);d(null,{statusCode:I.statusCode,headers:I.headers})})}function j(e,d){se.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="ReplicationConfigurationnotFoundError")){var R={ReplicationConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}!u.ReplicationConfiguration&&(u.ReplicationConfiguration={}),u.ReplicationConfiguration.Rule&&(u.ReplicationConfiguration.Rules=o.makeArray(u.ReplicationConfiguration.Rule),delete u.ReplicationConfiguration.Rule),d(r,u)})}function G(e,d){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function D(e,d){if(!e.WebsiteConfiguration){d(o.error(new Error("missing param WebsiteConfiguration")));return}var r=o.clone(e.WebsiteConfiguration||{}),u=r.RoutingRules||r.RoutingRule||[];u=o.isArray(u)?u:[u],delete r.RoutingRule,delete r.RoutingRules,u.length&&(r.RoutingRules={RoutingRule:u});var R=o.json2xml({WebsiteConfiguration:r}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"website",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function Z(e,d){se.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchWebsiteConfiguration"){var R={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=u.WebsiteConfiguration||{};if(T.RoutingRules){var I=o.clone(T.RoutingRules.RoutingRule||[]);I=o.makeArray(I),T.RoutingRules=I}d(null,{WebsiteConfiguration:T,statusCode:u.statusCode,headers:u.headers})})}function ee(e,d){se.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function he(e,d){if(!e.RefererConfiguration){d(o.error(new Error("missing param RefererConfiguration")));return}var r=o.clone(e.RefererConfiguration||{}),u=r.DomainList||{},R=u.Domains||u.Domain||[];R=o.isArray(R)?R:[R],R.length&&(r.DomainList={Domain:R});var T=o.json2xml({RefererConfiguration:r}),I=e.Headers;I["Content-Type"]="application/xml",I["Content-MD5"]=o.b64(o.md5(T)),se.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:T,action:"referer",headers:I,tracker:e.tracker},function(H,W){if(H&&H.statusCode===204)return d(null,{statusCode:H.statusCode});if(H)return d(H);d(null,{statusCode:W.statusCode,headers:W.headers})})}function ie(e,d){se.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error.Code==="NoSuchRefererConfiguration"){var R={WebsiteConfiguration:{},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=u.RefererConfiguration||{};if(T.DomainList){var I=o.makeArray(T.DomainList.Domain||[]);T.DomainList={Domains:I}}d(null,{RefererConfiguration:T,statusCode:u.statusCode,headers:u.headers})})}function re(e,d){var r=e.DomainConfiguration||{},u=r.DomainRule||e.DomainRule||[];u=o.clone(u);var R=o.json2xml({DomainConfiguration:{DomainRule:u}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"domain",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function ne(e,d){se.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r)return d(r);var R=[];try{R=u.DomainConfiguration.DomainRule||[]}catch{}R=o.clone(o.isArray(R)?R:[R]),d(null,{DomainRule:R,statusCode:u.statusCode,headers:u.headers})})}function J(e,d){se.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function oe(e,d){var r=e.OriginConfiguration||{},u=r.OriginRule||e.OriginRule||[];u=o.clone(u);var R=o.json2xml({OriginConfiguration:{OriginRule:u}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"origin",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function le(e,d){se.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r)return d(r);var R=[];try{R=u.OriginConfiguration.OriginRule||[]}catch{}R=o.clone(o.isArray(R)?R:[R]),d(null,{OriginRule:R,statusCode:u.statusCode,headers:u.headers})})}function ue(e,d){se.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function ce(e,d){var r=o.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=o.b64(o.md5(r)),se.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:u,tracker:e.tracker},function(R,T){if(R&&R.statusCode===204)return d(null,{statusCode:R.statusCode});if(R)return d(R);d(null,{statusCode:T.statusCode,headers:T.headers})})}function ae(e,d){se.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(r,u){if(r)return d(r);d(null,{BucketLoggingStatus:u.BucketLoggingStatus,statusCode:u.statusCode,headers:u.headers})})}function pe(e,d,r){var u=o.clone(d.InventoryConfiguration);if(u.OptionalFields){var R=u.OptionalFields||[];u.OptionalFields={Field:R}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var T=u.Destination.COSBucketDestination.Encryption;Object.keys(T).indexOf("SSECOS")>-1&&(T["SSE-COS"]=T.SSECOS,delete T.SSECOS)}var I=o.json2xml({InventoryConfiguration:u}),H=d.Headers;H["Content-Type"]="application/xml",H["Content-MD5"]=o.b64(o.md5(I));var W=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";se.call(this,{Action:W,method:e,Bucket:d.Bucket,Region:d.Region,body:I,action:"inventory",qs:{id:d.Id},headers:H,tracker:d.tracker},function(ge,fe){if(ge&&ge.statusCode===204)return r(null,{statusCode:ge.statusCode});if(ge)return r(ge);r(null,{statusCode:fe.statusCode,headers:fe.headers})})}function ye(e,d){return pe.call(this,"PUT",e,d)}function Se(e,d){return pe.call(this,"POST",e,d)}function Ae(e,d){se.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r)return d(r);var R=u.InventoryConfiguration;if(R&&R.OptionalFields&&R.OptionalFields.Field){var T=R.OptionalFields.Field;o.isArray(T)||(T=[T]),R.OptionalFields=T}if(R.Destination&&R.Destination.COSBucketDestination&&R.Destination.COSBucketDestination.Encryption){var I=R.Destination.COSBucketDestination.Encryption;Object.keys(I).indexOf("SSE-COS")>-1&&(I.SSECOS=I["SSE-COS"],delete I["SSE-COS"])}d(null,{InventoryConfiguration:R,statusCode:u.statusCode,headers:u.headers})})}function be(e,d){se.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(r,u){if(r)return d(r);var R=u.ListInventoryConfigurationResult,T=R.InventoryConfiguration||[];T=o.isArray(T)?T:[T],delete R.InventoryConfiguration,o.each(T,function(I){if(I&&I.OptionalFields&&I.OptionalFields.Field){var H=I.OptionalFields.Field;o.isArray(H)||(H=[H]),I.OptionalFields=H}if(I.Destination&&I.Destination.COSBucketDestination&&I.Destination.COSBucketDestination.Encryption){var W=I.Destination.COSBucketDestination.Encryption;Object.keys(W).indexOf("SSE-COS")>-1&&(W.SSECOS=W["SSE-COS"],delete W["SSE-COS"])}}),R.InventoryConfigurations=T,o.extend(R,{statusCode:u.statusCode,headers:u.headers}),d(null,R)})}function Ue(e,d){se.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function Je(e,d){if(!e.AccelerateConfiguration){d(o.error(new Error("missing param AccelerateConfiguration")));return}var r={AccelerateConfiguration:e.AccelerateConfiguration||{}},u=o.json2xml(r),R={};R["Content-Type"]="application/xml",R["Content-MD5"]=o.b64(o.md5(u)),se.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"accelerate",headers:R,tracker:e.tracker},function(T,I){if(T)return d(T);d(null,{statusCode:I.statusCode,headers:I.headers})})}function $e(e,d){se.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(r,u){r||!u.AccelerateConfiguration&&(u.AccelerateConfiguration={}),d(r,u)})}function Xe(e,d){var r=e.ServerSideEncryptionConfiguration||{},u=r.Rule||r.Rules||[],R=o.json2xml({ServerSideEncryptionConfiguration:{Rule:u}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:R,action:"encryption",headers:T,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function st(e,d){se.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.code==="NoSuchEncryptionConfiguration"){var R={EncryptionConfiguration:{Rules:[]},statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=o.makeArray(u.EncryptionConfiguration&&u.EncryptionConfiguration.Rule||[]);u.EncryptionConfiguration={Rules:T},d(r,u)})}function De(e,d){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function et(e,d){se.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(r,u){if(r){var R=r.statusCode;return e.Headers["If-Modified-Since"]&&R&&R===304?d(null,{NotModified:!0,statusCode:R}):d(r)}u.ETag=o.attr(u.headers,"etag",""),d(null,u)})}function pt(e,d){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r["key-marker"]=e.KeyMarker,r["version-id-marker"]=e.VersionIdMarker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions",tracker:e.tracker},function(u,R){if(u)return d(u);var T=R.ListVersionsResult||{},I=T.DeleteMarker||[];I=o.isArray(I)?I:[I];var H=T.Version||[];H=o.isArray(H)?H:[H];var W=o.clone(T);delete W.DeleteMarker,delete W.Version,o.extend(W,{DeleteMarkers:I,Versions:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function Ut(e,d){var r=this;if(r.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject开始")}),this.options.ObjectKeySimplifyCheck){var u=o.simplifyPath(e.Key);if(u==="/"){d(o.error(new Error("The Getobject Key is illegal")));return}}var R=e.Query||{},T=e.QueryString||"",I=o.throttleOnProgress.call(this,0,e.onProgress),H=e.tracker;H&&H.setParams({signStartTime:new Date().getTime()}),R["response-content-type"]=e.ResponseContentType,R["response-content-language"]=e.ResponseContentLanguage,R["response-expires"]=e.ResponseExpires,R["response-cache-control"]=e.ResponseCacheControl,R["response-content-disposition"]=e.ResponseContentDisposition,R["response-content-encoding"]=e.ResponseContentEncoding,se.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:R,qsStr:T,rawBody:!0,onDownloadProgress:I,tracker:H},function(W,ge){if(I(null,!0),W){var fe=W.statusCode;return e.Headers["If-Modified-Since"]&&fe&&fe===304?d(null,{NotModified:!0}):d(W)}d(null,{Body:ge.body,ETag:o.attr(ge.headers,"etag",""),statusCode:ge.statusCode,headers:ge.headers}),r.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject结束")})})}function Mt(e,d){var r=this,u=e.ContentLength,R=o.throttleOnProgress.call(r,u,e.onProgress);r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject开始")});var T=e.Headers;!T["Cache-Control"]&&!T["cache-control"]&&(T["Cache-Control"]=""),!T["Content-Type"]&&!T["content-type"]&&(T["Content-Type"]=e.Body&&e.Body.type||"");var I=e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,H=e.tracker;I&&H&&H.setParams({md5StartTime:new Date().getTime()}),I&&r.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] 开始计算 md5")}),o.getBodyMd5(I,e.Body,function(W){W&&(r.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] md5: ").concat(W,"，md5Base64=").concat(o.b64(W))}),H&&H.setParams({md5EndTime:new Date().getTime()}),r.options.UploadCheckContentMd5&&(T["Content-MD5"]=o.b64(W)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(T["x-cos-meta-md5"]=W)),e.ContentLength!==void 0&&(T["Content-Length"]=e.ContentLength),R(null,!0),se.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:R,tracker:H},function(ge,fe){if(ge)return r.logger.error({cate:"ERROR",tag:"upload",msg:"上传失败，错误信息：".concat(JSON.stringify(ge))}),R(null,!0),d(ge);R({loaded:u,total:u},!0);var me=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key});me=me.substr(me.indexOf("://")+3),fe.Location=me,fe.ETag=o.attr(fe.headers,"etag",""),r.logger.info({cate:"RESULT",tag:"upload",msg:"上传成功，Location=".concat(me)}),r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject结束")}),d(null,fe)})},e.onHashProgress)}function jt(e,d){se.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(r,u){if(r){var R=r.statusCode;return R&&R===404?d(null,{BucketNotFound:!0,statusCode:R}):d(r)}d(null,{statusCode:u.statusCode,headers:u.headers})})}function Lt(e,d){var r={};e.VersionId&&(r.versionId=e.VersionId),se.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,action:"acl",tracker:e.tracker},function(u,R){if(u)return d(u);var T=R.AccessControlPolicy||{},I=T.Owner||{},H=T.AccessControlList&&T.AccessControlList.Grant||[];H=o.isArray(H)?H:[H];var W=xe(T);delete W.GrantWrite,R.headers&&R.headers["x-cos-acl"]&&(W.ACL=R.headers["x-cos-acl"]),W=o.extend(W,{Owner:I,Grants:H,statusCode:R.statusCode,headers:R.headers}),d(null,W)})}function Ft(e,d){var r=e.Headers,u="";if(e.AccessControlPolicy){var R=o.clone(e.AccessControlPolicy||{}),T=R.Grants||R.Grant;T=o.isArray(T)?T:[T],delete R.Grant,delete R.Grants,R.AccessControlList={Grant:T},u=o.json2xml({AccessControlPolicy:R}),r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(u))}o.each(r,function(I,H){H.indexOf("x-cos-grant-")===0&&(r[H]=Ze(r[H]))}),se.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:u,tracker:e.tracker},function(I,H){if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function Ht(e,d){var r=e.Headers;r.Origin=e.Origin,r["Access-Control-Request-Method"]=e.AccessControlRequestMethod,r["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,se.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,tracker:e.tracker},function(u,R){if(u)return u.statusCode&&u.statusCode===403?d(null,{OptionsForbidden:!0,statusCode:u.statusCode}):d(u);var T=R.headers||{};d(null,{AccessControlAllowOrigin:T["access-control-allow-origin"],AccessControlAllowMethods:T["access-control-allow-methods"],AccessControlAllowHeaders:T["access-control-allow-headers"],AccessControlExposeHeaders:T["access-control-expose-headers"],AccessControlMaxAge:T["access-control-max-age"],statusCode:R.statusCode,headers:R.headers})})}function Kt(e,d){var r=this,u=e.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]="");var R=e.CopySource||"",T=o.getSourceParams.call(this,R);if(!T){d(o.error(new Error("CopySource format error")));return}var I=T.Bucket,H=T.Region,W=decodeURIComponent(T.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:I,region:H,prefix:W},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(ge,fe){if(ge)return d(ge);var me=o.clone(fe.CopyObjectResult||{}),X=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});o.extend(me,{Location:X,statusCode:fe.statusCode,headers:fe.headers}),d(null,me)})}function Ke(e,d){var r=e.CopySource||"",u=o.getSourceParams.call(this,r);if(!u){d(o.error(new Error("CopySource format error")));return}var R=u.Bucket,T=u.Region,I=decodeURIComponent(u.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:R,region:T,prefix:I},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(H,W){if(H)return d(H);var ge=o.clone(W.CopyPartResult||{});o.extend(ge,{statusCode:W.statusCode,headers:W.headers}),d(null,ge)})}function Q(e,d){var r=e.Objects||[],u=e.Quiet;r=o.isArray(r)?r:[r];var R=o.json2xml({Delete:{Object:r,Quiet:u||!1}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R));var I=o.map(r,function(H){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:H.Key}});se.call(this,{Scope:I,method:"POST",Bucket:e.Bucket,Region:e.Region,body:R,action:"delete",headers:T,tracker:e.tracker},function(H,W){if(H)return d(H);var ge=W.DeleteResult||{},fe=ge.Deleted||[],me=ge.Error||[];fe=o.isArray(fe)?fe:[fe],me=o.isArray(me)?me:[me];var X=o.clone(ge);o.extend(X,{Error:me,Deleted:fe,statusCode:W.statusCode,headers:W.headers}),d(null,X)})}function M(e,d){var r=e.Headers;if(!e.RestoreRequest){d(o.error(new Error("missing param RestoreRequest")));return}var u=e.RestoreRequest||{},R=o.json2xml({RestoreRequest:u});r["Content-Type"]="application/xml",r["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:R,action:"restore",headers:r,tracker:e.tracker},d)}function V(e,d){var r=e.Tagging||{},u=r.TagSet||r.Tags||e.Tags||[];u=o.clone(o.isArray(u)?u:[u]);var R=o.json2xml({Tagging:{TagSet:{Tag:u}}}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:R,action:"tagging",headers:T,VersionId:e.VersionId,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);d(null,{statusCode:H.statusCode,headers:H.headers})})}function z(e,d){se.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r){if(r.statusCode===404&&r.error&&(r.error==="Not Found"||r.error.Code==="NoSuchTagSet")){var R={Tags:[],statusCode:r.statusCode};r.headers&&(R.headers=r.headers),d(null,R)}else d(r);return}var T=[];try{T=u.Tagging.TagSet.Tag||[]}catch{}T=o.clone(o.isArray(T)?T:[T]),d(null,{Tags:T,statusCode:u.statusCode,headers:u.headers})})}function Y(e,d){se.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(r,u){if(r&&r.statusCode===204)return d(null,{statusCode:r.statusCode});if(r)return d(r);d(null,{statusCode:u.statusCode,headers:u.headers})})}function te(e,d){var r=e.SelectType;if(!r)return d(o.error(new Error("missing param SelectType")));var u=e.SelectRequest||{},R=o.json2xml({SelectRequest:u}),T=e.Headers;T["Content-Type"]="application/xml",T["Content-MD5"]=o.b64(o.md5(R)),se.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:R,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(I,H){if(I&&I.statusCode===204)return d(null,{statusCode:I.statusCode});if(I)return d(I);var W=o.parseSelectPayload(H.body);d(null,{statusCode:H.statusCode,headers:H.headers,Body:W.body,Payload:W.payload})})}function de(e,d){var r=this,u=e.Headers,R=e.tracker;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=e.Body&&e.Body.type||"");var T=e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5);T&&R&&R.setParams({md5StartTime:new Date().getTime()}),o.getBodyMd5(T,e.Body,function(I){I&&(e.Headers["x-cos-meta-md5"]=I),T&&R&&R.setParams({md5EndTime:new Date().getTime()}),se.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:R},function(H,W){if(H)return R&&R.parent&&R.parent.setParams({errorNode:"multipartInit"}),d(H);if(W=o.clone(W||{}),W&&W.InitiateMultipartUploadResult)return d(null,o.extend(W.InitiateMultipartUploadResult,{statusCode:W.statusCode,headers:W.headers}));d(null,W)})},e.onHashProgress)}function ve(e,d){var r=this;o.getFileSize("multipartUpload",e,function(){var u=e.tracker,R=r.options.UploadCheckContentMd5;R&&u&&u.setParams({md5StartTime:new Date().getTime()}),o.getBodyMd5(R,e.Body,function(T){T&&(e.Headers["Content-MD5"]=o.b64(T)),R&&u&&u.setParams({md5EndTime:new Date().getTime()}),u&&u.setParams({partNumber:e.PartNumber}),se.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:u},function(I,H){if(I)return u&&u.parent&&u.parent.setParams({errorNode:"multipartUpload"}),d(I);d(null,{ETag:o.attr(H.headers,"etag",""),statusCode:H.statusCode,headers:H.headers})})})})}function ke(e,d){for(var r=this,u=e.UploadId,R=e.Parts,T=e.tracker,I=0,H=R.length;I<H;I++)R[I].ETag&&R[I].ETag.indexOf('"')===0||(R[I].ETag='"'+R[I].ETag+'"');var W=o.json2xml({CompleteMultipartUpload:{Part:R}});W=W.replace(/\n\s*/g,"");var ge=e.Headers;ge["Content-Type"]="application/xml",ge["Content-MD5"]=o.b64(o.md5(W)),se.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:u},body:W,headers:ge,tracker:T},function(fe,me){if(fe)return T&&T.parent&&T.parent.setParams({errorNode:"multipartComplete"}),d(fe);var X=We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key,isLocation:!0}),Re=me.CompleteMultipartUploadResult||{};if(Re.ProcessResults&&(Re.UploadResult={OriginalInfo:{Key:Re.Key,Location:X,ETag:Re.ETag,ImageInfo:Re.ImageInfo},ProcessResults:Re.ProcessResults},delete Re.ImageInfo,delete Re.ProcessResults),Re.CallbackResult){var Me=Re.CallbackResult;if(Me.Status==="200"&&Me.CallbackBody)try{Re.CallbackBody=JSON.parse(o.decodeBase64(Me.CallbackBody))}catch{Re.CallbackBody={}}else Re.CallbackError=Me.Error||{};delete Re.CallbackResult}if(Re.ReturnBodyResult){var He=Re.ReturnBodyResult;if(He.Status==="200"&&He.ReturnBody)try{Re.ReturnBody=JSON.parse(o.decodeBase64(He.ReturnBody))}catch{Re.ReturnBody={}}else Re.ReturnError={Code:He.Code,Message:He.Message,Status:He.Status};delete Re.ReturnBodyResult}var Ve=o.extend(Re,{Location:X,statusCode:me.statusCode,headers:me.headers});d(null,Ve)})}function Be(e,d){var r={};r.delimiter=e.Delimiter,r["encoding-type"]=e.EncodingType,r.prefix=e.Prefix||"",r["max-uploads"]=e.MaxUploads,r["key-marker"]=e.KeyMarker,r["upload-id-marker"]=e.UploadIdMarker,r=o.clearKey(r);var u=e.tracker;u&&u.setParams({signStartTime:new Date().getTime()}),se.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads",tracker:u},function(R,T){if(R)return u&&u.parent&&u.parent.setParams({errorNode:"multipartList"}),d(R);if(T&&T.ListMultipartUploadsResult){var I=T.ListMultipartUploadsResult.Upload||[];I=o.isArray(I)?I:[I],T.ListMultipartUploadsResult.Upload=I}var H=o.clone(T.ListMultipartUploadsResult||{});o.extend(H,{statusCode:T.statusCode,headers:T.headers}),d(null,H)})}function Pe(e,d){var r={},u=e.tracker;r.uploadId=e.UploadId,r["encoding-type"]=e.EncodingType,r["max-parts"]=e.MaxParts,r["part-number-marker"]=e.PartNumberMarker,se.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:u},function(R,T){if(R)return u&&u.parent&&u.parent.setParams({errorNode:"multipartListPart"}),d(R);var I=T.ListPartsResult||{},H=I.Part||[];H=o.isArray(H)?H:[H],I.Part=H;var W=o.clone(I);o.extend(W,{statusCode:T.statusCode,headers:T.headers}),d(null,W)})}function Le(e,d){var r={};r.uploadId=e.UploadId,se.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:e.tracker},function(u,R){if(u)return d(u);d(null,{statusCode:R.statusCode,headers:R.headers})})}function Ne(e,d){se.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(r,u){if(r)return d(r);u&&u.body&&(u.Body=u.body,delete u.body),d(r,u)})}function Ge(e,d){var r=e.Headers;!r["Cache-Control"]&&!r["cache-control"]&&(r["Cache-Control"]=""),!r["Content-Type"]&&!r["content-type"]&&(r["Content-Type"]=e.Body&&e.Body.type||""),se.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(u,R){if(u)return d(u);d(null,R)})}function ct(e){var d=this;return o.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:d.options.UseRawKey,SystemClockOffset:d.options.SystemClockOffset})}function qe(e,d){var r=this,u=e.UseAccelerate===void 0?r.options.UseAccelerate:e.UseAccelerate,R=We({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:u?"accelerate":e.Region,object:e.Key}),T="";e.Query&&(T+=o.obj2str(e.Query)),e.QueryString&&(T+=(T?"&":"")+e.QueryString);var I=R;if(e.Sign!==void 0&&!e.Sign)return T&&(I+="?"+T),d(null,{Url:I}),I;var H=dt.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:R}),W=kt.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:H,ForceSignHost:e.ForceSignHost===!1?!1:r.options.ForceSignHost},function(ge,fe){if(d){if(ge){d(ge);return}var me=function(Me){var He=Me.match(/q-url-param-list.*?(?=&)/g)[0],Ve="q-url-param-list="+encodeURIComponent(He.replace(/q-url-param-list=/,"")).toLowerCase(),ze=new RegExp(He,"g"),tt=Me.replace(ze,Ve);return tt},X=R;X+="?"+(fe.Authorization.indexOf("q-signature")>-1?me(fe.Authorization):"sign="+encodeURIComponent(fe.Authorization)),fe.SecurityToken&&(X+="&x-cos-security-token="+fe.SecurityToken),fe.ClientIP&&(X+="&clientIP="+fe.ClientIP),fe.ClientUA&&(X+="&clientUA="+fe.ClientUA),fe.Token&&(X+="&token="+fe.Token),T&&(X+="&"+T),setTimeout(function(){d(null,{Url:X})})}});return W?(I+="?"+W.Authorization+(W.SecurityToken?"&x-cos-security-token="+W.SecurityToken:""),T&&(I+="&"+T)):T&&(I+="?"+T),I}function xe(e){var d={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},u=e&&e.AccessControlList||{},R=u.Grant;R&&(R=o.isArray(R)?R:[R]);var T={READ:0,WRITE:0,FULL_CONTROL:0};return R&&R.length&&o.each(R,function(I){var H=I.Grantee.URI&&I.Grantee.URI.endsWith("/groups/global/AllUsers");I.Grantee.ID==="qcs::cam::anyone:anyone"||H?T[I.Permission]=1:I.Grantee.ID!==e.Owner.ID&&d[r[I.Permission]].push('id="'+I.Grantee.ID+'"')}),T.FULL_CONTROL||T.WRITE&&T.READ?d.ACL="public-read-write":T.READ?d.ACL="public-read":d.ACL="private",o.each(r,function(I){d[I]=Ze(d[I].join(","))}),d}function Ze(e){var d=e.split(","),r={},u,R;for(u=0;u<d.length;)R=d[u].trim(),r[R]?d.splice(u,1):(r[R]=!0,d[u]=R,u++);return d.join(",")}function We(e){var d=e.region||"",r=e.bucket||"",u=r.substr(0,r.lastIndexOf("-")),R=r.substr(r.lastIndexOf("-")+1),T=e.domain,I=e.object;typeof T=="function"&&(T=T({Bucket:r,Region:d})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var H=e.protocol||(o.isBrowser&&(typeof location>"u"?"undefined":b(location))==="object"&&location.protocol==="http:"?"http:":"https:");T||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(d)>-1?T="{Region}.myqcloud.com":T="cos.{Region}.myqcloud.com",e.ForcePathStyle||(T="{Bucket}."+T)),T=T.replace(/\{\{AppId\}\}/gi,R).replace(/\{\{Bucket\}\}/gi,u).replace(/\{\{Region\}\}/gi,d).replace(/\{\{.*?\}\}/gi,""),T=T.replace(/\{AppId\}/gi,R).replace(/\{BucketName\}/gi,u).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,d).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(T)||(T=H+"//"+T),T.slice(-1)==="/"&&(T=T.slice(0,-1));var W=T;return e.ForcePathStyle&&(W+="/"+r),W+="/",I&&(W+=o.camSafeUrlEncode(I).replace(/%2F/g,"/")),e.isLocation&&(W=W.replace(/^https?:\/\//,"")),W}var dt=function(d){var r=d.Url||d.Bucket&&d.Region;if(!r)return"";var u=d.UseAccelerate===void 0?this.options.UseAccelerate:d.UseAccelerate,R=d.Url||We({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:d.Bucket,region:u?"accelerate":d.Region}),T=R.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return T};function kt(e,d){var r=o.clone(e.Headers),u="";o.each(r,function(Ee,Ce){(Ee===""||["content-type","cache-control","expires"].indexOf(Ce.toLowerCase())>-1)&&delete r[Ce],Ce.toLowerCase()==="host"&&(u=Ee)});var R=e.ForceSignHost!==!1;!u&&e.SignHost&&R&&(r.Host=e.SignHost);var T=!1,I=function(Ce,Oe){T||(T=!0,Oe&&Oe.XCosSecurityToken&&!Oe.SecurityToken&&(Oe=o.clone(Oe),Oe.SecurityToken=Oe.XCosSecurityToken,delete Oe.XCosSecurityToken),d&&d(Ce,Oe))},H=this,W=e.Bucket||"",ge=e.Region||"",fe=e.Key||"";H.options.ForcePathStyle&&W&&(fe=W+"/"+fe);var me="/"+fe,X={},Re=e.Scope;if(!Re){var Me=e.Action||"",He=e.ResourceKey||e.Key||"";Re=e.Scope||[{action:Me,bucket:W,region:ge,prefix:He}]}var Ve=o.md5(JSON.stringify(Re));H._StsCache=H._StsCache||[],function(){var Ee,Ce;for(Ee=H._StsCache.length-1;Ee>=0;Ee--){Ce=H._StsCache[Ee];var Oe=Math.round(o.getSkewTime(H.options.SystemClockOffset)/1e3)+30;if(Ce.StartTime&&Oe<Ce.StartTime||Oe>=Ce.ExpiredTime){H._StsCache.splice(Ee,1);continue}if(!Ce.ScopeLimit||Ce.ScopeLimit&&Ce.ScopeKey===Ve){X=Ce;break}}}();var ze=function(){var Ce="";X.StartTime&&e.Expires?Ce=X.StartTime+";"+(X.StartTime+e.Expires*1):X.StartTime&&X.ExpiredTime&&(Ce=X.StartTime+";"+X.ExpiredTime);var Oe=o.getAuth({SecretId:X.TmpSecretId,SecretKey:X.TmpSecretKey,Method:e.Method,Pathname:me,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:H.options.UseRawKey,SystemClockOffset:H.options.SystemClockOffset,KeyTime:Ce,ForceSignHost:R}),Te={Authorization:Oe,SecurityToken:X.SecurityToken||X.XCosSecurityToken||"",Token:X.Token||"",ClientIP:X.ClientIP||"",ClientUA:X.ClientUA||"",SignFrom:"client"};I(null,Te)},tt=function(Ce){if(Ce.Authorization){var Oe=!1,Te=Ce.Authorization;if(Te)if(Te.indexOf(" ")>-1)Oe=!1;else if(Te.indexOf("q-sign-algorithm=")>-1&&Te.indexOf("q-ak=")>-1&&Te.indexOf("q-sign-time=")>-1&&Te.indexOf("q-key-time=")>-1&&Te.indexOf("q-url-param-list=")>-1)Oe=!0;else try{Te=atob(Te),Te.indexOf("a=")>-1&&Te.indexOf("k=")>-1&&Te.indexOf("t=")>-1&&Te.indexOf("r=")>-1&&Te.indexOf("b=")>-1&&(Oe=!0)}catch{}if(!Oe)return o.error(new Error("getAuthorization callback params format error"))}else{if(!Ce.TmpSecretId)return o.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Ce.TmpSecretKey)return o.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Ce.SecurityToken&&!Ce.XCosSecurityToken)return o.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Ce.ExpiredTime)return o.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Ce.ExpiredTime&&Ce.ExpiredTime.toString().length!==10)return o.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Ce.StartTime&&Ce.StartTime.toString().length!==10)return o.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(X.ExpiredTime&&X.ExpiredTime-o.getSkewTime(H.options.SystemClockOffset)/1e3>60)ze();else if(H.options.getAuthorization)H.options.getAuthorization.call(H,{Bucket:W,Region:ge,Method:e.Method,Key:fe,Pathname:me,Query:e.Query,Headers:r,Scope:Re,SystemClockOffset:H.options.SystemClockOffset,ForceSignHost:R},function(Ee){typeof Ee=="string"&&(Ee={Authorization:Ee});var Ce=tt(Ee);if(Ce)return I(Ce);Ee.Authorization?I(null,Ee):(X=Ee||{},X.Scope=Re,X.ScopeKey=Ve,H._StsCache.push(X),ze())});else if(H.options.getSTS)H.options.getSTS.call(H,{Bucket:W,Region:ge},function(Ee){X=Ee||{},X.Scope=Re,X.ScopeKey=Ve,X.TmpSecretId||(X.TmpSecretId=X.SecretId),X.TmpSecretKey||(X.TmpSecretKey=X.SecretKey);var Ce=tt(X);if(Ce)return I(Ce);H._StsCache.push(X),ze()});else return function(){var Ee="";if(H.options.StartTime&&e.Expires){if(H.options.StartTime.toString().length!==10)return I(o.error(new Error('params "StartTime" should be 10 digits')));Ee=H.options.StartTime+";"+(H.options.StartTime+e.Expires*1)}else if(H.options.StartTime&&H.options.ExpiredTime){if(H.options.StartTime.toString().length!==10)return I(o.error(new Error('params "StartTime" should be 10 digits')));if(H.options.ExpiredTime.toString().length!==10)return I(o.error(new Error('params "ExpiredTime" should be 10 digits')));Ee=H.options.StartTime+";"+H.options.ExpiredTime*1}var Ce=o.getAuth({SecretId:e.SecretId||H.options.SecretId,SecretKey:e.SecretKey||H.options.SecretKey,Method:e.Method,Pathname:me,Query:e.Query,Headers:r,Expires:e.Expires,KeyTime:Ee,UseRawKey:H.options.UseRawKey,SystemClockOffset:H.options.SystemClockOffset,ForceSignHost:R}),Oe={Authorization:Ce,SecurityToken:H.options.SecurityToken||H.options.XCosSecurityToken,SignFrom:"client"};return I(null,Oe),Oe}();return""}function Vt(e){var d=this,r=!1,u=!1,R=!1,T=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var I=e.error.Code,H=e.error.Message;(I==="RequestTimeTooSkewed"||I==="AccessDenied"&&H==="Request has expired")&&(u=!0)}catch{}if(e)if(u&&T){var W=Date.parse(T);this.options.CorrectClockSkew&&Math.abs(o.getSkewTime(this.options.SystemClockOffset)-W)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=W-Date.now(),r=!0)}else Math.floor(e.statusCode/100)===5?(r=!0,R=!1):(e.message==="timeout"||e.message==="CORS blocked or network error")&&(r=!0,R=d.options.AutoSwitchHost);return{canRetry:r,networkError:R}}function zt(e){var d=e.requestUrl,r=e.clientCalcSign,u=e.networkError;if(!this.options.AutoSwitchHost||!d||!r||!u)return!1;var R=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,T=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,I=R.test(d)&&!T.test(d);return I}function se(e,d){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=o.clearKey(e.qs),e.headers&&(e.headers=o.clearKey(e.headers)),e.qs&&(e.qs=o.clearKey(e.qs));var u=o.clone(e.qs);e.action&&(u[e.action]="");var R=e.url||e.Url,T=e.SignHost||dt.call(this,{Bucket:e.Bucket,Region:e.Region,Url:R}),I=e.tracker,H=function(ge){var fe=r.options.SystemClockOffset;I&&I.setParams({signStartTime:new Date().getTime(),httpRetryTimes:ge-1}),e.SwitchHost&&(T=T.replace(/myqcloud.com/,"tencentcos.cn"));var me=U(U({},e),{},{Query:u,SignHost:T,ForceSignHost:r.options.ForceSignHost});delete me.tracker,r.logger.debug({cate:"PROCESS",tag:"base",msg:"开始计算签名, opt=".concat(JSON.stringify(me))}),kt.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:u,Headers:e.headers,SignHost:T,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:r.options.ForceSignHost,SwitchHost:e.SwitchHost},function(X,Re){if(X){r.logger.error({cate:"PROCESS",tag:"base",msg:"签名获取失败, err=".concat(JSON.stringify(X.message))}),d(X);return}I&&I.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=Re,r.logger.debug({cate:"PROCESS",tag:"base",msg:"签名获取成功"}),r.logger.info({cate:"PROCESS",tag:"base",msg:"准备发起请求"}),$t.call(r,e,function(Me,He){I&&I.setParams({httpEndTime:new Date().getTime()});var Ve=!1,ze=!1;if(Me){var tt=Vt.call(r,Me);Ve=tt.canRetry||fe!==r.options.SystemClockOffset,ze=tt.networkError,r.logger.error({cate:"PROCESS",tag:"network",msg:"请求失败, err=".concat(JSON.stringify(Me),", canRetry=").concat(Ve,", networkError=").concat(ze,", tryTimes=").concat(ge)})}if(Me&&ge<4&&Ve){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var Ee=zt.call(r,{requestUrl:(Me==null?void 0:Me.url)||"",clientCalcSign:Re.SignFrom==="client",networkError:ze});e.SwitchHost=Ee,e.headers["x-cos-sdk-retry"]=!0,r.logger.info({cate:"PROCESS",tag:"base",msg:"重试请求, 重试第".concat(ge,"次")}),H(ge+1)}else r.logger.info({cate:"PROCESS",tag:"base",msg:"请求完成"}),d(Me,He)})})};H(1)}function $t(e,d){var r=this,u=e.TaskId;if(!(u&&!r._isRunningTask(u))){var R=e.Bucket,T=e.Region,I=e.Key,H=e.method||"GET",W=e.Url||e.url,ge=e.body,fe=e.rawBody;r.options.UseAccelerate&&(T="accelerate"),W=W||We({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:R,region:T,object:I}),e.SwitchHost&&(W=W.replace(/myqcloud.com/,"tencentcos.cn"));var me=I?W:"";e.action&&(W=W+"?"+(o.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(W.indexOf("?")>-1?W=W+"&"+e.qsStr:W=W+"?"+e.qsStr);var X={method:H,url:W,headers:e.headers,qs:e.qs,body:ge},Re="x-cos-security-token";if(o.isCIHost(W)&&(Re="x-ci-security-token"),X.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(X.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(X.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(X.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(X.headers[Re]=e.AuthData.SecurityToken),e.Action&&(X.action=e.Action),X.key=e.Key||e.ResourceKey,X.headers&&(X.headers=o.clearKey(X.headers)),X=o.clearKey(X),e.onProgress&&typeof e.onProgress=="function"){var Me=ge&&(ge.size||ge.length)||0;X.onProgress=function(Te){if(!(u&&!r._isRunningTask(u))){var Qe=Te?Te.loaded:0;e.onProgress({loaded:Qe,total:Me})}}}e.onDownloadProgress&&(X.onDownloadProgress=e.onDownloadProgress),e.DataType&&(X.dataType=e.DataType),this.options.Timeout&&(X.timeout=this.options.Timeout),r.options.ForcePathStyle&&(X.pathStyle=r.options.ForcePathStyle);var He=o.uuid();r.logger.info({cate:"PROCESS",tag:"network",msg:"[Request] ".concat(He,", requestOpt=").concat(JSON.stringify(X))}),r.emit("before-send",X);var Ve=X.url.includes("accelerate."),ze=X.qs?Object.keys(X.qs).map(function(Te){return"".concat(Te,"=").concat(X.qs[Te])}).join("&"):"",tt=ze?X.url+"?"+ze:X.url;if(e.tracker){var Ee;e.tracker.setParams({url:tt,httpMethod:X.method,accelerate:Ve,httpSize:((Ee=X.body)===null||Ee===void 0?void 0:Ee.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:me,accelerate:Ve})}var Ce=(r.options.Request||E)(X,function(Te){if(!(Te&&Te.error==="abort")){var Qe={options:X,error:Te&&Te.error,statusCode:Te&&Te.statusCode||0,statusMessage:Te&&Te.statusMessage||"",headers:Te&&Te.headers||{},body:Te&&Te.body};r.emit("after-receive",Qe);var Dt=Qe.error,_t=Qe.body,nt={statusCode:Qe.statusCode,statusMessage:Qe.statusMessage,headers:Qe.headers},Jn=Dt?"[error]":"[success]";r.logger.info({cate:"PROCESS",tag:"network",msg:"[Response] ".concat(He,", ").concat(Jn,", response=").concat(JSON.stringify(nt))});var fn,ut=function(at,Fe){if(u&&r.off("inner-kill-task",Oe),!fn){fn=!0;var ft={};if(nt&&nt.statusCode&&(ft.statusCode=nt.statusCode),nt&&nt.headers&&(ft.headers=nt.headers),at)X.url&&(ft.url=X.url),X.method&&(ft.method=X.method),at=o.extend(at||{},ft),d(at,null);else{if(e.Action==="name/cos:PutObject"){var Wt={};for(var pn in e.headers){var Zn=pn.toLowerCase();Wt[Zn]=e.headers[pn]}Wt["x-cos-callback"]?Fe.Error?(Fe.CallbackError=o.clone(Fe.Error),delete Fe.Error):Fe.CallbackBody=o.clone(Fe):Wt["x-cos-return-body"]&&(Fe.Error?(Fe.ReturnError=o.clone(Fe.Error),delete Fe.Error):Fe.ReturnBody=o.clone(Fe))}Fe=o.extend(Fe||{},ft),d(null,Fe)}Ce=null}};if(Dt)return ut(o.error(Dt));var mt=nt.statusCode,hn=Math.floor(mt/100)===2;if(fe){if(hn)return ut(null,{body:_t});if(_t instanceof Blob){o.readAsBinaryString(_t,function(gn){var at=o.parseResBody(gn),Fe=at.Error||at;return ut(o.error(new Error(Fe.Message||"response body error"),{code:Fe.Code,error:Fe}))});return}}var Gt=o.parseResBody(_t),bt=Gt.Error||Gt;hn?ut(null,Gt):bt?ut(o.error(new Error(bt.Message),{code:bt.Code,error:bt})):mt?ut(o.error(new Error(nt.statusMessage),{code:""+mt})):mt&&ut(o.error(new Error("statusCode error")))}}),Oe=function(Qe){Qe.TaskId===u&&(Ce&&Ce.abort&&Ce.abort(),r.off("inner-kill-task",Oe))};u&&r.on("inner-kill-task",Oe)}}var dn={getService:c,putBucket:l,headBucket:_,getBucket:h,deleteBucket:x,putBucketAcl:A,getBucketAcl:P,putBucketCors:L,getBucketCors:K,deleteBucketCors:$,getBucketLocation:q,getBucketPolicy:p,putBucketPolicy:C,deleteBucketPolicy:O,putBucketTagging:s,getBucketTagging:n,deleteBucketTagging:t,putBucketLifecycle:i,getBucketLifecycle:a,deleteBucketLifecycle:S,putBucketVersioning:w,getBucketVersioning:m,putBucketReplication:F,getBucketReplication:j,deleteBucketReplication:G,putBucketWebsite:D,getBucketWebsite:Z,deleteBucketWebsite:ee,putBucketReferer:he,getBucketReferer:ie,putBucketDomain:re,getBucketDomain:ne,deleteBucketDomain:J,putBucketOrigin:oe,getBucketOrigin:le,deleteBucketOrigin:ue,putBucketLogging:ce,getBucketLogging:ae,putBucketInventory:ye,postBucketInventory:Se,getBucketInventory:Ae,listBucketInventory:be,deleteBucketInventory:Ue,putBucketAccelerate:Je,getBucketAccelerate:$e,putBucketEncryption:Xe,getBucketEncryption:st,deleteBucketEncryption:De,getObject:Ut,headObject:et,listObjectVersions:pt,putObject:Mt,deleteObject:jt,getObjectAcl:Lt,putObjectAcl:Ft,optionsObject:Ht,putObjectCopy:Kt,deleteMultipleObject:Q,restoreObject:M,putObjectTagging:V,getObjectTagging:z,deleteObjectTagging:Y,selectObjectContent:te,appendObject:Ge,uploadPartCopy:Ke,multipartInit:de,multipartUpload:ve,multipartComplete:ke,multipartList:Be,multipartListPart:Pe,multipartAbort:Le,request:Ne,getObjectUrl:qe,getAuth:ct};function Qn(e,d,r){o.each(["Cors","Acl"],function(u){if(e.slice(-u.length)===u){var R=e.slice(0,-u.length)+u.toUpperCase(),T=o.apiWrapper(e,d),I=!1;r[R]=function(){!I&&console.warn("warning: cos."+R+" has been deprecated. Please Use cos."+e+" instead."),I=!0,T.apply(this,arguments)}}})}g.exports.init=function(e,d){d.transferToTaskMethod(dn,"putObject"),o.each(dn,function(r,u){e.prototype[u]=o.apiWrapper(u,r),Qn(u,r,e.prototype)})}},"./src/cos.js":function(g,N,f){var v=f("./src/util.js"),b=f("./src/event.js"),B=f("./src/task.js"),U=f("./src/base.js"),E=f("./src/advance.js"),o=f("./src/logger.js"),c=f("./package.json"),l={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null,EnableLog:!1,EnableLogcat:!1,LogLevel:"VERBOSE",ClsLogger:null,LogExtras:{}},_=function(x){var A,P,L=this;if(this.options=v.extend(v.clone(l),x||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),v.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");b.init(this),B.init(this),this.logger=new o({enableLog:this.options.EnableLog,enableLogcat:this.options.EnableLogcat,level:(A=this.options.LogLevel)!==null&&A!==void 0?A:"VERBOSE",clsLogger:this.options.ClsLogger,logExtras:(P=this.options.LogExtras)!==null&&P!==void 0?P:{}}),this.options.EnableLog&&(b.init(this.logger),this.logger.on("log-message",function(K){L.emit("log-message",K)}))};U.init(_,B),E.init(_,B),_.util={md5:v.md5,xml2json:v.xml2json,json2xml:v.json2xml,encodeBase64:v.encodeBase64},_.getAuthorization=v.getAuth,_.version=c.version,g.exports=_},"./src/event.js":function(g,N){var f=function(B){var U={},E=function(c){return!U[c]&&(U[c]=[]),U[c]};B.on=function(o,c){o==="task-list-update"&&console.warn('warning: Event "'+o+'" has been deprecated. Please use "list-update" instead.'),E(o).push(c)},B.off=function(o,c){for(var l=E(o),_=l.length-1;_>=0;_--)c===l[_]&&l.splice(_,1)},B.emit=function(o,c){for(var l=E(o).map(function(h){return h}),_=0;_<l.length;_++)l[_](c)}},v=function(){f(this)};g.exports.init=f,g.exports.EventProxy=v},"./src/logger.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/classCallCheck.js"),b=f("./node_modules/@babel/runtime/helpers/createClass.js"),B=f("./node_modules/@babel/runtime/helpers/defineProperty.js"),U=f("./package.json"),E=U.version,o=["VERBOSE","DEBUG","INFO","WARN","ERROR"],c=function(){function l(_){var h;v(this,l),B(this,"level","VERBOSE"),B(this,"clsLogger",null),B(this,"logExtras",{}),this.enableLog=(h=_.enableLog)!==null&&h!==void 0?h:!1,this.level=_.level||"VERBOSE",o.includes(this.level)||(this.level="VERBOSE"),this.enableLogcat=_.enableLogcat,this.clsLogger=_.clsLogger,this.logExtras=_.logExtras}return b(l,[{key:"info",value:function(){if(["VERBOSE","INFO"].includes(this.level)){for(var h=arguments.length,x=new Array(h),A=0;A<h;A++)x[A]=arguments[A];this.log.apply(this,["info"].concat(x))}}},{key:"debug",value:function(){if(["VERBOSE","DEBUG"].includes(this.level)){for(var h=arguments.length,x=new Array(h),A=0;A<h;A++)x[A]=arguments[A];this.log.apply(this,["debug"].concat(x))}}},{key:"warn",value:function(){if(["VERBOSE","WARN"].includes(this.level)){for(var h=arguments.length,x=new Array(h),A=0;A<h;A++)x[A]=arguments[A];this.log.apply(this,["warn"].concat(x))}}},{key:"error",value:function(){if(["VERBOSE","ERROR"].includes(this.level)){for(var h=arguments.length,x=new Array(h),A=0;A<h;A++)x[A]=arguments[A];this.log.apply(this,["error"].concat(x))}}},{key:"log",value:function(){if(this.enableLog){var h=arguments.length<=0?void 0:arguments[0],x=arguments.length<=1?void 0:arguments[1],A=x.cate,P=A===void 0?"base":A,L=x.tag,K=L===void 0?"base":L,$=x.msg,q={version:"cos-js-sdk-v5-".concat(E),timestamp:new Date().toISOString(),cate:"[".concat(P.toUpperCase(),"]"),tag:"[".concat(K.toUpperCase(),"]"),msg:$,extras:this.logExtras};this.enableLogcat&&console[h]("[".concat(q.version,"] ").concat(q.timestamp," ").concat(q.cate," ").concat(q.tag," ").concat(q.msg," ").concat(q.extras?JSON.stringify(q.extras):"")),this.clsLogger&&this.clsLogger.log(q,!1),this.emit("log-message",q)}}}])}();g.exports=c},"./src/session.js":function(g,N,f){var v=f("./src/util.js"),b="cos_sdk_upload_cache",B=30*24*3600,U,E,o=function(){try{var A=JSON.parse(localStorage.getItem(b))}catch{}A||(A=[]),U=A},c=function(){try{U.length?localStorage.setItem(b,JSON.stringify(U)):localStorage.removeItem(b)}catch{}},l=function(){if(!U){o.call(this);for(var A=!1,P=Math.round(Date.now()/1e3),L=U.length-1;L>=0;L--){var K=U[L][2];(!K||K+B<P)&&(U.splice(L,1),A=!0)}A&&c()}},_=function(){E||(E=setTimeout(function(){c(),E=null},400))},h={using:{},setUsing:function(A){h.using[A]=!0},removeUsing:function(A){delete h.using[A]},getFileId:function(A,P,L,K){return A.name&&A.size&&A.lastModifiedDate&&P?v.md5([A.name,A.size,A.lastModifiedDate,P,L,K].join("::")):null},getCopyFileId:function(A,P,L,K,$){var q=P["content-length"],C=P.etag||"",p=P["last-modified"];return A&&L?v.md5([A,q,C,p,L,K,$].join("::")):null},getUploadIdList:function(A){if(!A)return null;l.call(this);for(var P=[],L=0;L<U.length;L++)U[L][0]===A&&P.push(U[L][1]);return P.length?P:null},saveUploadId:function(A,P,L){if(l.call(this),!!A){for(var K=U.length-1;K>=0;K--){var $=U[K];$[0]===A&&$[1]===P&&U.splice(K,1)}U.unshift([A,P,Math.round(Date.now()/1e3)]),U.length>L&&U.splice(L),_()}},removeUploadId:function(A){l.call(this),delete h.using[A];for(var P=U.length-1;P>=0;P--)U[P][1]===A&&U.splice(P,1);_()}};g.exports=h},"./src/task.js":function(g,N,f){var v=f("./src/session.js"),b=f("./src/util.js"),B={},U=function(c,l){B[l]=c[l],c[l]=function(_,h){_.SkipTask?B[l].call(this,_,h):this._addTask(l,_,h)}},E=function(c){var l=[],_={},h=0,x=0,A=function(p){var O={id:p.id,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath,state:p.state,loaded:p.loaded,size:p.size,speed:p.speed,percent:p.percent,hashPercent:p.hashPercent,error:p.error};return p.FilePath&&(O.FilePath=p.FilePath),p._custom&&(O._custom=p._custom),O},P=function(){var C,p=function(){C=0,c.emit("task-list-update",{list:b.map(l,A)}),c.emit("list-update",{list:b.map(l,A)})};return function(){C||(C=setTimeout(p))}}(),L=function(){if(!(l.length<=c.options.UploadQueueSize)){for(var p=0;p<x&&p<l.length&&l.length>c.options.UploadQueueSize;){var O=l[p].state==="waiting"||l[p].state==="checking"||l[p].state==="uploading";!l[p]||!O?(_[l[p].id]&&delete _[l[p].id],l.splice(p,1),x--):p++}P()}},K=function(){if(!(h>=c.options.FileParallelLimit)){for(;l[x]&&l[x].state!=="waiting";)x++;if(!(x>=l.length)){var p=l[x];x++,h++,p.state="checking",p.params.onTaskStart&&p.params.onTaskStart(A(p)),!p.params.UploadData&&(p.params.UploadData={});var O=b.formatParams(p.api,p.params);B[p.api].call(c,O,function(s,n){c._isRunningTask(p.id)&&((p.state==="checking"||p.state==="uploading")&&(p.state=s?"error":"success",s&&(p.error=s),h--,P(),K(),p.callback&&p.callback(s,n),p.state==="success"&&(p.params&&(delete p.params.UploadData,delete p.params.Body,delete p.params),delete p.callback)),L())}),P(),setTimeout(K)}}},$=function(p,O){var s=_[p];if(s){var n=s&&s.state==="waiting",t=s&&(s.state==="checking"||s.state==="uploading");if(O==="canceled"&&s.state!=="canceled"||O==="paused"&&n||O==="paused"&&t){s.state=O,c.emit("inner-kill-task",{TaskId:p,toState:O});try{var i=s&&s.params&&s.params.UploadData.UploadId}catch{}O==="canceled"&&i&&v.removeUsing(i),P(),t&&(h--,K()),O==="canceled"&&(s.params&&(delete s.params.UploadData,delete s.params.Body,delete s.params),delete s.callback)}L()}};c._addTasks=function(C){b.each(C,function(p){c._addTask(p.api,p.params,p.callback,!0)}),P()};var q=!0;c._addTask=function(C,p,O,s){p=b.formatParams(C,p);var n=b.uuid();p.TaskId=n,p.onTaskReady&&p.onTaskReady(n),p.TaskReady&&(p.TaskReady(n),q&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),q=!1);var t={params:p,callback:O,api:C,index:l.length,id:n,Bucket:p.Bucket,Region:p.Region,Key:p.Key,FilePath:p.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:p._custom},i=p.onHashProgress;p.onHashProgress=function(S){c._isRunningTask(t.id)&&(t.hashPercent=S.percent,i&&i(S),P())};var a=p.onProgress;return p.onProgress=function(S){c._isRunningTask(t.id)&&(t.state==="checking"&&(t.state="uploading"),t.loaded=S.loaded,t.speed=S.speed,t.percent=S.percent,a&&a(S),P())},b.getFileSize(C,p,function(S,w){if(S)return O(b.error(S));_[n]=t,l.push(t),t.size=w,!s&&P(),K(),L()}),n},c._isRunningTask=function(C){var p=_[C];return!!(p&&(p.state==="checking"||p.state==="uploading"))},c.getTaskList=function(){return b.map(l,A)},c.cancelTask=function(C){$(C,"canceled")},c.pauseTask=function(C){$(C,"paused")},c.restartTask=function(C){var p=_[C];p&&(p.state==="paused"||p.state==="error")&&(p.state="waiting",P(),x=Math.min(x,p.index),K())},c.isUploadRunning=function(){return h||x<l.length}};g.exports.transferToTaskMethod=U,g.exports.init=E},"./src/tracker.js":function(g,N,f){var v=f("./node_modules/@babel/runtime/helpers/classCallCheck.js"),b=f("./node_modules/@babel/runtime/helpers/createClass.js"),B=f("./node_modules/@babel/runtime/helpers/typeof.js"),U=f("./package.json"),E=null,o=function(O,s){if(!E){if(typeof O!="function")throw new Error("Beacon not found");E=new O({appkey:"0WEB05PY6MHRGK0U",versionCode:U.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:s,sessionDuration:60*1e3})}return E},c=function(O){return!O||O<0?0:(O/1e3).toFixed(3)},l={getUid:function(){var O=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return O()+O()+"-"+O()+"-"+O()+"-"+O()+"-"+O()+O()+O()},getNetType:function(){if((typeof navigator>"u"?"undefined":B(navigator))==="object"){var O=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(O==null?void 0:O.type)||(O==null?void 0:O.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":B(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":B(navigator))!=="object")return"unknown os";var O=navigator.userAgent.toLowerCase(),s=/macintosh|mac os x/i.test(navigator.userAgent);return O.indexOf("win32")>=0||O.indexOf("wow32")>=0?"win32":O.indexOf("win64")>=0||O.indexOf("wow64")>=0?"win64":s?"mac":"unknown os"},isMobile:function(){var O=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(O))},isAndroid:function(){var O=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(O))},isIOS:function(){var O=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":B(navigator))==="object"&&navigator.userAgent.match(O))},isOtherMobile:function(){return _&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":B(navigator))!=="object")return"unknown device";var O=navigator.userAgent;return O}},_=l.isMobile(),h=l.isAndroid()?"android":l.isIOS?"ios":"other_mobile",x=l.getOsType(),A=_?h:x,P=l.getUA(),L=l.getProtocol(),K=function(O){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(O)?"UploadTask":O==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(O)?"CopyTask":O};function $(p){return p.replace(/([A-Z])/g,"_$1").toLowerCase()}function q(p){var O={},s=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],n=[].concat(s,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),t=p.requestResult==="Success"?s:n;for(var i in p)if(t.includes(i)){var a=$(i);O[a]=p[i]}return O.request_name=p.realApi?K(p.realApi):p.requestName,O}var C=function(){function p(O){v(this,p);var s=O.parent,n=O.traceId,t=O.bucket,i=O.region,a=O.apiName,S=O.realApi,w=O.httpMethod,m=O.fileKey,F=O.fileSize,j=O.accelerate,G=O.customId,D=O.delay,Z=O.deepTracker,ee=O.Beacon,he=O.clsReporter,ie=t&&t.substr(t.lastIndexOf("-")+1)||"";this.parent=s,this.deepTracker=Z,this.delay=D,he&&!this.clsReporter&&(this.clsReporter=he),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:U.version,osName:A,networkType:"",requestName:a||"",requestResult:"",realApi:S,bucket:t,region:i,accelerate:j,httpMethod:w,url:"",host:"",httpDomain:"",requestPath:m||"",userAgent:P,networkProtocol:L,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:F||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:n||l.getUid(),appid:ie,partNumber:0,httpRetryTimes:0,customId:G||"",partTime:0},ee&&(this.beacon=o(ee,D))}return b(p,[{key:"formatResult",value:function(s,n){var t,i,a,S,w,m,F=new Date().getTime(),j=l.getNetType(),G=s?(s==null?void 0:s.code)||(s==null||(t=s.error)===null||t===void 0?void 0:t.code)||(s==null||(i=s.error)===null||i===void 0?void 0:i.Code):"",D=s?(s==null?void 0:s.message)||(s==null||(a=s.error)===null||a===void 0?void 0:a.message)||(s==null||(S=s.error)===null||S===void 0?void 0:S.Message):"",Z=D,ee=s?(s==null?void 0:s.resource)||(s==null||(w=s.error)===null||w===void 0?void 0:w.resource)||(s==null||(m=s.error)===null||m===void 0?void 0:m.Resource):"",he=s?s==null?void 0:s.statusCode:n.statusCode,ie=s?(s==null?void 0:s.headers)&&(s==null?void 0:s.headers["x-cos-request-id"]):(n==null?void 0:n.headers)&&(n==null?void 0:n.headers["x-cos-request-id"]),re=s?ie?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=n?n.headers&&n.headers["content-length"]:0);var ne=this.params.realApi==="sliceUploadFile",J=this.params.realApi==="sliceCopyFile";if(ne||J){var oe=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:oe<0?0:oe.toFixed(3)})}else{var le=F-this.params.startTime,ue=this.params.httpEndTime-this.params.httpStartTime,ce=this.params.httpSize/1024/(ue/1e3),ae=this.params.md5EndTime-this.params.md5StartTime,pe=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",c(ue)),this.parent.addParamValue("httpFullTime",c(le)),this.parent.addParamValue("httpMd5",c(ae)),this.parent.addParamValue("httpSign",c(pe)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",c(ue))),Object.assign(this.params,{httpFullTime:c(le),httpMd5:c(ae),httpSign:c(pe),httpTookTime:c(ue),httpSpeed:ce<0?0:ce.toFixed(3)})}if(Object.assign(this.params,{networkType:j,requestResult:s?"Failure":"Success",errorType:re,errorCode:G,errorHttpCode:he,errorName:Z,errorMessage:D,errorServiceName:ee,errorRequestId:ie}),s&&(!G||!D)&&(this.params.fullError=s?JSON.stringify(s):""),this.params.url){try{var ye=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=ye[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(s,n){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(s,n);var t=q(this.params);this.beacon&&this.sendEventsToBeacon(t),this.clsReporter&&this.sendEventsToCLS(t)}}},{key:"setParams",value:function(s){Object.assign(this.params,s)}},{key:"addParamValue",value:function(s,n){this.params[s]=(+this.params[s]+ +n).toFixed(3)}},{key:"sendEventsToBeacon",value:function(s){var n=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(n&&!this.deepTracker)){var t="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(t,s):this.beacon&&this.beacon.onUserAction(t,s)}}},{key:"sendEventsToCLS",value:function(s){var n=this.delay===0;this.clsReporter.log(s,n)}},{key:"generateSubTracker",value:function(s){return Object.assign(s,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new p(s)}}])}();g.exports=C},"./src/util.js":function(g,N,f){(function(v){var b=f("./node_modules/@babel/runtime/helpers/typeof.js");function B(Q,M){var V=typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(!V){if(Array.isArray(Q)||(V=U(Q))||M){V&&(Q=V);var z=0,Y=function(){};return{s:Y,n:function(){return z>=Q.length?{done:!0}:{done:!1,value:Q[z++]}},e:function(Be){throw Be},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,de=!0,ve=!1;return{s:function(){V=V.call(Q)},n:function(){var Be=V.next();return de=Be.done,Be},e:function(Be){ve=!0,te=Be},f:function(){try{de||V.return==null||V.return()}finally{if(ve)throw te}}}}function U(Q,M){if(Q){if(typeof Q=="string")return E(Q,M);var V={}.toString.call(Q).slice(8,-1);return V==="Object"&&Q.constructor&&(V=Q.constructor.name),V==="Map"||V==="Set"?Array.from(Q):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?E(Q,M):void 0}}function E(Q,M){(M==null||M>Q.length)&&(M=Q.length);for(var V=0,z=Array(M);V<M;V++)z[V]=Q[V];return z}var o=f("./lib/md5.js"),c=f("./lib/crypto.js"),l=f("./node_modules/fast-xml-parser/src/fxp.js"),_=l.XMLParser,h=l.XMLBuilder,x=new _({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1,trimValues:!1}),A=new h,P=f("./lib/base64.js"),L=f("./src/tracker.js"),K="#text",$=function(M){if(le(M))for(var V in M){var z=M[V];typeof z=="string"?V===K&&delete M[V]:Array.isArray(z)?z.forEach(function(Y){$(Y)}):le(z)&&$(z)}},q=function(M){var V=x.parse(M);return $(V),V},C=function(M){var V=A.build(M);return V};function p(Q){return encodeURIComponent(Q).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function O(Q,M){var V=[];for(var z in Q)Q.hasOwnProperty(z)&&V.push(M?p(z).toLowerCase():z);return V.sort(function(Y,te){return Y=Y.toLowerCase(),te=te.toLowerCase(),Y===te?0:Y>te?1:-1})}var s=function(M,V){var z,Y,te,de=[],ve=O(M);for(z=0;z<ve.length;z++)Y=ve[z],te=M[Y]===void 0||M[Y]===null?"":""+M[Y],Y=V?p(Y).toLowerCase():p(Y),te=p(te)||"",de.push(Y+"="+te);return de.join("&")},n=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],t=function(M){var V={};for(var z in M){var Y=z.toLowerCase();(Y.indexOf("x-cos-")>-1||Y.indexOf("x-ci-")>-1||n.indexOf(Y)>-1)&&(V[z]=M[z])}return V},i=function(M){M=M||{};var V=M.SecretId,z=M.SecretKey,Y=M.KeyTime,te=(M.method||M.Method||"get").toLowerCase(),de=re(M.Query||M.params||{}),ve=t(re(M.Headers||M.headers||{})),ke=M.Key||"",Be;M.UseRawKey?Be=M.Pathname||M.pathname||"/"+ke:(Be=M.Pathname||M.pathname||ke,Be.indexOf("/")!==0&&(Be="/"+Be));var Pe=M.ForceSignHost!==!1;if(!ve.Host&&!ve.host&&M.Bucket&&M.Region&&Pe&&(ve.Host=M.Bucket+".cos."+M.Region+".myqcloud.com"),!V)throw new Error("missing param SecretId");if(!z)throw new Error("missing param SecretKey");var Le=Math.round(st(M.SystemClockOffset)/1e3)-1,Ne=Le,Ge=M.Expires||M.expires;Ge===void 0?Ne+=900:Ne+=Ge*1||0;var ct="sha1",qe=V,xe=Y||Le+";"+Ne,Ze=Y||Le+";"+Ne,We=O(ve,!0).join(";").toLowerCase(),dt=O(de,!0).join(";").toLowerCase(),kt=c.HmacSHA1(Ze,z).toString(),Vt=[te,Be,Ke.obj2str(de,!0),Ke.obj2str(ve,!0),""].join(`
`),zt=["sha1",xe,c.SHA1(Vt).toString(),""].join(`
`),se=c.HmacSHA1(zt,kt).toString(),$t=["q-sign-algorithm="+ct,"q-ak="+qe,"q-sign-time="+xe,"q-key-time="+Ze,"q-header-list="+We,"q-url-param-list="+dt,"q-signature="+se].join("&");return $t},a=function(M,V,z){var Y=V/8,te=M.slice(z,z+Y);return new Uint8Array(te).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[V](te)[0]},S=function(M,V,z,Y){var te=M.slice(V,z),de="";return new Uint8Array(te).forEach(function(ve){de+=String.fromCharCode(ve)}),Y&&(de=decodeURIComponent(escape(de))),de},w=function(M){for(var V={},z=S(M),Y={records:[]};M.byteLength;){var te=a(M,32,0),de=a(M,32,4),ve=te-de-16,ke=0,Be;for(M=M.slice(12);ke<de;){var Pe=a(M,8,ke),Le=S(M,ke+1,ke+1+Pe),Ne=a(M,16,ke+Pe+2),Ge=S(M,ke+Pe+4,ke+Pe+4+Ne);V[Le]=Ge,ke+=Pe+4+Ne}if(V[":event-type"]==="Records")Be=S(M,ke,ke+ve,!0),Y.records.push(Be);else if(V[":event-type"]==="Stats")Be=S(M,ke,ke+ve,!0),Y.stats=Ke.xml2json(Be).Stats;else if(V[":event-type"]==="error"){var ct=V[":error-code"],qe=V[":error-message"],xe=new Error(qe);xe.message=qe,xe.name=xe.code=ct,Y.error=xe}M=M.slice(ke+ve+4)}return{payload:Y.records.join(""),body:z}},m=function(M){var V=this.options.CopySourceParser;if(V)return V(M);var z=M.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return z?{Bucket:z[1],Region:z[3],Key:z[7]}:null},F=function(){},j=function(M){var V={};for(var z in M)M.hasOwnProperty(z)&&M[z]!==void 0&&M[z]!==null&&(V[z]=M[z]);return V},G=function(M,V){var z,Y=new FileReader;FileReader.prototype.readAsBinaryString?(z=FileReader.prototype.readAsBinaryString,Y.onload=function(){V(this.result)}):FileReader.prototype.readAsArrayBuffer?z=function(de){var ve="",ke=new FileReader;ke.onload=function(Be){for(var Pe=new Uint8Array(ke.result),Le=Pe.byteLength,Ne=0;Ne<Le;Ne++)ve+=String.fromCharCode(Pe[Ne]);V(ve)},ke.readAsArrayBuffer(de)}:console.error("FileReader not support readAsBinaryString"),z.call(Y,M)},D=function(){var Q=function(z,Y){z=z.split("."),Y=Y.split(".");for(var te=0;te<Y.length;te++)if(z[te]!==Y[te])return parseInt(z[te])>parseInt(Y[te])?1:-1;return 0},M=function(z){if(!z)return!1;var Y=(z.match(/Chrome\/([.\d]+)/)||[])[1],te=(z.match(/QBCore\/([.\d]+)/)||[])[1],de=(z.match(/QQBrowser\/([.\d]+)/)||[])[1],ve=Y&&Q(Y,"53.0.2785.116")<0&&te&&Q(te,"3.53.991.400")<0&&de&&Q(de,"9.0.2524.400")<=0||!1;return ve};return M(typeof navigator<"u"&&navigator.userAgent)}(),Z=function(M,V,z,Y,te){var de;if(M.slice?de=M.slice(V,z):M.mozSlice?de=M.mozSlice(V,z):M.webkitSlice&&(de=M.webkitSlice(V,z)),Y&&D){var ve=new FileReader;ve.onload=function(ke){de=null,te(new Blob([ve.result]))},ve.readAsArrayBuffer(de)}else te(de)},ee=function(M,V,z,Y){z=z||F,M?typeof V=="string"?z(Ke.md5(V,!0)):Blob&&V instanceof Blob?Ke.getFileMd5(V,function(te,de){z(de)},Y):z():z()},he=1024*1024,ie=function(M,V,z){var Y=M.size,te=0,de=o.getCtx(),ve=function(Be){if(Be>=Y){var Pe=de.digest("hex");V(null,Pe);return}var Le=Math.min(Y,Be+he);Ke.fileSlice(M,Be,Le,!1,function(Ne){G(Ne,function(Ge){Ne=null,de=de.update(Ge,!0),te+=Ge.length,Ge=null,z&&z({loaded:te,total:Y,percent:Math.round(te/Y*1e4)/1e4}),ve(Be+he)})})};ve(0)};function re(Q){return pe(Q,function(M){return b(M)==="object"&&M!==null?re(M):M})}function ne(Q,M,V){return Q&&M in Q?Q[M]:V}function J(Q,M){return ae(M,function(V,z){Q[z]=M[z]}),Q}function oe(Q){return Q instanceof Array}function le(Q){return Object.prototype.toString.call(Q)==="[object Object]"}function ue(Q,M){for(var V=!1,z=0;z<Q.length;z++)if(M===Q[z]){V=!0;break}return V}function ce(Q){return oe(Q)?Q:[Q]}function ae(Q,M){for(var V in Q)Q.hasOwnProperty(V)&&M(Q[V],V)}function pe(Q,M){var V=oe(Q)?[]:{};for(var z in Q)Q.hasOwnProperty(z)&&(V[z]=M(Q[z],z));return V}function ye(Q,M){var V=oe(Q),z=V?[]:{};for(var Y in Q)Q.hasOwnProperty(Y)&&M(Q[Y],Y)&&(V?z.push(Q[Y]):z[Y]=Q[Y]);return z}var Se=function(M){var V,z,Y,te="";for(V=0,z=M.length/2;V<z;V++)Y=parseInt(M[V*2]+M[V*2+1],16),te+=String.fromCharCode(Y);return btoa(te)},Ae=function(){var M=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return M()+M()+"-"+M()+"-"+M()+"-"+M()+"-"+M()+M()+M()},be=function(M,V){var z=V.Bucket,Y=V.Region,te=V.Key,de=this.options.Domain,ve=!de||typeof de=="string"&&de.indexOf("{Bucket}")>-1,ke=!de||typeof de=="string"&&de.indexOf("{Region}")>-1;if(M.indexOf("Bucket")>-1||M==="deleteMultipleObject"||M==="multipartList"||M==="listObjectVersions"){if(ve&&!z)return"Bucket";if(ke&&!Y)return"Region"}else if(M.indexOf("Object")>-1||M.indexOf("multipart")>-1||M==="sliceUploadFile"||M==="abortUploadTask"||M==="uploadFile"){if(ve&&!z)return"Bucket";if(ke&&!Y)return"Region";if(!te)return"Key"}return!1},Ue=function(M,V){if(V=J({},V),M!=="getAuth"&&M!=="getV4Auth"&&M!=="getObjectUrl"){var z=V.Headers||{};if(V&&b(V)==="object"){(function(){for(var te in V)V.hasOwnProperty(te)&&te.indexOf("x-cos-")>-1&&(z[te]=V[te])})();var Y={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};Ke.each(Y,function(te,de){V[te]!==void 0&&(z[de]=V[te])}),V.Headers=j(z)}}return V},Je=function(M,V){return function(z,Y){var te=this;typeof z=="function"&&(Y=z,z={}),z=Ue(M,z);var de;if(te.options.EnableReporter)if(z.calledBySdk==="sliceUploadFile"||z.calledBySdk==="sliceCopyFile")de=z.tracker&&z.tracker.generateSubTracker({apiName:M});else if(["uploadFile","uploadFiles"].includes(M))de=null;else{var ve=0;z.Body&&(ve=typeof z.Body=="string"?z.Body.length:z.Body.size||z.Body.byteLength||0);var ke=te.options.UseAccelerate||typeof te.options.Domain=="string"&&te.options.Domain.includes("accelerate.");de=new L({Beacon:te.options.BeaconReporter,clsReporter:te.options.ClsReporter,bucket:z.Bucket,region:z.Region,apiName:M,realApi:M,accelerate:ke,fileKey:z.Key,fileSize:ve,deepTracker:te.options.DeepTracker,customId:te.options.CustomId,delay:te.options.TrackerDelay})}z.tracker=de;var Be=function(xe){return xe&&xe.headers&&(xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},Pe=function(xe,Ze){de&&de.report(xe,Ze),Y&&Y(Be(xe),Be(Ze))},Le=function(){if(M!=="getService"&&M!=="abortUploadTask"){var xe=be.call(te,M,z);if(xe)return"missing param "+xe;if(z.Region){if(te.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(z.Region))return"Region format error."}else{if(z.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(z.Region))return"Region format error."}!te.options.CompatibilityMode&&z.Region.indexOf("-")===-1&&z.Region!=="yfb"&&z.Region!=="default"&&z.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(z.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(z.Bucket))if(z.AppId)z.Bucket=z.Bucket+"-"+z.AppId;else if(te.options.AppId)z.Bucket=z.Bucket+"-"+te.options.AppId;else return'Bucket should format as "test-1250000000".';z.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete z.AppId)}!te.options.UseRawKey&&z.Key&&z.Key.substr(0,1)==="/"&&(z.Key=z.Key.substr(1))}},Ne=Le(),Ge=["getAuth","getObjectUrl"].includes(M);if(typeof Promise=="function"&&!Ge&&!Y)return new Promise(function(qe,xe){if(Y=function(We,dt){We?xe(We):qe(dt)},Ne)return Pe(Ke.error(new Error(Ne)));V.call(te,z,Pe)});if(Ne)return Pe(Ke.error(new Error(Ne)));var ct=V.call(te,z,Pe);if(Ge)return ct}},$e=function(M,V){var z=this,Y=0,te=0,de=Date.now(),ve,ke;function Be(){if(ke=0,V&&typeof V=="function"){ve=Date.now();var Pe=Math.max(0,Math.round((te-Y)/((ve-de)/1e3)*100)/100)||0,Le;te===0&&M===0?Le=1:Le=Math.floor(te/M*100)/100||0,de=ve,Y=te;try{V({loaded:te,total:M,speed:Pe,percent:Le})}catch{}}}return function(Pe,Le){if(Pe&&(te=Pe.loaded,M=Pe.total),Le)clearTimeout(ke),Be();else{if(ke)return;ke=setTimeout(Be,z.options.ProgressInterval)}}},Xe=function(M,V,z){var Y;if(typeof V.Body=="string"?V.Body=new Blob([V.Body],{type:"text/plain"}):V.Body instanceof ArrayBuffer&&(V.Body=new Blob([V.Body])),V.Body&&(V.Body instanceof Blob||V.Body.toString()==="[object File]"||V.Body.toString()==="[object Blob]"))Y=V.Body.size;else{z(Ke.error(new Error("params body format error, Only allow File|Blob|String.")));return}V.ContentLength=Y,z(null,Y)},st=function(M){return Date.now()+(M||0)},De=function(M,V){var z=M;return M.message=M.message||null,typeof V=="string"?(M.error=V,M.message=V):b(V)==="object"&&V!==null&&(J(M,V),(V.code||V.name)&&(M.code=V.code||V.name),V.message&&(M.message=V.message),V.stack&&(M.stack=V.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(M,"name",{writable:!0,enumerable:!1}),Object.defineProperty(M,"message",{enumerable:!0})),M.name=V&&V.name||M.name||M.code||"Error",M.code||(M.code=M.name),M.error||(M.error=re(z)),M},et=function(){return(typeof globalThis>"u"?"undefined":b(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},pt=function(){return(typeof window>"u"?"undefined":b(window))!=="object"&&(typeof v>"u"?"undefined":b(v))==="object"&&!0&&!et()},Ut=function(M){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(M)},Mt=function(){if((typeof navigator>"u"?"undefined":b(navigator))!=="object")return!1;var Q=navigator.userAgent,M=!!Q.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return M}(),jt=function(){return(typeof navigator>"u"?"undefined":b(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Lt=function(M,V){var z=P.encode(M);return V&&(z=z.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),z},Ft=function(M){return M?P.decode(M):""},Ht=function(M){var V=M.split("/"),z=[],Y=B(V),te;try{for(Y.s();!(te=Y.n()).done;){var de=te.value;de===".."?z.length&&z.pop():de.length&&de!=="."&&z.push(de)}}catch(ve){Y.e(ve)}finally{Y.f()}return"/"+z.join("/")},Kt=function(M){var V;if(M&&typeof M=="string"){var z=M.trim(),Y=z.indexOf("<")===0,te=z.indexOf("{")===0;if(Y)V=Ke.xml2json(M)||{};else if(te)try{var de=M.replace(/\n/g," "),ve=JSON.parse(de);Object.prototype.toString.call(ve)==="[object Object]"?V=ve:V=M}catch{V=M}else V=M}else V=M||{};return V},Ke={noop:F,formatParams:Ue,apiWrapper:Je,xml2json:q,json2xml:C,md5:o,clearKey:j,fileSlice:Z,getBodyMd5:ee,getFileMd5:ie,b64:Se,extend:J,isArray:oe,isInArray:ue,makeArray:ce,each:ae,map:pe,filter:ye,clone:re,attr:ne,uuid:Ae,camSafeUrlEncode:p,throttleOnProgress:$e,getFileSize:Xe,getSkewTime:st,error:De,obj2str:s,getAuth:i,parseSelectPayload:w,getSourceParams:m,isBrowser:!0,isNode:pt,isCIHost:Ut,isIOS_QQ:Mt&&jt,encodeBase64:Lt,decodeBase64:Ft,simplifyPath:Ht,readAsBinaryString:G,parseResBody:Kt};g.exports=Ke}).call(this,f("./node_modules/process/browser.js"))}})})})(Wn);var kr=Wn.exports;const cn=Dn(kr),un="eyJjIjoiUGMrQjlvL0RyYUhKSXRnanRFaHJySlFEKzcxcjFRRWhGc0F1ellQNGp2aml2aHcyVm1mdnlSYklCQWJzQUhBMmo0dkhHQT09IiwiaXYiOiJKNmFRdE5sN2dZeWM1c1JtIiwiayI6Ikp0L0l0eDRQenk5cml5TUN4UUpNcFNFM25rQldrTTdqeFlHVXRRc25OVmhDUTlOdk40U1R2QmpHSXgyek01WXc4MkM4QTVxRU1BekdvV3g5cDhUZGhtdkdZSVRpVjRhSERsT0tOUXJER0c1QUlSTmZ6VFpWSDFQNzNjY3ZZNDBsbldlcDAyTCthUWx3aUdQSHF1bnpxQUtGZGVxVkk5NjlBdVZGQjVkZlRHU0RkUFZDN3ViOG1GRTJ5ZXdsc0s4aXdHRG81YTM5emtGTSsvYmt3Q1BXSXF5cUFmRlc4aUx0ejNsTDhaaG1ZN3NhejJSZitDTU11bjBwTFBrWlFPc1p4VGFLQmtsYm15ZitmWlVOTm5XdGxsQlRZZ3dydE00T1lMUGVJcDR2dFFpMHFkb2NNMStRbDZ5YnNUR0Z6K0FodzFVNEFjYnRHeDhEOEtxOXFNSnBvUT09In0",an="eyJjIjoiOU5LdVBVTC92bEF4cHVaektSdVlCUmlZQnJ6Z0JpdmVHVDJGS2tNTXU5ejk0TmRHU2tVSjBGdXNqLzIxbHdNTCIsIml2IjoiZkFyaFp6UVZRWGYxeHkzSCIsImsiOiJYZXJ0ekI4ZyszMkswSk16bDllcjdCS01vNVozNW4vbU1TajhjaGVCdkIwQXo2M1drR0I5emVWeHJHRlROWGQxRDMwMzlwUzF6cjBjSytvTmlhYkpLU01iR2gxdUhyaWZjb3hyZnQvZXBpZFVxUlpGemhMKzhuUkw5N0FoWEZSakVDNTZwSFYxT3hidXo5ZVc2MmNneHV1YVRFNXFZcUxmcEZiTlRjSFgxd2taVlo4R3Zrd3FmTStaZUlXNEhPNHFHaU5QdFV6dmowb3VGSnFVUEV3ZnhYVGVtV0ZoN3dvM1d2Z0lucUMwakVlcmJsa2xydTBWU1BBTzRDYnBtNlNsQnE5akpsNDBnazhoM2thYnRoL1doeEV1RkNlRFFyQm1JS0dsTFhjamRoSGZYSGowYVJOV0F3cDB2VjR2UThQWG44L2pKblpGb1lnR0NyQzI4TkRjL2c9PSJ9",ln="eyJjIjoiWXNraTZTR2VqLzJwTTdKNzl3WldhOW5HRXNpY2tCWlBKdFQwamprSjhDVnNpdz09IiwiaXYiOiJGUmhjelJ5cW5nRUFrYXFxIiwiayI6ImJTY3FVbWI2RWNMdE5KU3F2dm1rVHhaWUhuSytFSUdrNDBZZ0pzZzV4UzkyYnorSjVBdWVSZ2lCTmFlaDVoTVc5WDJyZjYrd2ErYTRsVEJkbWtlYW1Sd3F2MGhiMS8rMkNHK20yVUthU2RXU0o0dGVVMXhsby9PcWFkVURFMVpjUG1rcGd4L0xvTnFIbGRFaDZVc003Q1V2b3pwQTBOMDVPUC9sUEpkYXM4ZVlnZUJXajdGQVZ6WGhjOTc3VlhBWHZLWXY0aGlNRmlaSk51OGozd1N6aTdBVWVlc2xSVldlN3RzeFduTFdrOVNBUEpydFZQa0JCWWNHU0w2MmprTE9kdFUvVkNMUCtLMVVjWmtvNGYzaFlpWnoyOHBnVHdwb1lZbi9IUUxOWEJiSUN2ZzlPdWQwWUlFTm85RDE0dWs0WUtyTXlnWEt0UjFuR0t0T3BzNmdwQT09In0",_r=async()=>{const y=await Ye(un).then(f=>f.text()),k=await Ye(an).then(f=>f.text()),g=await Ye(ln).then(f=>f.text()),N=new cn({SecretId:y,SecretKey:k});return new Promise((f,v)=>{N.getBucket({Bucket:g,Region:"ap-beijing"},function(b,B){if(b){v(b);return}const U={};B.Contents.forEach(({Key:E})=>{const[o,c]=E.split("_");U[o]||(U[o]=[]),U[o][c]=E}),Object.keys(U).forEach(E=>{U[E]=U[E].filter(Boolean)}),f({data:U})})})},mr=async y=>{const k=await Ye(un).then(v=>v.text()),g=await Ye(an).then(v=>v.text()),N=await Ye(ln).then(v=>v.text()),f=new cn({SecretId:k,SecretKey:g});return new Promise((v,b)=>{f.getObject({Bucket:N,Region:"ap-beijing",Key:y},function(B,U){if(B){b(B);return}v({data:U.Body.toString()})})})},br=async(y,k)=>{const g=await Ye(un).then(B=>B.text()),N=await Ye(an).then(B=>B.text()),f=await Ye(ln).then(B=>B.text()),v=new cn({SecretId:g,SecretKey:N}),b=new File([y],k,{type:"text/plain"});return new Promise((B,U)=>{v.putObject({Bucket:f,Region:"ap-beijing",Key:b.name,Body:b},function(E,o){if(E){U(E);return}B({data:k})})})},Tr=({src:y})=>{const[k,g]=wt(""),[N,f]=wt(!0);return Ot(()=>{let v="",b=!0;return y?(f(!0),mr(y).then(({data:B})=>Ye(B)).then(B=>{b&&(v=URL.createObjectURL(B),g(v),f(!1))}).catch(()=>{b&&f(!1)})):f(!1),()=>{b=!1,v&&URL.revokeObjectURL(v)}},[y]),_e("div",{className:"w-full h-full flex items-center justify-center",children:N?_e("div",{className:"flex items-center justify-center",children:_e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):k?_e("img",{src:k,className:"w-full h-full object-contain rounded-lg",alt:"加密图片",loading:"lazy"}):_e("div",{className:"text-gray-400 text-sm",children:"图片加载失败"})})},Rr=()=>{const[{checkDay:y,checkData:k},g]=zn(),N=vt().format("YYYY-MM-DD"),f=N===y,v=k[y]||[],b=async B=>{const U=B.target.files[0];if(U){const E=await Sr(U),{data:o}=await br(E,`${N}_${v.length}`),c={...k,[N]:[...k[N]||[],o]};g({checkData:c})}};return _e("div",{className:"flex flex-col h-screen",children:[_e("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-4 py-3 shadow-sm sticky top-0 z-10",children:_e("div",{className:"flex items-center justify-between",children:[_e("div",{className:"flex items-center space-x-4",children:[_e("button",{onClick:()=>g({page:it.MAIN}),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium transition-colors",children:"← 返回"}),_e("div",{className:"flex items-center space-x-2",children:[_e("div",{className:"text-lg font-semibold text-gray-800",children:y}),!!v.length&&_e("div",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:v.length})]})]}),f&&_e("label",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm font-medium transition-colors",children:["上传图片",_e("input",{type:"file",accept:"image/*",capture:"environment",onChange:b,className:"hidden"})]})]})}),_e("div",{className:"flex-1 overflow-auto p-4",children:v.length===0?_e("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[_e("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_e("p",{className:"text-lg",children:"暂无图片"}),f&&_e("p",{className:"text-sm mt-2",children:"点击上方上传按钮添加图片"})]}):_e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map((B,U)=>_e("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:_e("div",{className:"aspect-square",children:_e(Tr,{src:B})})},`${B}_${U}`))})})]})},it={LOADING:0,CONFIG:1,MAIN:2,CHECK:3},xr={[it.LOADING]:()=>_e(St,{}),[it.CONFIG]:pr,[it.MAIN]:yr,[it.CHECK]:Rr},qn=ir({}),Br=()=>{const[y,k]=wt({page:it.LOADING,checkData:{}}),g=f=>{k(v=>({...v,...f}))};Ot(()=>{Vn().then(f=>{if(f.pub&&f.pri)return g({page:it.MAIN}),_r();throw new Error("No keys found")}).then(({data:f})=>{g({checkData:f})}).catch(()=>{g({page:it.CONFIG})})},[]);const N=xr[y.page];return _e(qn.Provider,{value:{globalState:y,setGlobalState:g},children:_e(N,{})})};or(_e(Br,{}),document.getElementById("app"));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.right-0{right:0}.top-0{top:0}.z-10{z-index:10}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mt-2{margin-top:.5rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.h-10{height:2.5rem}.h-16{height:4rem}.h-4{height:1rem}.h-8{height:2rem}.h-full{height:100%}.h-screen{height:100vh}.w-16{width:4rem}.w-4{width:1rem}.w-8{width:2rem}.w-full{width:100%}.max-w-4xl{max-width:56rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-4{gap:1rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-green-400{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.object-contain{-o-object-fit:contain;object-fit:contain}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.text-center{text-align:center}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:shadow-lg:hover{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>